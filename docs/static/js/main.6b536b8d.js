/*! For license information please see main.6b536b8d.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,E=60107,I=60108,S=60114,T=60109,C=60110,N=60112,A=60113,O=60120,P=60115,D=60116,R=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;x=j("react.element"),_=j("react.portal"),E=j("react.fragment"),I=j("react.strict_mode"),S=j("react.profiler"),T=j("react.provider"),C=j("react.context"),N=j("react.forward_ref"),A=j("react.suspense"),O=j("react.suspense_list"),P=j("react.memo"),D=j("react.lazy"),R=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function G(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return H(e.type);case R:return H(e._render);case D:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function Oe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function De(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=De,Fe=!1,Ue=!1;function je(){null===Ce&&null===Ne||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,Ge=null,Ke=!1,He=null,Qe={onError:function(e){We=!0,Ge=e}};function $e(e,t,n,r,i,a,o,u,s){We=!1,Ge=null,ze.apply(Qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function xt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&wt(ut,e),null!==st&&wt(st,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},It={},St={};function Tt(e){if(It[e])return It[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return It[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=Tt("animationend"),Nt=Tt("animationiteration"),At=Tt("animationstart"),Ot=Tt("transitionend"),Pt=new Map,Dt=new Map,Rt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Dt.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Kt|0)|0},Gt=Math.log,Kt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,$t=!0;function Yt(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Re(i,e,t,n,r)}finally{(Fe=a)||je()}}function Jt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Se(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),bn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(wn),_n=sn(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return Tn}var Nn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),On=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Dn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Rn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var jn=f&&"TextEvent"in window&&!Un,Vn=f&&(!Fn||Un&&8<Un&&11>=Un),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Qn(e,t,n,r){Oe(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Jn(e){Nr(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Yn=$n=null)}function ar(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];if(Qn(t,Yn,e,Se(e)),e=Jn,Fe)e(t);else{Fe=!0;try{De(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<Er.length;Ir++)Dt.set(Er[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if($e.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Ge;We=!1,Ge=null,Ke||(Ke=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(Ke)throw e=He,Ke=!1,He=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Or]||(e[Or]=!0,u.forEach((function(t){Tr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Rr(a,e,i,t),o.add(u))}function Rr(e,t,n,r){var i=Dt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Se(n),o=[];e:{var u=Pt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Pn;break;case Ct:case Nt:case At:s=bn;break;case Ot:s=Dn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=On}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Hn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(kr=m,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(m=Fr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ve(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=Ve(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Xr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ei=null,Ii=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Di=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ni?Ni:function(){},ji=null,Vi=null,Bi=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Wi(){switch(Oi()){case Pi:return 99;case Di:return 98;case Ri:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Pi;case 98:return Di;case 97:return Ri;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Ki(e,t){return e=Gi(e),Ii(e,t)}function Hi(e,t,n){return e=Gi(e),Si(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Ti(e)}$i()}function $i(){if(!Bi&&null!==ji){Bi=!0;var e=0;try{var t=ji;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Si(Pi,Qi),n}finally{Bi=!1}}}var Yi=w.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ks(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Js(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===E?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===E?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Js(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Sa=Ia(!0),Ta=Ia(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Oa=ci(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Da(e,t){switch(fi(Oa,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Ra(){li(Na),li(Aa),li(Oa)}function La(e){Pa(Oa.current);var t=Pa(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,Ba=!1;function qa(e,t){var n=Ws(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(Ba){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(ja=e);qa(ja,n)}ja=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,ja=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ka(e){if(e!==ja)return!1;if(!Ba)return Ga(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)qa(e,t),t=Qr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){Va=ja=null,Ba=!1}var Qa=[];function $a(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ya=w.ReactCurrentDispatcher,Ja=w.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Do:Ro,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Lo,e=n(r,i)}while(ro)}if(Ya.current=Po,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Du;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ya.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Wt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Oo.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Oo.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function bo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return bo(516,4,e,t)}function _o(e,t){return wo(516,4,e,t)}function Eo(e,t){return wo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Io.bind(null,t,e),n)}function To(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Wi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Oo(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oo.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:To,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Eo,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Eo,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Sa(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ks(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ba(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ji(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ba(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Sa(t,e.child,null,a),t.child=Sa(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Da(e,t.containerInfo)}var Qo,$o,Yo,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ks(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ks(o,u),null!==e?r=Ks(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ks(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ks(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Ra(),li(pi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Oa.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Na.current),Ka(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ee(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)Ar(Sr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ee(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Oa.current),Pa(Na.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Du||0===(134217727&Bu)&&0===(134217727&qu)||gs(Du,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Ra(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ku&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ku&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ra(),li(pi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Ra(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ee(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,Ju=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Iu(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Eu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Eu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Eu(e,t,n),e=e.sibling;null!==e;)Eu(e,t,n),e=e.sibling}function Iu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Su(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=w.ReactCurrentDispatcher,Ou=w.ReactCurrentOwner,Pu=0,Du=null,Ru=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,ju=null,Vu=0,Bu=0,qu=0,zu=0,Wu=null,Gu=0,Ku=1/0;function Hu(){Ku=zi()+500}var Qu,$u=null,Yu=!1,Ju=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Pu)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===ss&&(ss=Vu),0!==Yi.transition){0!==cs&&(cs=null!==Wu?Wu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Pu)&&98===e?e=Vt(12,ss):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Du&&(qu|=t,4===Uu&&gs(e,Lu));var r=Wi();1===t?0!==(8&Pu)&&0===(48&Pu)?ks(e):(ys(e,n),0===Pu&&(Hu(),Qi())):(0===(4&Pu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Wu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Wt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Du?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Vi=Si(Pi,$i)):ji.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Pu))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Du?Lu:0);if(0===n)return null;var r=n,i=Pu;Pu|=16;var a=Ss();for(Du===e&&Lu===r||(Hu(),Es(e,r));;)try{Ns();break}catch(s){Is(e,s)}if(na(),Au.current=a,Pu=i,null!==Ru?r=0:(Du=null,Lu=0,r=Uu),0!==(Vu&qu))Es(e,0);else if(0!==r){if(2===r&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=Ts(e,n))),1===r)throw t=ju,Es(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ps(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Ps.bind(null,e),r);break}Ps(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Wt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Gr(Ps.bind(null,e),n);break}Ps(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Pu))throw Error(o(327));if(Ls(),e===Du&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(Vu&qu)&&(n=Ts(e,t=Ut(e,t)))}else n=Ts(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=Ts(e,t))),1===n)throw n=ju,Es(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e),ys(e,zi()),null}function bs(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Hu(),Qi())}}function ws(e,t){var n=Pu;Pu&=-2,Pu|=8;try{return e(t)}finally{0===(Pu=n)&&(Hu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,Vu|=t}function _s(){Mu=Fu.current,li(Fu)}function Es(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ra(),li(pi),li(di),$a();break;case 5:Ma(r);break;case 4:Ra();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Du=e,Ru=Ks(e.current,null),Lu=Mu=Vu=t,Uu=0,ju=null,zu=qu=Bu=0}function Is(e,t){for(;;){var n=Ru;try{if(na(),Ya.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Ou.current=null,null===n||null===n.return){Uu=1,ju=t,Ru=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Bs.bind(null,a,c,u);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var w=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Os(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function Ss(){var e=Au.current;return Au.current=Po,null===e?Po:e}function Ts(e,t){var n=Pu;Pu|=16;var r=Ss();for(Du===e&&Lu===t||Es(e,t);;)try{Cs();break}catch(i){Is(e,i)}if(na(),Pu=n,Au.current=r,null!==Ru)throw Error(o(261));return Du=null,Lu=0,Uu}function Cs(){for(;null!==Ru;)As(Ru)}function Ns(){for(;null!==Ru&&!Ci();)As(Ru)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Os(e):Ru=t,Ou.current=null}function Os(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ru=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ru=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Uu&&(Uu=5)}function Ps(e){var t=Wi();return Ki(99,Ds.bind(null,e,t)),null}function Ds(e,t){do{Ls()}while(null!==es);if(0!==(48&Pu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Du&&(Ru=Du=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pu,Pu|=32,Ou.current=null,Br=$t,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(S){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},$t=!1,ls=null,fs=!1,$u=r;do{try{Rs()}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&ge($u.stateNode,""),128&k){var b=$u.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:xu($u),$u.flags&=-3;break;case 6:xu($u),$u.flags&=-3,Su($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,Su($u.alternate,$u);break;case 4:Su($u.alternate,$u);break;case 8:Iu(u,s=$u);var x=s.alternate;bu(s),null!==x&&bu(x)}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);if(w=qr,b=yr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!w.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),x>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}$t=!!Br,qr=Br=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var _=$u.flags;if(36&_&&mu(k,$u.alternate,$u),128&_){b=void 0;var E=$u.ref;if(null!==E){var I=$u.stateNode;$u.tag,b=I,"function"===typeof E?E(b):E.current=b}}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));Vs($u,S),$u=$u.nextEffect}}while(null!==$u);$u=null,Ui(),Pu=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((_=$u).sibling=null,_.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(S){}if(ys(e,zi()),Yu)throw Yu=!1,e=Ju,Ju=null,e;return 0!==(8&Pu)||Qi(),null}function Rs(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?et($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&et($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&yu(e,$u),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),$u=$u.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Ki(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Pu))throw Error(o(331));var t=Pu;Pu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Pu=t,Qi(),!0}function js(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function Vs(e,t){if(3===e.tag)js(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){js(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Du===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>zi()-Gu?Es(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===ss&&(ss=Vu),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ks(e,t){var n=e.alternate;return null===n?((n=Ws(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case I:u=8,i|=1;break;case S:return(e=Ws(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case A:return(e=Ws(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case O:return(e=Ws(19,n,t,i)).elementType=O,e.lanes=a,e;case F:return $s(n,i,a,t);case U:return(e=Ws(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case N:u=11;break e;case P:u=14;break e;case D:u=16,r=null;break e;case R:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ws(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ws(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ws(23,e,r,t)).elementType=F,e.lanes=n,e}function Ys(e,t,n){return(e=Ws(6,e,null,t)).lanes=n,e}function Js(e,t,n){return(t=Ws(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=bi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ws(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ws((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Wr(r,i)?u=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Xo(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Sa(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Vo(e,t,i,a=Ji(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=bs,Re=function(e,t,n,r,i){var a=Pu;Pu|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Pu=a)&&(Hu(),Qi())}},Le=function(){0===(49&Pu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Pu;Pu|=2;try{return e(t)}finally{0===(Pu=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,Oe,Pe,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ei=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pu;if(0!==(48&n))return e(t);Pu|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Pu=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(791)),a=(r=n(7))&&r.__esModule?r:{default:r},o=n(647),u=n(580);function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==c(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(c,e);var t,n,r,a,s=(t=c,function(){var e,n=k(t);if(g()){var r=k(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y(this,e)});function c(){var e;p(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(m(e=s.call.apply(s,[this].concat(n))),"state",{hovered:!1}),w(m(e),"getStyle",(function(t){var n="dark"===e.props.type?u.darkStyle:u.lightStyle;return e.state.hovered?d({},n,{},u.hoverStyle,{},t):e.props.disabled?d({},n,{},u.disabledStyle,{},t):d({},n,{},t)})),w(m(e),"mouseOver",(function(){e.props.disabled||e.setState({hovered:!0})})),w(m(e),"mouseOut",(function(){e.props.disabled||e.setState({hovered:!1})})),w(m(e),"click",(function(t){e.props.disabled||e.props.onClick(t)})),e}return n=c,(r=[{key:"render",value:function(){var e=this.props,t=e.label,n=e.style,r=f(e,["label","style"]);return i.default.createElement("div",l({},r,{role:"button",onClick:this.click,style:this.getStyle(n),onMouseOver:this.mouseOver,onMouseOut:this.mouseOut}),i.default.createElement(o.GoogleIcon,this.props),i.default.createElement("span",null,t))}}])&&v(n.prototype,r),a&&v(n,a),c}(i.PureComponent);t.default=x,w(x,"propTypes",{label:a.default.string,disabled:a.default.bool,tabIndex:a.default.number,onClick:a.default.func,type:a.default.oneOf(["light","dark"]),style:a.default.object}),w(x,"defaultProps",{label:"Sign in with Google",disabled:!1,type:"dark",tabIndex:0,onClick:function(){}})},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleIcon=void 0;var r=o(n(791)),i=o(n(7)),a=n(580);function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"46px",height:"46px",viewBox:"0 0 46 46",style:a.svgStyle},r.default.createElement("defs",null,r.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.default.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.default.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.default.createElement("feMerge",null,r.default.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.default.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.default.createElement("feMergeNode",{in:"SourceGraphic"}))),r.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"}),r.default.createElement("rect",{id:"path-3",x:"5",y:"5",width:"38",height:"38",rx:"1"})),r.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -219.000000)"}),r.default.createElement("g",{id:"btn_google_dark_normal",transform:"translate(-1.000000, -1.000000)"},r.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},r.default.createElement("g",{id:"button-bg"},r.default.createElement("use",{fill:"#4285F4",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}))),r.default.createElement("g",{id:"button-bg-copy"},r.default.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"})),r.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.default.createElement("g",{id:"handles_square"})))),f=r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"46px",height:"46px",viewBox:"0 0 46 46",style:a.svgStyle},r.default.createElement("defs",null,r.default.createElement("filter",{x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"objectBoundingBox",id:"filter-1"},r.default.createElement("feOffset",{dx:"0",dy:"1",in:"SourceAlpha",result:"shadowOffsetOuter1"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0",in:"shadowBlurOuter1",type:"matrix",result:"shadowMatrixOuter1"}),r.default.createElement("feOffset",{dx:"0",dy:"0",in:"SourceAlpha",result:"shadowOffsetOuter2"}),r.default.createElement("feGaussianBlur",{stdDeviation:"0.5",in:"shadowOffsetOuter2",result:"shadowBlurOuter2"}),r.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0",in:"shadowBlurOuter2",type:"matrix",result:"shadowMatrixOuter2"}),r.default.createElement("feMerge",null,r.default.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),r.default.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),r.default.createElement("feMergeNode",{in:"SourceGraphic"}))),r.default.createElement("rect",{id:"path-2",x:"0",y:"0",width:"40",height:"40",rx:"2"})),r.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"9-PATCH",transform:"translate(-608.000000, -160.000000)"}),r.default.createElement("g",{id:"btn_google_light_normal",transform:"translate(-1.000000, -1.000000)"},r.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)",filter:"url(#filter-1)"},r.default.createElement("g",{id:"button-bg"},r.default.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}))),r.default.createElement("g",{id:"logo_googleg_48dp",transform:"translate(15.000000, 15.000000)"},r.default.createElement("path",{d:"M17.64,9.20454545 C17.64,8.56636364 17.5827273,7.95272727 17.4763636,7.36363636 L9,7.36363636 L9,10.845 L13.8436364,10.845 C13.635,11.97 13.0009091,12.9231818 12.0477273,13.5613636 L12.0477273,15.8195455 L14.9563636,15.8195455 C16.6581818,14.2527273 17.64,11.9454545 17.64,9.20454545 L17.64,9.20454545 Z",id:"Shape",fill:"#4285F4"}),r.default.createElement("path",{d:"M9,18 C11.43,18 13.4672727,17.1940909 14.9563636,15.8195455 L12.0477273,13.5613636 C11.2418182,14.1013636 10.2109091,14.4204545 9,14.4204545 C6.65590909,14.4204545 4.67181818,12.8372727 3.96409091,10.71 L0.957272727,10.71 L0.957272727,13.0418182 C2.43818182,15.9831818 5.48181818,18 9,18 L9,18 Z",id:"Shape",fill:"#34A853"}),r.default.createElement("path",{d:"M3.96409091,10.71 C3.78409091,10.17 3.68181818,9.59318182 3.68181818,9 C3.68181818,8.40681818 3.78409091,7.83 3.96409091,7.29 L3.96409091,4.95818182 L0.957272727,4.95818182 C0.347727273,6.17318182 0,7.54772727 0,9 C0,10.4522727 0.347727273,11.8268182 0.957272727,13.0418182 L3.96409091,10.71 L3.96409091,10.71 Z",id:"Shape",fill:"#FBBC05"}),r.default.createElement("path",{d:"M9,3.57954545 C10.3213636,3.57954545 11.5077273,4.03363636 12.4404545,4.92545455 L15.0218182,2.34409091 C13.4631818,0.891818182 11.4259091,0 9,0 C5.48181818,0 2.43818182,2.01681818 0.957272727,4.95818182 L3.96409091,7.29 C4.67181818,5.16272727 6.65590909,3.57954545 9,3.57954545 L9,3.57954545 Z",id:"Shape",fill:"#EA4335"}),r.default.createElement("path",{d:"M0,0 L18,0 L18,18 L0,18 L0,0 Z",id:"Shape"})),r.default.createElement("g",{id:"handles_square"})))),h=r.default.createElement("svg",{width:"46px",height:"46px",viewBox:"0 0 46 46",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:a.svgStyle},r.default.createElement("defs",null,r.default.createElement("rect",{id:"path-1",x:"0",y:"0",width:"40",height:"40",rx:"2"})),r.default.createElement("g",{id:"Google-Button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.default.createElement("g",{id:"9-PATCH",transform:"translate(-788.000000, -219.000000)"}),r.default.createElement("g",{id:"btn_google_dark_disabled",transform:"translate(-1.000000, -1.000000)"},r.default.createElement("g",{id:"button",transform:"translate(4.000000, 4.000000)"},r.default.createElement("g",{id:"button-bg"},r.default.createElement("use",{fillOpacity:"0.08",fill:"#000000",fillRule:"evenodd"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}),r.default.createElement("use",{fill:"none"}))),r.default.createElement("path",{d:"M24.001,25.71 L24.001,22.362 L32.425,22.362 C32.551,22.929 32.65,23.46 32.65,24.207 C32.65,29.346 29.203,33 24.01,33 C19.042,33 15.01,28.968 15.01,24 C15.01,19.032 19.042,15 24.01,15 C26.44,15 28.474,15.891 30.031,17.349 L27.475,19.833 C26.827,19.221 25.693,18.501 24.01,18.501 C21.031,18.501 18.601,20.976 18.601,24.009 C18.601,27.042 21.031,29.517 24.01,29.517 C27.457,29.517 28.726,27.132 28.96,25.719 L24.001,25.719 L24.001,25.71 Z",id:"Shape-Copy",fillOpacity:"0.4",fill:"#000000"}),r.default.createElement("g",{id:"handles_square"})))),d=function(e){var t=e.disabled,n=e.type;return r.default.createElement("div",{style:t?s({},a.iconStyle,{},a.disabledIconStyle):a.iconStyle},t?h:"dark"===n?l:f)};t.GoogleIcon=d,d.propTypes={disabled:i.default.bool,type:i.default.oneOf(["light","dark"])},d.defaultProps={type:"dark"}},808:function(e,t,n){"use strict";Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(160))&&r.__esModule?r:{default:r}},580:function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.disabledIconStyle=t.disabledStyle=t.hoverStyle=t.svgStyle=t.iconStyle=t.lightStyle=t.darkStyle=void 0;var a={height:"50px",width:"240px",border:"none",textAlign:"center",verticalAlign:"center",boxShadow:"0 2px 4px 0 rgba(0,0,0,.25)",fontSize:"16px",lineHeight:"48px",display:"block",borderRadius:"1px",transition:"background-color .218s, border-color .218s, box-shadow .218s",fontFamily:"Roboto,arial,sans-serif",cursor:"pointer",userSelect:"none"},o=r({backgroundColor:"#4285f4",color:"#fff"},a);t.darkStyle=o;var u=r({backgroundColor:"#fff",color:"rgba(0,0,0,.54)"},a);t.lightStyle=u;t.iconStyle={width:"48px",height:"48px",textAlign:"center",verticalAlign:"center",display:"block",marginTop:"1px",marginLeft:"1px",float:"left",backgroundColor:"#fff",borderRadius:"1px",whiteSpace:"nowrap"};t.svgStyle={width:"48px",height:"48px",display:"block"};t.hoverStyle={boxShadow:"0 0 3px 3px rgba(66,133,244,.3)",transition:"background-color .218s, border-color .218s, box-shadow .218s"};t.disabledStyle={backgroundColor:"rgba(37, 5, 5, .08)",color:"rgba(0, 0, 0, .40)",cursor:"not-allowed"};t.disabledIconStyle={backgroundColor:"transparent"}},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,y=60117,m=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),y=k("react.fundamental"),m=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case h:case u:return e;default:return t}}case r:return t}}}},441:function(e,t,n){"use strict";n(372)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function O(){var e=A.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(O){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=y.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>I(o,n))void 0!==s&&0>I(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>I(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],T=[],C=1,N=null,A=3,O=!1,P=!1,D=!1;function R(e){for(var t=_(T);null!==t;){if(null===t.callback)E(T);else{if(!(t.startTime<=e))break;E(T),t.sortIndex=t.expirationTime,x(S,t)}t=_(T)}}function L(e){if(D=!1,R(e),!P)if(null!==_(S))P=!0,n(M);else{var t=_(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,D&&(D=!1,i()),O=!0;var a=A;try{for(R(n),N=_(S);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(S)&&E(S),R(n)}else E(S);N=_(S)}if(null!==N)var s=!0;else{var c=_(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,O=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(S)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===_(S)&&e===_(T)&&(D?i():D=!0,r(L,o-u))):(e.sortIndex=s,x(S,e),P||O||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".1cda1675.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="calculadora-nominal-pwa:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcalculadora_nominal_pwa=self.webpackChunkcalculadora_nominal_pwa||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Je},SDK_VERSION:function(){return $t},_DEFAULT_ENTRY_NAME:function(){return Mt},_addComponent:function(){return Vt},_addOrOverwriteComponent:function(){return Bt},_apps:function(){return Ut},_clearComponents:function(){return Gt},_components:function(){return jt},_getProvider:function(){return zt},_registerComponent:function(){return qt},_removeServiceInstance:function(){return Wt},deleteApp:function(){return Zt},getApp:function(){return Jt},getApps:function(){return Xt},initializeApp:function(){return Yt},onLog:function(){return nn},registerVersion:function(){return tn},setLogLevel:function(){return rn}});var t=n(791),r=n(164),i=t.createContext(null);var a=function(e){e()},o=function(){return a};var u={notify:function(){},get:function(){return[]}};function s(e,t){var n,r=u;function i(){s.onStateChange&&s.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=o(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var s={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=u)},getListeners:function(){return r}};return s}var c="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect;var l=function(e){var n=e.store,r=e.context,a=e.children,o=(0,t.useMemo)((function(){var e=s(n);return e.onStateChange=e.notifyNestedSubs,{store:n,subscription:e}}),[n]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);c((function(){var e=o.subscription;return e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,u]);var l=r||i;return t.createElement(l.Provider,{value:o},a)};n(110),n(441);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(){return(0,t.useContext)(i)}function d(e){void 0===e&&(e=i);var n=e===i?h:function(){return(0,t.useContext)(e)};return function(){return n().store}}var p=d();function v(e){void 0===e&&(e=i);var t=e===i?p:d(e);return function(){return t().dispatch}}var y=v(),m=function(e,t){return e===t};function g(e){void 0===e&&(e=i);var n=e===i?h:function(){return(0,t.useContext)(e)};return function(e,r){void 0===r&&(r=m);var i=n(),a=function(e,n,r,i){var a,o=(0,t.useReducer)((function(e){return e+1}),0)[1],u=(0,t.useMemo)((function(){return s(r,i)}),[r,i]),l=(0,t.useRef)(),f=(0,t.useRef)(),h=(0,t.useRef)(),d=(0,t.useRef)(),p=r.getState();try{if(e!==f.current||p!==h.current||l.current){var v=e(p);a=void 0!==d.current&&n(v,d.current)?d.current:v}else a=d.current}catch(y){throw l.current&&(y.message+="\nThe error may be correlated with this previous error:\n"+l.current.stack+"\n\n"),y}return c((function(){f.current=e,h.current=p,d.current=a,l.current=void 0})),c((function(){function e(){try{var e=r.getState();if(e===h.current)return;var t=f.current(e);if(n(t,d.current))return;d.current=t,h.current=e}catch(y){l.current=y}o()}return u.onStateChange=e,u.trySubscribe(),e(),function(){return u.tryUnsubscribe()}}),[r,u]),a}(e,r,i.store,i.subscription);return(0,t.useDebugValue)(a),a}}var k,b=g();function w(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,u,"next",e)}function u(e){w(a,r,i,o,u,"throw",e)}o(void 0)}))}}function _(e){if(Array.isArray(e))return e}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){if(e){if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){return _(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||I(e,t)||S()}k=r.unstable_batchedUpdates,a=k;var C,N=n(757),A=n.n(N);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(C||(C={}));var O=function(e){return e};var P="beforeunload",D="popstate";function R(e){e.preventDefault(),e.returnValue=""}function L(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function M(){return Math.random().toString(36).substr(2,8)}function F(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function U(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function j(e,t){if(!e)throw new Error(t)}var V=(0,t.createContext)(null);var B=(0,t.createContext)(null);var q=(0,t.createContext)({outlet:null,matches:[]});function z(e){var n=e.to,r=e.replace,i=e.state;$()||j(!1);var a=J();return(0,t.useEffect)((function(){a(n,{replace:r,state:i})})),null}function W(e){return function(e){var n=(0,t.useContext)(q).outlet;if(n)return(0,t.createElement)(X.Provider,{value:e},n);return n}(e.context)}function G(e){j(!1)}function K(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?C.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;$()&&j(!1);var h=fe(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=U(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,x=void 0===w?null:w,_=p.key,E=void 0===_?"default":_,I=(0,t.useMemo)((function(){var e=ce(y,h);return null==e?null:{pathname:e,search:g,hash:b,state:x,key:E}}),[h,y,g,b,x,E]);return null==I?null:(0,t.createElement)(V.Provider,{value:d},(0,t.createElement)(B.Provider,{children:a,value:{location:I,navigationType:s}}))}function H(e){var n=e.children,r=e.location;return function(e,n){$()||j(!1);var r=(0,t.useContext)(q).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var u,s=Y();if(n){var c,l="string"===typeof n?U(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||j(!1),u=l}else u=s;var f=u.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=ce(("string"===typeof t?U(t):t).pathname||"/",n);if(null==r)return null;var i=te(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=ae(i[o],r);return a}(e,{pathname:h});0;return oe(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:le([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:le([o,e.pathnameBase])})})),r)}(ee(n),r)}function Q(e){$()||j(!1);var n=(0,t.useContext)(V),r=n.basename,i=n.navigator,a=Z(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?U(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):le([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function $(){return null!=(0,t.useContext)(B)}function Y(){return $()||j(!1),(0,t.useContext)(B).location}function J(){$()||j(!1);var e=(0,t.useContext)(V),n=e.basename,r=e.navigator,i=(0,t.useContext)(q).matches,a=Y().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=se(e,JSON.parse(o),a);"/"!==n&&(i.pathname=le([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}var X=(0,t.createContext)(null);function Z(e){var n=(0,t.useContext)(q).matches,r=Y().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return se(e,JSON.parse(i),r)}),[e,i,r])}function ee(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==G&&j(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=ee(e.props.children)),n.push(r)}else n.push.apply(n,ee(e.props.children))})),n}function te(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||j(!1),a.relativePath=a.relativePath.slice(r.length));var o=le([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&j(!1),te(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:ie(o,e.index),routesMeta:u})})),t}var ne=/^:\w+$/,re=function(e){return"*"===e};function ie(e,t){var n=e.split("/"),r=n.length;return n.some(re)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!re(e)})).reduce((function(e,t){return e+(ne.test(t)?3:""===t?1:10)}),r)}function ae(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=ue({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:le([i,l.pathname]),pathnameBase:fe(le([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=le([i,l.pathnameBase]))}return a}function oe(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(q.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function ue(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=T(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function se(e,t,n){var r,i="string"===typeof e?U(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?U(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:he(a),hash:de(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function ce(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var le=function(e){return e.join("/").replace(/\/\/+/g,"/")},fe=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},he=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},de=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function ve(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ye=["onClick","reloadDocument","replace","state","target","to"];function me(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,O({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(D,(function(){if(a)h.call(a),a=null;else{var e=C.Pop,t=i(),n=t[0],r=t[1];if(h.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){g(-1*o)}},g(o))}}else m(e)}}));var o=C.Pop,u=i(),s=u[0],c=u[1],l=L(),h=L();function d(e){return"string"===typeof e?e:F(e)}function p(e,t){return void 0===t&&(t=null),O(f({pathname:c.pathname,hash:"",search:""},"string"===typeof e?U(e):e,{state:t,key:M()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},d(e)]}function y(e,t,n){return!h.length||(h.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function g(e){r.go(e)}null==s&&(s=0,r.replaceState(f({},r.state,{idx:s}),""));var k={get action(){return o},get location(){return c},createHref:d,push:function e(t,i){var a=C.Push,o=p(t,i);if(y(a,o,(function(){e(t,i)}))){var u=v(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=C.Replace,a=p(t,n);if(y(i,a,(function(){e(t,n)}))){var o=v(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),m(i)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return l.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&n.addEventListener(P,R),function(){t(),h.length||n.removeEventListener(P,R)}}};return k}({window:i}));var o=a.current,u=T((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(K,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}var ge=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=ve(e,ye),f=Q(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=J(),s=Y(),c=Z(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||F(s)===F(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",pe({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=n(808);function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t,n){return t&&Ee(e.prototype,t),n&&Ee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Se(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e,t){return Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ce(e,t)}function Ne(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function Oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function De(e,t){if(t&&("object"===Pe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Te(e)}function Re(e){var t=Oe();return function(){var n,r=Ae(e);if(t){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return De(this,n)}}function Le(e,t,n){return Le=Oe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Ce(i,n.prototype),i},Le.apply(null,arguments)}function Me(e){var t="function"===typeof Map?new Map:void 0;return Me=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Le(e,arguments,Ae(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ce(n,e)},Me(e)}var Fe=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fe(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},je=function(e){return function(e){var t=Fe(e);return Ue.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ve=function(e){try{return Ue.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Be(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Be(e[n],t[n]));return e}var qe=function(){function e(){var t=this;_e(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ie(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ze(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[je(JSON.stringify({alg:"none",type:"JWT"})),je(JSON.stringify(a)),""].join(".")}function We(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function Ke(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function He(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Qe(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function $e(){var e=We();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ye(){return"object"===typeof indexedDB}var Je=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Te(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Te(a),Xe.prototype.create),a}return Ie(n)}(Me(Error)),Xe=function(){function e(t,n,r){_e(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ie(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ze(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Je(n,a,t);return o}}]),e}();function Ze(e,t){return e.replace(et,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var et=/\{\$([^}]+)}/g;function tt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(rt(u)&&rt(s)){if(!nt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function rt(e){return null!==e&&"object"===typeof e}function it(e){for(var t=[],n=function(){var e=T(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function at(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=T(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ot(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ut(e,t){var n=new st(e,t);return n.subscribe.bind(n)}var st=function(){function e(t,n){var r=this;_e(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ie(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Se(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ct),void 0===r.error&&(r.error=ct),void 0===r.complete&&(r.complete=ct);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ct(){}function lt(e){return e&&e._delegate?e._delegate:e}function ft(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var ht=function(){function e(t){_e(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return Ie(e,[{key:"transaction",value:function(e,t){return new dt(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new pt(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),dt=function(){function e(t){var n=this;_e(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return Ie(e,[{key:"objectStore",value:function(e){return new pt(this._transaction.objectStore(e))}}]),e}(),pt=function(){function e(t){_e(this,e),this._store=t}return Ie(e,[{key:"index",value:function(e){return new vt(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new vt(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return ft(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return ft(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return ft(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return ft(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),vt=function(){function e(t){_e(this,e),this._index=t}return Ie(e,[{key:"get",value:function(e){return ft(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function yt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function mt(e){return function(e){if(Array.isArray(e))return E(e)}(e)||yt(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var gt=function(){function e(t,n,r){_e(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ie(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),kt="[DEFAULT]",bt=function(){function e(t,n){_e(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ie(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new qe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:kt})}catch(s){}var t,n=Se(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=T(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=x(N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(mt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),mt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Se(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=T(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(r_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===kt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(r_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt;return this.component?this.component.multipleInstances?e:kt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var wt,xt,_t=function(){function e(t){_e(this,e),this.name=t,this.providers=new Map}return Ie(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new bt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Et=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xt||(xt={}));var It,St,Tt={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},Ct=xt.INFO,Nt=(ke(wt={},xt.DEBUG,"log"),ke(wt,xt.VERBOSE,"log"),ke(wt,xt.INFO,"info"),ke(wt,xt.WARN,"warn"),ke(wt,xt.ERROR,"error"),wt),At=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Nt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Ot=function(){function e(t){_e(this,e),this.name=t,this._logLevel=Ct,this._logHandler=At,this._userLogHandler=null,Et.push(this)}return Ie(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in xt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Tt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xt.DEBUG].concat(t)),this._logHandler.apply(this,[this,xt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,xt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xt.INFO].concat(t)),this._logHandler.apply(this,[this,xt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xt.WARN].concat(t)),this._logHandler.apply(this,[this,xt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,xt.ERROR].concat(t)),this._logHandler.apply(this,[this,xt.ERROR].concat(t))}}]),e}();var Pt=function(){function e(t){_e(this,e),this.container=t}return Ie(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Dt="@firebase/app",Rt="0.7.20",Lt=new Ot("@firebase/app"),Mt="[DEFAULT]",Ft=(ke(It={},Dt,"fire-core"),ke(It,"@firebase/app-compat","fire-core-compat"),ke(It,"@firebase/analytics","fire-analytics"),ke(It,"@firebase/analytics-compat","fire-analytics-compat"),ke(It,"@firebase/app-check","fire-app-check"),ke(It,"@firebase/app-check-compat","fire-app-check-compat"),ke(It,"@firebase/auth","fire-auth"),ke(It,"@firebase/auth-compat","fire-auth-compat"),ke(It,"@firebase/database","fire-rtdb"),ke(It,"@firebase/database-compat","fire-rtdb-compat"),ke(It,"@firebase/functions","fire-fn"),ke(It,"@firebase/functions-compat","fire-fn-compat"),ke(It,"@firebase/installations","fire-iid"),ke(It,"@firebase/installations-compat","fire-iid-compat"),ke(It,"@firebase/messaging","fire-fcm"),ke(It,"@firebase/messaging-compat","fire-fcm-compat"),ke(It,"@firebase/performance","fire-perf"),ke(It,"@firebase/performance-compat","fire-perf-compat"),ke(It,"@firebase/remote-config","fire-rc"),ke(It,"@firebase/remote-config-compat","fire-rc-compat"),ke(It,"@firebase/storage","fire-gcs"),ke(It,"@firebase/storage-compat","fire-gcs-compat"),ke(It,"@firebase/firestore","fire-fst"),ke(It,"@firebase/firestore-compat","fire-fst-compat"),ke(It,"fire-js","fire-js"),ke(It,"firebase","fire-js-all"),It),Ut=new Map,jt=new Map;function Vt(e,t){try{e.container.addComponent(t)}catch(n){Lt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Bt(e,t){e.container.addOrOverwriteComponent(t)}function qt(e){var t=e.name;if(jt.has(t))return Lt.debug("There were multiple attempts to register component ".concat(t,".")),!1;jt.set(t,e);var n,r=Se(Ut.values());try{for(r.s();!(n=r.n()).done;){Vt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function zt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mt;zt(e,t).clearInstance(n)}function Gt(){jt.clear()}var Kt=(ke(St={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ke(St,"bad-app-name","Illegal App name: '{$appName}"),ke(St,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ke(St,"app-deleted","Firebase App named '{$appName}' already deleted"),ke(St,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ke(St,"invalid-log-argument","First argument to `onLog` must be null or a function."),ke(St,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),ke(St,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),ke(St,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),ke(St,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),St),Ht=new Xe("app","Firebase",Kt),Qt=function(){function e(t,n,r){var i=this;_e(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gt("app",(function(){return i}),"PUBLIC"))}return Ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}}]),e}(),$t="9.6.10";function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ht.create("bad-app-name",{appName:String(i)});var a=Ut.get(i);if(a){if(nt(e,a.options)&&nt(r,a.config))return a;throw Ht.create("duplicate-app",{appName:i})}var o,u=new _t(i),s=Se(jt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Qt(e,r,u);return Ut.set(i,l),l}function Jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=Ut.get(e);if(!t)throw Ht.create("no-app",{appName:e});return t}function Xt(){return Array.from(Ut.values())}function Zt(e){return en.apply(this,arguments)}function en(){return(en=x(N.mark((function e(t){var n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ut.has(n)){e.next=6;break}return Ut.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tn(e,t,n){var r,i=null!==(r=Ft[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Lt.warn(u.join(" "))}qt(new gt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function nn(e,t){if(null!==e&&"function"!==typeof e)throw Ht.create("invalid-log-argument");!function(e,t){var n,r=Se(Et);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Tt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:xt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function rn(e){var t;t=e,Et.forEach((function(e){e.setLogLevel(t)}))}var an="firebase-heartbeat-store",on=null;function un(){var e,t,n;return on||(on=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(an)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new ht(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new ht(a.result),e.oldVersion,e.newVersion,new dt(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw Ht.create("storage-open",{originalErrorMessage:e.message})}))),on}function sn(e){return cn.apply(this,arguments)}function cn(){return cn=x(N.mark((function e(t){var n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un();case 3:return n=e.sent,e.abrupt("return",n.transaction(an).objectStore(an).get(hn(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Ht.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),cn.apply(this,arguments)}function ln(e,t){return fn.apply(this,arguments)}function fn(){return fn=x(N.mark((function e(t,n){var r,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,un();case 3:return r=e.sent,i=r.transaction(an,"readwrite"),a=i.objectStore(an),e.next=8,a.put(n,hn(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Ht.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),fn.apply(this,arguments)}function hn(e){return"".concat(e.name,"!").concat(e.options.appId)}var dn=function(){function e(t){var n=this;_e(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new gn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ie(e,[{key:"triggerHeartbeat",value:function(){var e=x(N.mark((function e(){var t,n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=pn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=x(N.mark((function e(){var t,n,r,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=pn(),n=vn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=je(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function pn(){return(new Date).toISOString().substring(0,10)}function vn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Se(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),kn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),kn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var yn,mn,gn=function(){function e(t){_e(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ie(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=x(N.mark((function e(){return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ye()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=x(N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,sn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=x(N.mark((function e(t){var n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ln(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=x(N.mark((function e(t){var n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ln(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(mt(r.heartbeats),mt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function kn(e){return je(JSON.stringify({version:2,heartbeats:e})).length}yn="",qt(new gt("platform-logger",(function(e){return new Pt(e)}),"PRIVATE")),qt(new gt("heartbeat",(function(e){return new dn(e)}),"PRIVATE")),tn(Dt,Rt,yn),tn(Dt,Rt,"esm2017"),tn("fire-js","");var bn=function(){function e(t,n){var r=this;_e(this,e),this._delegate=t,this.firebase=n,Vt(t,new gt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ie(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Zt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Vt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Bt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),wn=(ke(mn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ke(mn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),mn),xn=new Xe("app-compat","Firebase",wn);var _n=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Yt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(tt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:tn,setLogLevel:rn,onLog:nn,apps:null,SDK_VERSION:$t,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(qt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw xn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Be(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!tt(n,e=e||Mt))throw xn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(bn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Be(n,e)},createSubscribe:ut,ErrorFactory:Xe,deepExtend:Be}),n}(),En=new Ot("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){En.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var In=self.firebase.SDK_VERSION;In&&In.indexOf("LITE")>=0&&En.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Sn=_n;!function(e){tn("@firebase/app-compat","0.1.21",e)}();function Tn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}function Cn(){return Cn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Tn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Cn.apply(this,arguments)}Sn.registerVersion("firebase","9.6.10","app-compat");function Nn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var An;Object.create;var On="facebook.com",Pn="github.com",Dn="google.com",Rn="password",Ln="twitter.com",Mn="EMAIL_SIGNIN",Fn="PASSWORD_RESET",Un="RECOVER_EMAIL",jn="REVERT_SECOND_FACTOR_ADDITION",Vn="VERIFY_AND_CHANGE_EMAIL",Bn="VERIFY_EMAIL";function qn(){return ke({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var zn=function(){var e;return ke(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ke(e,"argument-error",""),ke(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ke(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ke(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ke(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ke(e,"cordova-not-ready","Cordova framework is not ready."),ke(e,"cors-unsupported","This browser is not supported."),ke(e,"credential-already-in-use","This credential is already associated with a different user account."),ke(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ke(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ke(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ke(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ke(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ke(e,"email-already-in-use","The email address is already in use by another account."),ke(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ke(e,"expired-action-code","The action code has expired."),ke(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ke(e,"internal-error","An internal AuthError has occurred."),ke(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ke(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ke(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ke(e,"invalid-auth-event","An internal AuthError has occurred."),ke(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ke(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ke(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ke(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ke(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ke(e,"invalid-email","The email address is badly formatted."),ke(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ke(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ke(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ke(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ke(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ke(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ke(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ke(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ke(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ke(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ke(e,"wrong-password","The password is invalid or the user does not have a password."),ke(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ke(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ke(e,"invalid-provider-id","The specified provider ID is invalid."),ke(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ke(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ke(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ke(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ke(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ke(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ke(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ke(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ke(e,"missing-continue-uri","A continue URL must be provided in the request."),ke(e,"missing-iframe-start","An internal AuthError has occurred."),ke(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ke(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ke(e,"missing-multi-factor-info","No second factor identifier is provided."),ke(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ke(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ke(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ke(e,"app-deleted","This instance of FirebaseApp has been deleted."),ke(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ke(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ke(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ke(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ke(e,"no-auth-event","An internal AuthError has occurred."),ke(e,"no-such-provider","User was not linked to an account with the given provider."),ke(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ke(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ke(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ke(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ke(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ke(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ke(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ke(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ke(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ke(e,"rejected-credential","The request contains malformed or mismatching credentials."),ke(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ke(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ke(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ke(e,"timeout","The operation has timed out."),ke(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ke(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ke(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ke(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ke(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ke(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ke(e,"unverified-email","The operation requires a verified email."),ke(e,"user-cancelled","The user did not grant your application the permissions it requested."),ke(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ke(e,"user-disabled","The user account has been disabled by an administrator."),ke(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ke(e,"user-signed-out",""),ke(e,"weak-password","The password must be 6 characters long or more."),ke(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ke(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Wn=qn,Gn=new Xe("auth","Firebase",qn()),Kn=new Ot("@firebase/auth");function Hn(e){if(Kn.logLevel<=xt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Kn.error.apply(Kn,["Auth (".concat($t,"): ").concat(e)].concat(n))}}function Qn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Xn.apply(void 0,[e].concat(n))}function $n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xn.apply(void 0,[e].concat(n))}function Yn(e,t,n){var r=Object.assign(Object.assign({},Wn()),ke({},t,n));return new Xe("auth","Firebase",r).create(t,{appName:e.name})}function Jn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Qn(e,"argument-error"),Yn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=mt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(mt(o)))}return Gn.create.apply(Gn,[e].concat(n))}function Zn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Xn.apply(void 0,[t].concat(r))}}function er(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Hn(t),new Error(t)}function tr(e,t){e||er(t)}var nr=new Map;function rr(e){tr(e instanceof Function,"Expected a class definition");var t=nr.get(e);return t?(tr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nr.set(e,t),t)}function ir(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ar(){return"http:"===or()||"https:"===or()}function or(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ur=function(){function e(t,n){_e(this,e),this.shortDelay=t,this.longDelay=n,tr(n>t,"Short delay should be less than long delay!"),this.isMobile=Ge()||Qe()}return Ie(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ar()||He()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function sr(e,t){tr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var cr=function(){function e(){_e(this,e)}return Ie(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),lr=(ke(An={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ke(An,"MISSING_CUSTOM_TOKEN","internal-error"),ke(An,"INVALID_IDENTIFIER","invalid-email"),ke(An,"MISSING_CONTINUE_URI","internal-error"),ke(An,"INVALID_PASSWORD","wrong-password"),ke(An,"MISSING_PASSWORD","internal-error"),ke(An,"EMAIL_EXISTS","email-already-in-use"),ke(An,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ke(An,"INVALID_IDP_RESPONSE","invalid-credential"),ke(An,"INVALID_PENDING_TOKEN","invalid-credential"),ke(An,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ke(An,"MISSING_REQ_TYPE","internal-error"),ke(An,"EMAIL_NOT_FOUND","user-not-found"),ke(An,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ke(An,"EXPIRED_OOB_CODE","expired-action-code"),ke(An,"INVALID_OOB_CODE","invalid-action-code"),ke(An,"MISSING_OOB_CODE","internal-error"),ke(An,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ke(An,"INVALID_ID_TOKEN","invalid-user-token"),ke(An,"TOKEN_EXPIRED","user-token-expired"),ke(An,"USER_NOT_FOUND","user-token-expired"),ke(An,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ke(An,"INVALID_CODE","invalid-verification-code"),ke(An,"INVALID_SESSION_INFO","invalid-verification-id"),ke(An,"INVALID_TEMPORARY_PROOF","invalid-credential"),ke(An,"MISSING_SESSION_INFO","missing-verification-id"),ke(An,"SESSION_EXPIRED","code-expired"),ke(An,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ke(An,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ke(An,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ke(An,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ke(An,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ke(An,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ke(An,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ke(An,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ke(An,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ke(An,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ke(An,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),An),fr=new ur(3e4,6e4);function hr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function dr(e,t,n,r){return pr.apply(this,arguments)}function pr(){return pr=x(A().mark((function e(t,n,r,i){var a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",vr(t,a,x(A().mark((function e(){var a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=it(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",cr.fetch()(kr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t,n){return yr.apply(this,arguments)}function yr(){return(yr=x(A().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},lr),n),e.prev=2,a=new br(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw wr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=T(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw wr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw wr(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw Yn(t,d,h);case 30:Qn(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Je)){e.next=37;break}throw e.t0;case 37:Qn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function mr(e,t,n,r){return gr.apply(this,arguments)}function gr(){return gr=x(A().mark((function e(t,n,r,i){var a,o,u=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,dr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Qn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),gr.apply(this,arguments)}function kr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?sr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var br=function(){function e(t){var n=this;_e(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t($n(n.auth,"network-request-failed"))}),fr.get())}))}return Ie(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function wr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=$n(e,t,r);return i.customData._tokenResponse=n,i}function xr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(e,t){return Ir.apply(this,arguments)}function Ir(){return(Ir=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e,t){return Tr.apply(this,arguments)}function Tr(){return(Tr=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Nr(){return Nr=x(A().mark((function e(t){var n,r,i,a,o,u,s=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=lt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Zn((a=Or(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Cr(Ar(a.auth_time)),issuedAtTime:Cr(Ar(a.iat)),expirationTime:Cr(Ar(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}function Ar(e){return 1e3*Number(e)}function Or(e){var t=T(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Hn("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ve(r);return a?JSON.parse(a):(Hn("Failed to decode base64 JWT payload"),null)}catch(o){return Hn("Caught error parsing JWT payload as JSON",o),null}}function Pr(e,t){return Dr.apply(this,arguments)}function Dr(){return Dr=x(A().mark((function e(t,n){var r=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Je&&Rr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Dr.apply(this,arguments)}function Rr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Lr=function(){function e(t){_e(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ie(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Mr=function(){function e(t,n){_e(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ie(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Fr(e){return Ur.apply(this,arguments)}function Ur(){return Ur=x(A().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Pr(t,Sr(r,{idToken:i}));case 6:Zn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Br(o.providerUserInfo):[],s=Vr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Mr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ur.apply(this,arguments)}function jr(){return(jr=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lt(t),e.next=3,Fr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(mt(n),mt(t))}function Br(e){return e.map((function(e){var t=e.providerId,n=Nn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function qr(e,t){return zr.apply(this,arguments)}function zr(){return(zr=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t,{},x(A().mark((function e(){var r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=it({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=kr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",cr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wr=function(){function e(){_e(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ie(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Zn(e.idToken,"internal-error"),Zn("undefined"!==typeof e.idToken,"internal-error"),Zn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Or(e);return Zn(t,"internal-error"),Zn("undefined"!==typeof t.exp,"internal-error"),Zn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=x(A().mark((function e(t){var n,r=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Zn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return er("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Zn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Zn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Zn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Gr(e,t){Zn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Kr=function(){function e(t){_e(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Nn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?mt(a.providerData):[],this.metadata=new Mr(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ie(e,[{key:"getIdToken",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Zn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Nr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return jr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Zn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Zn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=x(A().mark((function e(t){var n,r,i=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Fr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Pr(this,xr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Zn(k&&_,t,"internal-error");var E=Wr.fromJSON(this.name,_);Zn("string"===typeof k,t,"internal-error"),Gr(f,t.name),Gr(h,t.name),Zn("boolean"===typeof b,t,"internal-error"),Zn("boolean"===typeof w,t,"internal-error"),Gr(d,t.name),Gr(p,t.name),Gr(v,t.name),Gr(y,t.name),Gr(m,t.name),Gr(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=x(A().mark((function t(n,r){var i,a,o,u=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Wr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Fr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Hr=function(){function e(){_e(this,e),this.type="NONE",this.storage={}}return Ie(e,[{key:"_isAvailable",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Hr.type="NONE";var Qr=Hr;function $r(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Yr=function(){function e(t,n,r){_e(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=$r(this.userKey,a.apiKey,o),this.fullPersistenceKey=$r("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ie(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Kr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=x(A().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(rr(Qr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||rr(Qr),u=$r(i,n.config.apiKey,n.name),s=null,c=Se(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Kr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Jr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ti(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ri(t))return"Blackberry";if(ii(t))return"Webos";if(Zr(t))return"Safari";if((t.includes("chrome/")||ei(t))&&!t.includes("edge/"))return"Chrome";if(ni(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/firefox\//i.test(e)}function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/crios\//i.test(e)}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iemobile/i.test(e)}function ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/android/i.test(e)}function ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/blackberry/i.test(e)}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/webos/i.test(e)}function ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iphone|ipad|ipod/i.test(e)}function oi(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return ai(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ui(){return $e()&&10===document.documentMode}function si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return ai(e)||ni(e)||ii(e)||ri(e)||/windows phone/i.test(e)||ti(e)}function ci(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Jr(We());break;case"Worker":t="".concat(Jr(We()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat($t,"/").concat(r)}var li=function(){function e(t,n,r){_e(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hi(this),this.idTokenSubscription=new hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Ie(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=rr(t)),this._initializationPromise=this.queue(x(A().mark((function r(){var i,a;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Yr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=x(A().mark((function e(t){var n,r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Zn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?lt(t):null)&&Zn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Zn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(rr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Xe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Zn(n=t&&rr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Yr.create(this,[rr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Zn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Zn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ci(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=x(A().mark((function e(){var t,n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ke({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function fi(e){return lt(e)}var hi=function(){function e(t){var n=this;_e(this,e),this.auth=t,this.observer=null,this.addObserver=ut((function(e){return n.observer=e}))}return Ie(e,[{key:"next",get:function(){return Zn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function di(e,t,n){var r=fi(e);Zn(r._canInitEmulator,r,"emulator-config-failed"),Zn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=pi(t),o=function(e){var t=pi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:vi(r.substr(a.length+1))}}var o=T(r.split(":"),2);return{host:o[0],port:vi(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function pi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function vi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var yi=function(){function e(t,n){_e(this,e),this.providerId=t,this.signInMethod=n}return Ie(e,[{key:"toJSON",value:function(){return er("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return er("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return er("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return er("not implemented")}}]),e}();function mi(e,t){return gi.apply(this,arguments)}function gi(){return(gi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:resetPassword",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ki(e,t){return bi.apply(this,arguments)}function bi(){return(bi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){return xi.apply(this,arguments)}function xi(){return(xi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _i(e,t){return Ei.apply(this,arguments)}function Ei(){return(Ei=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithPassword",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e,t){return Si.apply(this,arguments)}function Si(){return(Si=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:sendOobCode",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ti(e,t){return Ci.apply(this,arguments)}function Ci(){return(Ci=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ii(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(e,t){return Ai.apply(this,arguments)}function Ai(){return(Ai=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ii(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oi(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ii(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Di(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ii(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Li(e,t){return Mi.apply(this,arguments)}function Mi(){return(Mi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fi(e,t){return Ui.apply(this,arguments)}function Ui(){return(Ui=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithEmailLink",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ji=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _e(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ie(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_i(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Li(t,{email:this._email,oobCode:this._password}));case 5:Qn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ki(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Fi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Qn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(yi);function Vi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithIdp",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qi=function(e){Ne(n,e);var t=Re(n);function n(){var e;return _e(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ie(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Vi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=it(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Nn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(yi);function zi(e,t){return Wi.apply(this,arguments)}function Wi(){return(Wi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:sendVerificationCode",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(){return(Gi=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithPhoneNumber",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(){return(Ki=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mr(t,"POST","/v1/accounts:signInWithPhoneNumber",hr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw wr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hi=ke({},"USER_NOT_FOUND","user-not-found");function Qi(){return(Qi=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithPhoneNumber",hr(t,r),Hi));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $i=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ie(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Gi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ki.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Qi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(yi);var Yi=function(){function e(t){var n,r,i,a,o,u;_e(this,e);var s=at(ot(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Zn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ie(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=at(ot(e)).link,n=t?at(ot(t)).deep_link_id:null,r=at(ot(e)).deep_link_id;return(r?at(ot(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r_){return null}}}]),e}();var Ji=function(){function e(){_e(this,e),this.providerId=e.PROVIDER_ID}return Ie(e,null,[{key:"credential",value:function(e,t){return ji._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Yi.parseLink(t);return Zn(n,"argument-error"),ji._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ji.PROVIDER_ID="password",Ji.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ji.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Xi=function(){function e(t){_e(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ie(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Zi=function(e){Ne(n,e);var t=Re(n);function n(){var e;return _e(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ie(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return mt(this.scopes)}}]),n}(Xi),ea=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Zn(e.idToken||e.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Zn("providerId"in t&&"signInMethod"in t,"argument-error"),qi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Zi),ta=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.call(this,"facebook.com")}return Ie(n,null,[{key:"credential",value:function(e){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r_){return null}}}]),n}(Zi);ta.FACEBOOK_SIGN_IN_METHOD="facebook.com",ta.PROVIDER_ID="facebook.com";var na=function(e){Ne(n,e);var t=Re(n);function n(){var e;return _e(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ie(n,null,[{key:"credential",value:function(e,t){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(r_){return null}}}]),n}(Zi);na.GOOGLE_SIGN_IN_METHOD="google.com",na.PROVIDER_ID="google.com";var ra=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.call(this,"github.com")}return Ie(n,null,[{key:"credential",value:function(e){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r_){return null}}}]),n}(Zi);ra.GITHUB_SIGN_IN_METHOD="github.com",ra.PROVIDER_ID="github.com";var ia=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ie(n,[{key:"_getIdTokenResponse",value:function(e){return Vi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Vi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Vi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(yi),aa=function(e){Ne(n,e);var t=Re(n);function n(e){return _e(this,n),Zn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ie(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ia.fromJSON(e);return Zn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ia._create(r,n)}catch(i){return null}}}]),n}(Xi),oa=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.call(this,"twitter.com")}return Ie(n,null,[{key:"credential",value:function(e,t){return qi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(r_){return null}}}]),n}(Zi);function ua(e,t){return sa.apply(this,arguments)}function sa(){return(sa=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signUp",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}oa.TWITTER_SIGN_IN_METHOD="twitter.com",oa.PROVIDER_ID="twitter.com";var ca=function(){function e(t){_e(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ie(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=x(A().mark((function t(n,r,i){var a,o,u,s,c=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Kr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=la(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=x(A().mark((function t(n,r,i){var a;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=la(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function la(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function fa(){return fa=x(A().mark((function e(t){var n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ca({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ua(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ca._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}var ha=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a){var o,u;return _e(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Te(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ie(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Je);function da(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ha._fromErrorAndOperation(e,n,t,r);throw n}))}function pa(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function va(e,t){return ya.apply(this,arguments)}function ya(){return ya=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,ka(!0,r,n);case 3:return e.t0=Er,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=pa(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ma(e,t){return ga.apply(this,arguments)}function ga(){return ga=x(A().mark((function e(t,n){var r,i,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Pr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ca._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t,n){return ba.apply(this,arguments)}function ba(){return(ba=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(n);case 2:i=pa(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Zn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wa(e,t){return xa.apply(this,arguments)}function xa(){return xa=x(A().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Pr(t,da(i,a,n,t),r);case 6:return Zn((o=e.sent).idToken,i,"internal-error"),Zn(u=Or(o.idToken),i,"internal-error"),s=u.sub,Zn(t.uid===s,i,"user-mismatch"),e.abrupt("return",ca._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Qn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),xa.apply(this,arguments)}function _a(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=x(A().mark((function e(t,n){var r,i,a,o,u=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,da(t,i,n);case 4:return a=e.sent,e.next=7,ca._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ia(e,t){return Sa.apply(this,arguments)}function Sa(){return(Sa=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_a(fi(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,ka(!1,r,n.providerId);case 3:return e.abrupt("return",ma(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t){return Aa.apply(this,arguments)}function Aa(){return(Aa=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wa(lt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,"POST","/v1/accounts:signInWithCustomToken",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Da(){return(Da=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fi(t),e.next=3,Oa(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ca._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ra=function(){function e(t,n){_e(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ie(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?La._fromServerResponse(e,t):Qn(e,"internal-error")}}]),e}(),La=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ie(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ra);function Ma(e,t,n){var r;Zn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Zn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Zn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Zn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Fa(){return(Fa=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ma(i,a,r),e.next=5,Ni(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ua(){return(Ua=x(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi(lt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ja(){return(ja=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wi(lt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e,t){return Ba.apply(this,arguments)}function Ba(){return(Ba=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,mi(r,{oobCode:n});case 3:i=e.sent,Zn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Zn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Zn(i.mfaInfo,r,"internal-error");case 13:Zn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ra._fromServerResponse(fi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qa(){return(qa=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Va(lt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(e,t,n){return Wa.apply(this,arguments)}function Wa(){return(Wa=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),e.next=3,ua(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ca._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ga(){return(Ga=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),a={requestType:"EMAIL_SIGNIN",email:n},Zn(r.handleCodeInApp,i,"argument-error"),r&&Ma(i,a,r),e.next=6,Oi(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ka(){return(Ka=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),Zn((a=Ji.credentialWithLink(n,r||ir()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ia(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ha(e,t){return Qa.apply(this,arguments)}function Qa(){return(Qa=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:createAuthUri",hr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(){return($a=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ar()?ir():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ha(lt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(){return(Ya=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ma(r.auth,a,n),e.next=8,Ti(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ja(){return(Ja=x(A().mark((function e(t,n,r){var i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ma(i.auth,o,r),e.next=8,Di(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e,t){return Za.apply(this,arguments)}function Za(){return(Za=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eo(){return(eo=x(A().mark((function e(t,n){var r,i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=lt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Pr(a,Xa(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(e,t,n){return no.apply(this,arguments)}function no(){return(no=x(A().mark((function e(t,n,r){var i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Pr(t,ki(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ro=Ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_e(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),io=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a){var o;return _e(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ie(n)}(ro),ao=function(e){Ne(n,e);var t=Re(n);function n(e,r){return _e(this,n),t.call(this,e,"facebook.com",r)}return Ie(n)}(ro),oo=function(e){Ne(n,e);var t=Re(n);function n(e,r){return _e(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ie(n)}(io),uo=function(e){Ne(n,e);var t=Re(n);function n(e,r){return _e(this,n),t.call(this,e,"google.com",r)}return Ie(n)}(ro),so=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){return _e(this,n),t.call(this,e,"twitter.com",r,i)}return Ie(n)}(io);function co(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Or(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ro(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ao(a,i);case"github.com":return new oo(a,i);case"google.com":return new uo(a,i);case"twitter.com":return new so(a,i,e.screenName||null);case"custom":case"anonymous":return new ro(a,null);default:return new ro(a,r,i)}}(n)}var lo=function(){function e(t,n){_e(this,e),this.type=t,this.credential=n}return Ie(e,[{key:"toJSON",value:function(){return{multiFactorSession:ke({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),fo=function(){function e(t,n,r){_e(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ie(e,[{key:"resolveSignIn",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=fi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ra._fromServerResponse(r,e)}));Zn(i.mfaPendingCredential,r,"internal-error");var o=lo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=x(A().mark((function e(t){var a,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ca._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Zn(n.user,r,"internal-error"),e.abrupt("return",ca._forOperation(n.user,n.operationType,u));case 17:Qn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ho(e,t){return dr(e,"POST","/v2/accounts/mfaEnrollment:start",hr(e,t))}var po=function(){function e(t){var n=this;_e(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ra._fromServerResponse(t.auth,e)})))}))}return Ie(e,[{key:"getSession",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=lo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Pr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Pr(this.user,dr(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",hr(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),vo=new WeakMap;var yo="__sak",mo=function(){function e(t,n){_e(this,e),this.storageRetriever=t,this.type=n}return Ie(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(r_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var go=function(e){Ne(n,e);var t=Re(n);function n(){var e;return _e(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=We();return Zr(e)||ai(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=si(),e._shouldAllowMigration=!0,e}return Ie(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ui()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=x(A().mark((function e(t,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(Ae(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=x(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(Ae(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(Ae(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(mo);go.type="LOCAL";var ko=go,bo=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ie(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(mo);bo.type="SESSION";var wo=bo;function xo(e){return Promise.all(e.map(function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var _o=function(){function e(t){_e(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ie(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=x(A().mark((function e(t){var n,r,i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,xo(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Eo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_o.receivers=[];var Io=function(){function e(t){_e(this,e),this.target=t,this.handlers=new Set}return Ie(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=x(A().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Eo("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function So(){return window}function To(){return"undefined"!==typeof So().WorkerGlobalScope&&"function"===typeof So().importScripts}function Co(){return No.apply(this,arguments)}function No(){return(No=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ao(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Oo="firebaseLocalStorageDb",Po="firebaseLocalStorage",Do="fbase_key",Ro=function(){function e(t){_e(this,e),this.request=t}return Ie(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Lo(e,t){return e.transaction([Po],t?"readwrite":"readonly").objectStore(Po)}function Mo(){var e=indexedDB.deleteDatabase(Oo);return new Ro(e).toPromise()}function Fo(){var e=indexedDB.open(Oo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Po,{keyPath:Do})}catch(r){n(r)}})),e.addEventListener("success",x(A().mark((function n(){var r;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Po)){n.next=12;break}return r.close(),n.next=5,Mo();case 5:return n.t0=t,n.next=8,Fo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Uo(e,t,n){return jo.apply(this,arguments)}function jo(){return jo=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Lo(t,!0).put((ke(i={},Do,n),ke(i,"value",r),i)),e.abrupt("return",new Ro(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Vo(e,t){return Bo.apply(this,arguments)}function Bo(){return Bo=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lo(t,!1).get(n),e.next=3,new Ro(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}function qo(e,t){var n=Lo(e,!0).delete(t);return new Ro(n).toPromise()}var zo=function(){function e(){_e(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ie(e,[{key:"_openDb",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Fo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",To()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=x(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=_o._getInstance(To()?self:null),this.receiver._subscribe("keyChanged",function(){var e=x(A().mark((function e(n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=x(A().mark((function e(){var t,n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Co();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Io(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ao()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Fo();case 5:return t=e.sent,e.next=8,Uo(t,yo,"1");case 8:return e.next=10,qo(t,yo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=x(A().mark((function e(t,n){var r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Uo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Vo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return qo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Lo(e,!1).getAll();return new Ro(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Se(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();zo.type="LOCAL";var Wo=zo;function Go(e,t){return dr(e,"POST","/v2/accounts/mfaSignIn:start",hr(e,t))}function Ko(e){return Ho.apply(this,arguments)}function Ho(){return(Ho=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=$n("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function $o(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Yo=1e12,Jo=function(){function e(t){_e(this,e),this.auth=t,this.counter=Yo,this._widgets=new Map}return Ie(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Xo(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Yo;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Yo;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Yo,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xo=function(){function e(t,n,r){var i=this;_e(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Zn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ie(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Zo=$o("rcb"),eu=new ur(3e4,6e4),tu="https://www.google.com/recaptcha/api.js?",nu=function(){function e(){_e(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!So().grecaptcha}return Ie(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Zn(ru(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(So().grecaptcha):new Promise((function(r,i){var a=So().setTimeout((function(){i($n(e,"network-request-failed"))}),eu.get());So()[Zo]=function(){So().clearTimeout(a),delete So()[Zo];var o=So().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i($n(e,"internal-error"))},Qo("".concat(tu,"?").concat(it({onload:Zo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i($n(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!So().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function ru(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var iu=function(){function e(){_e(this,e)}return Ie(e,[{key:"load",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Jo(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),au="recaptcha",ou={theme:"light",type:"image"},uu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ou),r=arguments.length>2?arguments[2]:void 0;_e(this,e),this.parameters=n,this.type=au,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fi(r),this.isInvisible="invisible"===this.parameters.size,Zn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Zn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new iu:new nu,this.validateStartingState()}return Ie(e,[{key:"verify",value:function(){var e=x(A().mark((function e(){var t,n,r,i=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Zn(!this.parameters.sitekey,this.auth,"argument-error"),Zn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Zn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=So()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Zn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=x(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zn(ar()&&!To(),this.auth,"internal-error"),e.next=3,su();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ko(this.auth);case 8:Zn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Zn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function su(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var cu=function(){function e(t,n){_e(this,e),this.verificationId=t,this.onConfirmation=n}return Ie(e,[{key:"confirm",value:function(e){var t=$i._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function lu(){return(lu=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),e.next=3,pu(i,n,lt(r));case 3:return a=e.sent,e.abrupt("return",new cu(a,(function(e){return Ia(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fu(e,t,n){return hu.apply(this,arguments)}function hu(){return(hu=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),e.next=3,ka(!1,i,"phone");case 3:return e.next=5,pu(i.auth,n,lt(r));case 5:return a=e.sent,e.abrupt("return",new cu(a,(function(e){return Ta(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function du(){return(du=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lt(t),e.next=3,pu(i.auth,n,lt(r));case 3:return a=e.sent,e.abrupt("return",new cu(a,(function(e){return Na(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pu(e,t,n){return vu.apply(this,arguments)}function vu(){return vu=x(A().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Zn("string"===typeof a,t,"argument-error"),Zn(r.type===au,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Zn("enroll"===u.type,t,"internal-error"),e.next=13,ho(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Zn("signin"===u.type,t,"internal-error"),Zn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Go(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,zi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),vu.apply(this,arguments)}function yu(){return(yu=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(lt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mu=function(){function e(t){_e(this,e),this.providerId=e.PROVIDER_ID,this.auth=fi(t)}return Ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return pu(this.auth,e,lt(t))}}],[{key:"credential",value:function(e,t){return $i._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?$i._fromTokenResponse(n,r):null}}]),e}();function gu(e,t){return t?rr(t):(Zn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}mu.PROVIDER_ID="phone",mu.PHONE_SIGN_IN_METHOD="phone";var ku=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ie(n,[{key:"_getIdTokenResponse",value:function(e){return Vi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Vi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Vi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(yi);function bu(e){return _a(e.auth,new ku(e),e.bypassAuthState)}function wu(e){var t=e.auth,n=e.user;return Zn(n,t,"internal-error"),wa(n,new ku(e),e.bypassAuthState)}function xu(e){return _u.apply(this,arguments)}function _u(){return(_u=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Zn(r=t.user,n,"internal-error"),e.abrupt("return",ma(r,new ku(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_e(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ie(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=x(A().mark((function t(n,r){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=x(A().mark((function e(t){var n,r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bu;case"linkViaPopup":case"linkViaRedirect":return xu;case"reauthViaPopup":case"reauthViaRedirect":return wu;default:Qn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Iu=new ur(2e3,1e4);function Su(e,t,n){return Tu.apply(this,arguments)}function Tu(){return(Tu=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),Jn(t,n,Xi),a=gu(i,r),o=new Ou(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cu(){return(Cu=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=lt(t)).auth,n,Xi),a=gu(i.auth,r),o=new Ou(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nu(e,t,n){return Au.apply(this,arguments)}function Au(){return(Au=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=lt(t)).auth,n,Xi),a=gu(i.auth,r),o=new Ou(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ou=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a,o){var u;return _e(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Te(u),u}return Ie(n,[{key:"executeNotNull",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Zn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=x(A().mark((function e(){var t,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr(1===this.filter.length,"Popup operations only handle one event"),t=Eo(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject($n(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject($n(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject($n(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Iu.get())}()}}]),n}(Eu);Ou.currentPopupAction=null;var Pu=new Map,Du=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _e(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ie(n,[{key:"execute",value:function(){var e=x(A().mark((function e(){var t,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Pu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ru(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Cn(Ae(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Pu.set(this.auth._key(),t);case 21:return this.bypassAuthState||Pu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=x(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Cn(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Cn(Ae(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Eu);function Ru(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(n),i=Uu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t){return Fu.apply(this,arguments)}function Fu(){return(Fu=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Uu(t)._set(ju(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uu(e){return rr(e._redirectPersistence)}function ju(e){return $r("pendingRedirect",e.config.apiKey,e.name)}function Vu(e,t,n){return function(e,t,n){return Bu.apply(this,arguments)}(e,t,n)}function Bu(){return(Bu=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fi(t),Jn(t,n,Xi),a=gu(i,r),e.next=5,Mu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e,t,n){return function(e,t,n){return zu.apply(this,arguments)}(e,t,n)}function zu(){return(zu=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=lt(t)).auth,n,Xi),a=gu(i.auth,r),e.next=5,Mu(a,i.auth);case 5:return e.next=7,Yu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t,n){return function(e,t,n){return Gu.apply(this,arguments)}(e,t,n)}function Gu(){return(Gu=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jn((i=lt(t)).auth,n,Xi),a=gu(i.auth,r),e.next=5,ka(!1,i,n.providerId);case 5:return e.next=7,Mu(a,i.auth);case 7:return e.next=9,Yu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e,t){return Hu.apply(this,arguments)}function Hu(){return(Hu=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fi(t)._initializationPromise;case 2:return e.abrupt("return",Qu(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e,t){return $u.apply(this,arguments)}function $u(){return $u=x(A().mark((function e(t,n){var r,i,a,o,u,s=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=fi(t),a=gu(i,n),o=new Du(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),$u.apply(this,arguments)}function Yu(e){return Ju.apply(this,arguments)}function Ju(){return(Ju=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Eo("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xu=function(){function e(t){_e(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ie(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return es(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!es(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError($n(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Zu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Zu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function es(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function ts(e){return ns.apply(this,arguments)}function ns(){return ns=x(A().mark((function e(t){var n,r=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",dr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}var rs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,is=/^https?/;function as(){return(as=x(A().mark((function e(t){var n,r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ts(t);case 4:n=e.sent,r=n.authorizedDomains,i=Se(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!os(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Qn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function os(e){var t=ir(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!is.test(r))return!1;if(rs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var us=new ur(3e4,6e4);function ss(){var e=So().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=mt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var cs=null;function ls(e){return cs=cs||function(e){return new Promise((function(t,n){var r,i,a;function o(){ss(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ss(),n($n(e,"network-request-failed"))},timeout:us.get()})}if(null===(i=null===(r=So().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=So().gapi)||void 0===a?void 0:a.load)){var u=$o("iframefcb");return So()[u]=function(){gapi.load?o():n($n(e,"network-request-failed"))},Qo("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw cs=null,e}))}(e),cs}var fs=new ur(5e3,15e3),hs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ds=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ps(e){var t=e.config;Zn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?sr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:$t},i=ds.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(it(r).slice(1))}function vs(e){return ys.apply(this,arguments)}function ys(){return ys=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(t);case 2:return n=e.sent,Zn(r=So().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ps(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hs,dontclear:!0},(function(e){return new Promise(function(){var n=x(A().mark((function n(r,i){var a,o,u;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){So().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=$n(t,"network-request-failed"),o=So().setTimeout((function(){i(a)}),fs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}var ms={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gs="_blank",ks="http://localhost",bs=function(){function e(t){_e(this,e),this.window=t,this.associatedEvent=null}return Ie(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ws(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ms),{width:r.toString(),height:i.toString(),top:a,left:o}),c=We().toLowerCase();n&&(u=ei(c)?gs:n),Xr(c)&&(t=t||ks,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=T(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(oi(c)&&"_self"!==u)return xs(t||"",u),new bs(null);var f=window.open(t||"",u,l);Zn(f,e,"popup-blocked");try{f.focus()}catch(h){}return new bs(f)}function xs(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _s="__/auth/handler",Es="emulator/auth/handler";function Is(e,t,n,r,i,a){Zn(e.config.authDomain,e,"auth-domain-config-required"),Zn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:$t,eventId:i};if(t instanceof Xi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=T(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Zi){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(_s);return sr(t,Es)}(e),"?").concat(it(d).slice(1))}var Ss="webStorageSupport",Ts=function(){function e(){_e(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wo,this._completeRedirectFn=Qu}return Ie(e,[{key:"_openPopup",value:function(){var e=x(A().mark((function e(t,n,r,i){var a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Is(t,n,r,ir(),i),e.abrupt("return",ws(t,o,Eo()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=x(A().mark((function e(t,n,r,i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Is(t,n,r,ir(),i),So().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(tr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vs(t);case 2:return n=e.sent,r=new Xu(t),n.register("authEvent",(function(e){return Zn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Ss,{type:Ss},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Qn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return as.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return si()||Zr()||ai()}}]),e}(),Cs=Ts,Ns=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this,"phone")).credential=e,r}return Ie(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return dr(e,"POST","/v2/accounts/mfaEnrollment:finalize",hr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return dr(e,"POST","/v2/accounts/mfaSignIn:finalize",hr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){_e(this,e),this.factorId=t}return Ie(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return er("unexpected MultiFactorSessionType")}}}]),e}()),As=function(){function e(){_e(this,e)}return Ie(e,null,[{key:"assertion",value:function(e){return Ns._fromCredential(e)}}]),e}();As.FACTOR_ID="phone";var Os,Ps="@firebase/auth",Ds="0.19.11",Rs=function(){function e(t){_e(this,e),this.auth=t,this.internalListeners=new Map}return Ie(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Zn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ls(){return window}Os="Browser",qt(new gt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Zn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Zn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Os,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ci(Os)},i=new li(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),qt(new gt("auth-internal",(function(e){return function(e){return new Rs(e)}(fi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),tn(Ps,Ds,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Os)),tn(Ps,Ds,"esm2017");function Ms(e,t,n){return Fs.apply(this,arguments)}function Fs(){return Fs=x(A().mark((function e(t,n,r){var i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ls(),o=a.BuildInfo,tr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,zs(n.sessionId);case 4:return u=e.sent,s={},ai()?s.ibi=o.packageName:ni()?s.apn=o.packageName:Qn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Is(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}function Us(){return(Us=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ls(),r=n.BuildInfo,i={},ai()?i.iosBundleId=r.packageName:ni()?i.androidPackageName=r.packageName:Qn(t,"operation-not-supported-in-this-environment"),e.next=5,ts(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function js(e){var t=Ls().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Vs(e,t,n){return Bs.apply(this,arguments)}function Bs(){return Bs=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ls(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i($n(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ni()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Bs.apply(this,arguments)}function qs(e){var t,n,r,i,a,o,u,s,c,l,f=Ls();Zn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Zn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Zn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Zn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function zs(e){return Ws.apply(this,arguments)}function Ws(){return(Ws=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gs(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gs(e){if(tr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Ks=function(e){Ne(n,e);var t=Re(n);function n(){var e;return _e(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ie(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Cn(Ae(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Xu);function Hs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Xs(),postBody:null,tenantId:e.tenantId,error:$n(e,"no-auth-event")}}function Qs(e,t){return Zs()._set(ec(e),t)}function $s(e){return Ys.apply(this,arguments)}function Ys(){return(Ys=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zs()._get(ec(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Zs()._remove(ec(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Js(e,t){var n,r,i=function(e){var t=tc(e),n=t.link?decodeURIComponent(t.link):void 0,r=tc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return tc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=tc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?$n(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Xs(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Zs(){return rr(ko)}function ec(e){return $r("authEvent",e.config.apiKey,e.name)}function tc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=_(t=n)||yt(t)||I(t)||S();r[0];return at(r.slice(1).join("?"))}var nc=function(){function e(){_e(this,e),this._redirectPersistence=wo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qu}return Ie(e,[{key:"_initialize",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Ks(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Qn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=x(A().mark((function e(t,n,r,i){var a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qs(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Pu.clear(),e.next=10,this._originValidation(t);case 10:return o=Hs(t,r,i),e.next=13,Qs(t,o);case 13:return e.next=15,Ms(t,o,n);case 15:return u=e.sent,e.next=18,js(u);case 18:return s=e.sent,e.abrupt("return",Vs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Us.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ls(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$s(e);case 2:t.onEvent(ic());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=x(A().mark((function n(r){var i,a;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,$s(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Js(i,r.url)),t.onEvent(a||ic());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Ls().handleOpenURL=function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),rc=nc;function ic(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$n("no-auth-event")}}function ac(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return!("file:"!==ac()&&"ionic:"!==ac()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function uc(){return $e()&&11===(null===document||void 0===document?void 0:document.documentMode)}function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/Edge\/\d+/.test(e)}function cc(){try{var e=self.localStorage,t=Eo();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return uc()||sc(e)}()||Ye()}catch(n){return lc()&&Ye()}return!1}function lc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function fc(){return("http:"===ac()||"https:"===ac()||He()||oc())&&!(Qe()||Ke())&&cc()&&!lc()}function hc(){return oc()&&"undefined"!==typeof document}function dc(){return pc.apply(this,arguments)}function pc(){return(pc=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vc={LOCAL:"local",NONE:"none",SESSION:"session"},yc=Zn,mc="persistence";function gc(e,t){yc(Object.values(vc).includes(t),e,"invalid-persistence-type"),Qe()?yc(t!==vc.SESSION,e,"unsupported-persistence-type"):Ke()?yc(t===vc.NONE,e,"unsupported-persistence-type"):lc()?yc(t===vc.NONE||t===vc.LOCAL&&Ye(),e,"unsupported-persistence-type"):yc(t===vc.NONE||cc(),e,"unsupported-persistence-type")}function kc(e){return bc.apply(this,arguments)}function bc(){return(bc=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=wc(),r=$r(mc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var xc=Zn,_c=function(){function e(){_e(this,e),this.browserResolver=rr(Cs),this.cordovaResolver=rr(rc),this.underlyingResolver=null,this._redirectPersistence=wo,this._completeRedirectFn=Qu}return Ie(e,[{key:"_initialize",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=x(A().mark((function e(t,n,r,i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=x(A().mark((function e(t,n,r,i){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return hc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return xc(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ec(e){return e.unwrap()}function Ic(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Ac(e,function(e,t){var n,r=lt(e),i=t;return Zn(t.customData.operationType,r,"argument-error"),Zn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),fo._fromError(r,i)}(e,t));else if(r){var i=Sc(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Sc(e){var t=(e instanceof Je?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Je)&&"temporaryProof"in t&&"phoneNumber"in t)return mu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Rn)return null;switch(r){case Dn:n=na;break;case On:n=ta;break;case Pn:n=ra;break;case Ln:n=oa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ia._create(r,u):qi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ea(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Je?n.credentialFromError(e):n.credentialFromResult(e)}function Tc(e,t){return t.catch((function(t){throw t instanceof Je&&Ic(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Sc(t)),additionalUserInfo:co(e),user:Oc.getOrCreate(r)}}))}function Cc(e,t){return Nc.apply(this,arguments)}function Nc(){return(Nc=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Tc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ac=function(){function e(t,n){_e(this,e),this.resolver=n,this.auth=t.wrapped()}return Ie(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Tc(Ec(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Oc=function(){function e(t){_e(this,e),this._delegate=t,this.multiFactor=function(e){var t=lt(e);return vo.has(t)||vo.set(t,po._fromUser(t)),vo.get(t)}(t)}return Ie(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this.auth,Ta(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Cc(this.auth,fu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this.auth,Nu(this._delegate,t,_c)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(fi(this.auth));case 2:return e.abrupt("return",Wu(this._delegate,t,_c));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this.auth,Na(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Cc(this.auth,function(e,t,n){return du.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Tc(this.auth,function(e,t,n){return Cu.apply(this,arguments)}(this._delegate,e,_c))}},{key:"reauthenticateWithRedirect",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(fi(this.auth));case 2:return e.abrupt("return",qu(this._delegate,t,_c));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Ya.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,va(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return to(lt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return to(lt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return yu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return eo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ja.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Oc.USER_MAP=new WeakMap;var Pc=Zn,Dc=function(){function e(t,n){if(_e(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Pc(r,"invalid-api-key",{appName:t.name}),Pc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?_c:void 0;this._delegate=n.initialize({options:{persistence:Lc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(zn),this.linkUnderlyingAuth()}return Ie(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Oc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){di(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ja.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Va(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ua.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tc(this._delegate,za(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return $a.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Yi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ku(this._delegate,_c);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Tc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){fi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Rc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Rc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ga.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Fa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gc(this._delegate,t),e.t0=t,e.next=e.t0===vc.SESSION?4:e.t0===vc.LOCAL?6:e.t0===vc.NONE?11:13;break;case 4:return n=wo,e.abrupt("break",14);case 6:return e.next=8,rr(Wo)._isAvailable();case 8:return r=e.sent,n=r?Wo:ko,e.abrupt("break",14);case 11:return n=Qr,e.abrupt("break",14);case 13:return e.abrupt("return",Qn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Tc(this._delegate,function(e){return fa.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Tc(this._delegate,Ia(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Tc(this._delegate,function(e,t){return Da.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Tc(this._delegate,function(e,t,n){return Ia(lt(e),Ji.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Tc(this._delegate,function(e,t,n){return Ka.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Cc(this._delegate,function(e,t,n){return lu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Tc(this._delegate,Su(this._delegate,t,_c)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,kc(this._delegate);case 3:return e.abrupt("return",Vu(this._delegate,t,_c));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return qa.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Rc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Oc.getOrCreate(e))},error:t,complete:n}}function Lc(e,t){var n=function(e,t){var n=wc();if(!n)return[];var r=$r(mc,e,t);switch(n.getItem(r)){case vc.NONE:return[Qr];case vc.LOCAL:return[Wo,wo];case vc.SESSION:return[wo];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Wo)||n.push(Wo),"undefined"!==typeof window)for(var r=0,i=[ko,wo];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Qr)||n.push(Qr),n}Dc.Persistence=vc;var Mc=function(){function e(){_e(this,e),this.providerId="phone",this._delegate=new mu(Ec(Sn.auth()))}return Ie(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return mu.credential(e,t)}}]),e}();Mc.PHONE_SIGN_IN_METHOD=mu.PHONE_SIGN_IN_METHOD,Mc.PROVIDER_ID=mu.PROVIDER_ID;var Fc,Uc=Zn,jc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sn.app();_e(this,e),Uc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new uu(t,n,i.auth()),this.type=this._delegate.type}return Ie(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Fc=Sn).INTERNAL.registerComponent(new gt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Dc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Mn,PASSWORD_RESET:Fn,RECOVER_EMAIL:Un,REVERT_SECOND_FACTOR_ADDITION:jn,VERIFY_AND_CHANGE_EMAIL:Vn,VERIFY_EMAIL:Bn}},EmailAuthProvider:Ji,FacebookAuthProvider:ta,GithubAuthProvider:ra,GoogleAuthProvider:na,OAuthProvider:ea,SAMLAuthProvider:aa,PhoneAuthProvider:Mc,PhoneMultiFactorGenerator:As,RecaptchaVerifier:jc,TwitterAuthProvider:oa,Auth:Dc,AuthCredential:yi,Error:Je}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Fc.registerVersion("@firebase/auth-compat","0.2.11");var Vc,Bc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},qc={},zc=zc||{},Wc=Bc||self;function Gc(){}function Kc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Hc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Qc="closure_uid_"+(1e9*Math.random()>>>0),$c=0;function Yc(e,t,n){return e.call.apply(e.bind,arguments)}function Jc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xc(e,t,n){return(Xc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yc:Jc).apply(null,arguments)}function Zc(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function el(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function tl(){this.s=this.s,this.o=this.o}var nl={};tl.prototype.s=!1,tl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Qc)&&e[Qc]||(e[Qc]=++$c)}(this);delete nl[e]}},tl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var rl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},il=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function al(e){return Array.prototype.concat.apply([],arguments)}function ol(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ul(e){return/^[\s\xa0]*$/.test(e)}var sl,cl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ll(e,t){return-1!=e.indexOf(t)}function fl(e,t){return e<t?-1:e>t?1:0}e:{var hl=Wc.navigator;if(hl){var dl=hl.userAgent;if(dl){sl=dl;break e}}sl=""}function pl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function vl(e){var t={};for(var n in e)t[n]=e[n];return t}var yl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ml(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<yl.length;a++)n=yl[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function gl(e){return gl[" "](e),e}gl[" "]=Gc;var kl,bl=ll(sl,"Opera"),wl=ll(sl,"Trident")||ll(sl,"MSIE"),xl=ll(sl,"Edge"),_l=xl||wl,El=ll(sl,"Gecko")&&!(ll(sl.toLowerCase(),"webkit")&&!ll(sl,"Edge"))&&!(ll(sl,"Trident")||ll(sl,"MSIE"))&&!ll(sl,"Edge"),Il=ll(sl.toLowerCase(),"webkit")&&!ll(sl,"Edge");function Sl(){var e=Wc.document;return e?e.documentMode:void 0}e:{var Tl="",Cl=function(){var e=sl;return El?/rv:([^\);]+)(\)|;)/.exec(e):xl?/Edge\/([\d\.]+)/.exec(e):wl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Il?/WebKit\/(\S+)/.exec(e):bl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cl&&(Tl=Cl?Cl[1]:""),wl){var Nl=Sl();if(null!=Nl&&Nl>parseFloat(Tl)){kl=String(Nl);break e}}kl=Tl}var Al,Ol={};function Pl(){return function(e){var t=Ol;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=cl(String(kl)).split("."),n=cl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=fl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||fl(0==a[2].length,0==o[2].length)||fl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Wc.document&&wl){var Dl=Sl();Al=Dl||(parseInt(kl,10)||void 0)}else Al=void 0;var Rl=Al,Ll=function(){if(!Wc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Wc.addEventListener("test",Gc,t),Wc.removeEventListener("test",Gc,t)}catch(n){}return e}();function Ml(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Fl(e,t){if(Ml.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(El){e:{try{gl(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ul[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Fl.Z.h.call(this)}}Ml.prototype.h=function(){this.defaultPrevented=!0},el(Fl,Ml);var Ul={2:"touch",3:"pen",4:"mouse"};Fl.prototype.h=function(){Fl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var jl="closure_listenable_"+(1e6*Math.random()|0),Vl=0;function Bl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Vl,this.ca=this.fa=!1}function ql(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function zl(e){this.src=e,this.g={},this.h=0}function Wl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=rl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ql(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}zl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Gl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Bl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Kl="closure_lm_"+(1e6*Math.random()|0),Hl={};function Ql(e,t,n,r,i){if(r&&r.once)return Yl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ql(e,t[a],n,r,i);return null}return n=rf(n),e&&e[jl]?e.N(t,n,Hc(r)?!!r.capture:!!r,i):$l(e,t,n,!1,r,i)}function $l(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Hc(i)?!!i.capture:!!i,u=tf(e);if(u||(e[Kl]=u=new zl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ef;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ll||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Yl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Yl(e,t[a],n,r,i);return null}return n=rf(n),e&&e[jl]?e.O(t,n,Hc(r)?!!r.capture:!!r,i):$l(e,t,n,!0,r,i)}function Jl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Jl(e,t[a],n,r,i);else r=Hc(r)?!!r.capture:!!r,n=rf(n),e&&e[jl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Gl(a=e.g[t],n,r,i))&&(ql(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=tf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gl(t,n,r,i)),(n=-1<e?t[e]:null)&&Xl(n))}function Xl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[jl])Wl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tf(t))?(Wl(n,e),0==n.h&&(n.src=null,t[Kl]=null)):ql(e)}}}function Zl(e){return e in Hl?Hl[e]:Hl[e]="on"+e}function ef(e,t){if(e.ca)e=!0;else{t=new Fl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Xl(e),e=n.call(r,t)}return e}function tf(e){return(e=e[Kl])instanceof zl?e:null}var nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function rf(e){return"function"===typeof e?e:(e[nf]||(e[nf]=function(t){return e.handleEvent(t)}),e[nf])}function af(){tl.call(this),this.i=new zl(this),this.P=this,this.I=null}function of(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ml(t,e);else if(t instanceof Ml)t.target=t.target||e;else{var i=t;ml(t=new Ml(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=uf(o,r,!0,t)&&i}if(i=uf(o=t.g=e,r,!0,t)&&i,i=uf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=uf(o=t.g=n[a],r,!1,t)&&i}function uf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Wl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}el(af,tl),af.prototype[jl]=!0,af.prototype.removeEventListener=function(e,t,n,r){Jl(this,e,t,n,r)},af.prototype.M=function(){if(af.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ql(n[r]);delete t.g[e],t.h--}}this.I=null},af.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},af.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sf=Wc.JSON.stringify;function cf(){var e=mf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var lf,ff=function(){function e(){_e(this,e),this.h=this.g=null}return Ie(e,[{key:"add",value:function(e,t){var n=hf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),hf=new(function(){function e(t,n){_e(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ie(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new df}),(function(e){return e.reset()})),df=function(){function e(){_e(this,e),this.next=this.g=this.h=null}return Ie(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function pf(e){Wc.setTimeout((function(){throw e}),0)}function vf(e,t){lf||function(){var e=Wc.Promise.resolve(void 0);lf=function(){e.then(gf)}}(),yf||(lf(),yf=!0),mf.add(e,t)}var yf=!1,mf=new ff;function gf(){for(var e;e=cf();){try{e.h.call(e.g)}catch(n){pf(n)}var t=hf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}yf=!1}function kf(e,t){af.call(this),this.h=e||1,this.g=t||Wc,this.j=Xc(this.kb,this),this.l=Date.now()}function bf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function wf(e,t,n){if("function"===typeof e)n&&(e=Xc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Wc.setTimeout(e,t||0)}function xf(e){e.g=wf((function(){e.g=null,e.i&&(e.i=!1,xf(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}el(kf,af),(Vc=kf.prototype).da=!1,Vc.S=null,Vc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),of(this,"tick"),this.da&&(bf(this),this.start()))}},Vc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vc.M=function(){kf.Z.M.call(this),bf(this),delete this.g};var _f=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ie(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:xf(this)}},{key:"M",value:function(){Cn(Ae(n.prototype),"M",this).call(this),this.g&&(Wc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(tl);function Ef(e){tl.call(this),this.h=e,this.g={}}el(Ef,tl);var If=[];function Sf(e,t,n,r){Array.isArray(n)||(n&&(If[0]=n.toString()),n=If);for(var i=0;i<n.length;i++){var a=Ql(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Tf(e){pl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Xl(e)}),e),e.g={}}function Cf(){this.g=!0}function Nf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return sf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ef.prototype.M=function(){Ef.Z.M.call(this),Tf(this)},Ef.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cf.prototype.Aa=function(){this.g=!1},Cf.prototype.info=function(){};var Af={},Of=null;function Pf(){return Of=Of||new af}function Df(e){Ml.call(this,Af.Ma,e)}function Rf(e){var t=Pf();of(t,new Df(t,e))}function Lf(e,t){Ml.call(this,Af.STAT_EVENT,e),this.stat=t}function Mf(e){var t=Pf();of(t,new Lf(t,e))}function Ff(e,t){Ml.call(this,Af.Na,e),this.size=t}function Uf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Wc.setTimeout((function(){e()}),t)}Af.Ma="serverreachability",el(Df,Ml),Af.STAT_EVENT="statevent",el(Lf,Ml),Af.Na="timingevent",el(Ff,Ml);var jf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Bf(){}function qf(e){return e.h||(e.h=e.i())}function zf(){}Bf.prototype.h=null;var Wf,Gf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Kf(){Ml.call(this,"d")}function Hf(){Ml.call(this,"c")}function Qf(){}function $f(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ef(this),this.P=Jf,e=_l?125:void 0,this.W=new kf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Yf}function Yf(){this.i=null,this.g="",this.h=!1}el(Kf,Ml),el(Hf,Ml),el(Qf,Bf),Qf.prototype.g=function(){return new XMLHttpRequest},Qf.prototype.i=function(){return{}},Wf=new Qf;var Jf=45e3,Xf={},Zf={};function eh(e,t,n){e.K=1,e.v=_h(mh(t)),e.s=n,e.U=!0,th(e,null)}function th(e,t){e.F=Date.now(),ah(e),e.A=mh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Mh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Yf,e.g=Ud(e.l,n?t:null,!e.s),0<e.O&&(e.L=new _f(Xc(e.Ia,e,e.g),e.O)),Sf(e.V,e.g,"readystatechange",e.gb),t=e.H?vl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Rf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function nh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function rh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ih(e,n))==Zf){4==t&&(e.o=4,Mf(14),i=!1),Nf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Xf){e.o=4,Mf(15),Nf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Nf(e.j,e.m,r,null),lh(e,r)}nh(e)&&r!=Zf&&r!=Xf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Mf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ad(t),t.L=!0,Mf(11))):(Nf(e.j,e.m,n,"[Invalid Chunked Response]"),ch(e),sh(e))}function ih(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Zf:(n=Number(t.substring(n,r)),isNaN(n)?Xf:(r+=1)+n>t.length?Zf:(t=t.substr(r,n),e.C=r+n,t))}function ah(e){e.Y=Date.now()+e.P,oh(e,e.P)}function oh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Uf(Xc(e.eb,e),t)}function uh(e){e.B&&(Wc.clearTimeout(e.B),e.B=null)}function sh(e){0==e.l.G||e.I||Dd(e.l,e)}function ch(e){uh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,bf(e.W),Tf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function lh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Wh(n.i,e)))if(n.I=e.N,!e.J&&Wh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Pd(n),wd(n)}Nd(n),Mf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Uf(Xc(n.ab,n),6e3));if(1>=zh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ld(n,11)}else if((e.J||n.g==e)&&Pd(n),!ul(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ll(l,"spdy")||ll(l,"quic")||ll(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Gh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,xh(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Fd(r,r.H?r.la:null,r.W),d.J){Kh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(uh(p),ah(p)),r.g=d}else Cd(r);0<n.l.length&&Ed(n)}else"stop"!=a[0]&&"close"!=a[0]||Ld(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ld(n,7):bd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Rf(4)}catch(a){}}function fh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kc(e)||"string"===typeof e)il(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Kc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Kc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function hh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof hh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function dh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ph(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ph(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ph(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Vc=$f.prototype).setTimeout=function(e){this.P=e},Vc.gb=function(e){e=e.target;var t=this.L;t&&3==vd(e)?t.l():this.Ia(e)},Vc.Ia=function(e){try{if(e==this.g)e:{var t=vd(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||_l||this.g&&(this.h.h||this.g.ga()||yd(this.g)))){this.I||4!=t||7==n||Rf(8==n||0>=r?3:2),uh(this);var i=this.g.ba();this.N=i;t:if(nh(this)){var a=yd(this.g);e="";var o=a.length,u=4==vd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ch(this),sh(this);var s="";break t}this.h.i=new Wc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ul(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Mf(12),ch(this),sh(this);break e}Nf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lh(this,i)}this.U?(rh(this,t,s),_l&&this.i&&3==t&&(Sf(this.V,this.W,"tick",this.fb),this.W.start())):(Nf(this.j,this.m,s,null),lh(this,s)),4==t&&ch(this),this.i&&!this.I&&(4==t?Dd(this.l,this):(this.i=!1,ah(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Mf(12)):(this.o=0,Mf(13)),ch(this),sh(this)}}}catch(t){}},Vc.fb=function(){if(this.g){var e=vd(this.g),t=this.g.ga();this.C<t.length&&(uh(this),rh(this,e,t),this.i&&4!=e&&ah(this))}},Vc.cancel=function(){this.I=!0,ch(this)},Vc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Rf(3),Mf(17)),ch(this),this.o=2,sh(this)):oh(this,this.Y-e)},(Vc=hh.prototype).R=function(){dh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Vc.T=function(){return dh(this),this.g.concat()},Vc.get=function(e,t){return ph(this.h,e)?this.h[e]:t},Vc.set=function(e,t){ph(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Vc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var vh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yh(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof yh){this.g=void 0!==t?t:e.g,gh(this,e.j),this.s=e.s,kh(this,e.i),bh(this,e.m),this.l=e.l,t=e.h;var n=new Ph;n.i=t.i,t.g&&(n.g=new hh(t.g),n.h=t.h),wh(this,n),this.o=e.o}else e&&(n=String(e).match(vh))?(this.g=!!t,gh(this,n[1]||"",!0),this.s=Eh(n[2]||""),kh(this,n[3]||"",!0),bh(this,n[4]),this.l=Eh(n[5]||"",!0),wh(this,n[6]||"",!0),this.o=Eh(n[7]||"")):(this.g=!!t,this.h=new Ph(null,this.g))}function mh(e){return new yh(e)}function gh(e,t,n){e.j=n?Eh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kh(e,t,n){e.i=n?Eh(t,!0):t}function bh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wh(e,t,n){t instanceof Ph?(e.h=t,function(e,t){t&&!e.j&&(Dh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Rh(this,t),Mh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ih(t,Ah)),e.h=new Ph(t,e.g))}function xh(e,t,n){e.h.set(t,n)}function _h(e){return xh(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Eh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ih(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Sh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Sh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ih(t,Th,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ih(t,Th,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ih(n,"/"==n.charAt(0)?Nh:Ch,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ih(n,Oh)),e.join("")};var Th=/[#\/\?@]/g,Ch=/[#\?:]/g,Nh=/[#\?]/g,Ah=/[#\?@]/g,Oh=/#/g;function Ph(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dh(e){e.g||(e.g=new hh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Rh(e,t){Dh(e),t=Fh(e,t),ph(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ph((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&dh(e)))}function Lh(e,t){return Dh(e),t=Fh(e,t),ph(e.g.h,t)}function Mh(e,t,n){Rh(e,t),0<n.length&&(e.i=null,e.g.set(Fh(e,t),ol(n)),e.h+=n.length)}function Fh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vc=Ph.prototype).add=function(e,t){Dh(this),this.i=null,e=Fh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vc.forEach=function(e,t){Dh(this),this.g.forEach((function(n,r){il(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Vc.T=function(){Dh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Vc.R=function(e){Dh(this);var t=[];if("string"===typeof e)Lh(this,e)&&(t=al(t,this.g.get(Fh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=al(t,e[n])}return t},Vc.set=function(e,t){return Dh(this),this.i=null,Lh(this,e=Fh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Vc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Uh=Ie((function e(t,n){_e(this,e),this.h=t,this.g=n}));function jh(e){this.l=e||Bh,Wc.PerformanceNavigationTiming?e=0<(e=Wc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Wc.g&&Wc.g.Ea&&Wc.g.Ea()&&Wc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vh,Bh=10;function qh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zh(e){return e.h?1:e.g?e.g.size:0}function Wh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Gh(e,t){e.g?e.g.add(t):e.h=t}function Kh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Hh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Se(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ol(e.i)}function Qh(){}function $h(){this.g=new Qh}function Yh(e,t,n){var r=n||"";try{fh(e,(function(e,n){var i=e;Hc(e)&&(i=sf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Jh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Xh(e){this.l=e.$b||null,this.j=e.ib||!1}function Zh(e,t){af.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ed,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jh.prototype.cancel=function(){if(this.i=Hh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Se(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Qh.prototype.stringify=function(e){return Wc.JSON.stringify(e,void 0)},Qh.prototype.parse=function(e){return Wc.JSON.parse(e,void 0)},el(Xh,Bf),Xh.prototype.g=function(){return new Zh(this.l,this.j)},Xh.prototype.i=(Vh={},function(){return Vh}),el(Zh,af);var ed=0;function td(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function nd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,rd(e)}function rd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vc=Zh.prototype).open=function(e,t){if(this.readyState!=ed)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,rd(this)},Vc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Wc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Vc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nd(this)),this.readyState=ed},Vc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rd(this)),this.g&&(this.readyState=3,rd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Wc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;td(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Vc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nd(this):rd(this),3==this.readyState&&td(this)}},Vc.Ua=function(e){this.g&&(this.response=this.responseText=e,nd(this))},Vc.Ta=function(e){this.g&&(this.response=e,nd(this))},Vc.ha=function(){this.g&&nd(this)},Vc.setRequestHeader=function(e,t){this.v.append(e,t)},Vc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var id=Wc.JSON.parse;function ad(e){af.call(this),this.headers=new hh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=od,this.K=this.L=!1}el(ad,af);var od="",ud=/^https?$/i,sd=["POST","PUT"];function cd(e){return"content-type"==e.toLowerCase()}function ld(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fd(e),dd(e)}function fd(e){e.D||(e.D=!0,of(e,"complete"),of(e,"error"))}function hd(e){if(e.h&&"undefined"!=typeof zc&&(!e.C[1]||4!=vd(e)||2!=e.ba()))if(e.v&&4==vd(e))wf(e.Fa,0,e);else if(of(e,"readystatechange"),4==vd(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vh)[1]||null;if(!a&&Wc.self&&Wc.self.location){var o=Wc.self.location.protocol;a=o.substr(0,o.length-1)}i=!ud.test(a?a.toLowerCase():"")}t=i}if(t)of(e,"complete"),of(e,"success");else{e.m=6;try{var u=2<vd(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",fd(e)}}finally{dd(e)}}}function dd(e,t){if(e.g){pd(e);var n=e.g,r=e.C[0]?Gc:null;e.g=null,e.C=null,t||of(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function pd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Wc.clearTimeout(e.A),e.A=null)}function vd(e){return e.g?e.g.readyState:0}function yd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case od:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function md(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return pl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xh(e,t,n))}function gd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function kd(e){this.za=0,this.l=[],this.h=new Cf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gd("baseRetryDelayMs",5e3,e),this.$a=gd("retryDelaySeedMs",1e4,e),this.Ya=gd("forwardChannelMaxRetries",2,e),this.ra=gd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new jh(e&&e.concurrentRequestLimit),this.Ca=new $h,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function bd(e){if(xd(e),3==e.G){var t=e.V++,n=mh(e.F);xh(n,"SID",e.J),xh(n,"RID",t),xh(n,"TYPE","terminate"),Sd(e,n),(t=new $f(e,e.h,t,void 0)).K=2,t.v=_h(mh(n)),n=!1,Wc.navigator&&Wc.navigator.sendBeacon&&(n=Wc.navigator.sendBeacon(t.v.toString(),"")),!n&&Wc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ud(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ah(t)}Md(e)}function wd(e){e.g&&(Ad(e),e.g.cancel(),e.g=null)}function xd(e){wd(e),e.u&&(Wc.clearTimeout(e.u),e.u=null),Pd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Wc.clearTimeout(e.m),e.m=null)}function _d(e,t){e.l.push(new Uh(e.Za++,t)),3==e.G&&Ed(e)}function Ed(e){qh(e.i)||e.m||(e.m=!0,vf(e.Ha,e),e.C=0)}function Id(e,t){var n;n=t?t.m:e.V++;var r=mh(e.F);xh(r,"SID",e.J),xh(r,"RID",n),xh(r,"AID",e.U),Sd(e,r),e.o&&e.s&&md(r,e.o,e.s),n=new $f(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Td(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Gh(e.i,n),eh(n,r,t)}function Sd(e,t){e.j&&fh({},(function(e,n){xh(t,n,e)}))}function Td(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Xc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Yh(l,o,"req"+c+"_")}catch(fp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Cd(e){e.g||e.u||(e.Y=1,vf(e.Ga,e),e.A=0)}function Nd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Uf(Xc(e.Ga,e),Rd(e,e.A)),e.A++,!0)}function Ad(e){null!=e.B&&(Wc.clearTimeout(e.B),e.B=null)}function Od(e){e.g=new $f(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=mh(e.oa);xh(t,"RID","rpc"),xh(t,"SID",e.J),xh(t,"CI",e.N?"0":"1"),xh(t,"AID",e.U),Sd(e,t),xh(t,"TYPE","xmlhttp"),e.o&&e.s&&md(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=_h(mh(t)),n.s=null,n.U=!0,th(n,e)}function Pd(e){null!=e.v&&(Wc.clearTimeout(e.v),e.v=null)}function Dd(e,t){var n=null;if(e.g==t){Pd(e),Ad(e),e.g=null;var r=2}else{if(!Wh(e.i,t))return;n=t.D,Kh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;of(r=Pf(),new Ff(r,n,t,i)),Ed(e)}else Cd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(zh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Uf(Xc(e.Ha,e,t),Rd(e,e.C)),e.C++,!0))}(e,t)||2==r&&Nd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ld(e,5);break;case 4:Ld(e,10);break;case 3:Ld(e,6);break;default:Ld(e,2)}}function Rd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ld(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Xc(e.jb,e);n||(n=new yh("//www.google.com/images/cleardot.gif"),Wc.location&&"http"==Wc.location.protocol||gh(n,"https"),_h(n)),function(e,t){var n=new Cf;if(Wc.Image){var r=new Image;r.onload=Zc(Jh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Zc(Jh,n,r,"TestLoadImage: error",!1,t),r.onabort=Zc(Jh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Zc(Jh,n,r,"TestLoadImage: timeout",!1,t),Wc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Mf(2);e.G=0,e.j&&e.j.va(t),Md(e),xd(e)}function Md(e){e.G=0,e.I=-1,e.j&&(0==Hh(e.i).length&&0==e.l.length||(e.i.i.length=0,ol(e.l),e.l.length=0),e.j.ua())}function Fd(e,t,n){var r=function(e){return e instanceof yh?mh(e):new yh(e,void 0)}(n);if(""!=r.i)t&&kh(r,t+"."+r.i),bh(r,r.m);else{var i=Wc.location;r=function(e,t,n,r){var i=new yh(null,void 0);return e&&gh(i,e),t&&kh(i,t),n&&bh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&pl(e.aa,(function(e,t){xh(r,t,e)})),t=e.D,n=e.sa,t&&n&&xh(r,t,n),xh(r,"VER",e.ma),Sd(e,r),r}function Ud(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ad(new Xh({ib:!0})):new ad(e.qa)).L=e.H,t}function jd(){}function Vd(){if(wl&&!(10<=Number(Rl)))throw Error("Environmental error: no available transport.")}function Bd(e,t){af.call(this),this.g=new kd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ul(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ul(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wd(this)}function qd(e){Kf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zd(){Hf.call(this),this.status=1}function Wd(e){this.g=e}(Vc=ad.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wf.g(),this.C=this.u?qf(this.u):qf(Wf),this.g.onreadystatechange=Xc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ld(this,a)}e=n||"";var i=new hh(this.headers);r&&fh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=cd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Wc.FormData&&e instanceof Wc.FormData,!(0<=rl(sd,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pd(this),0<this.B&&((this.K=function(e){return wl&&Pl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xc(this.pa,this)):this.A=wf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ld(this,a)}},Vc.pa=function(){"undefined"!=typeof zc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,of(this,"timeout"),this.abort(8))},Vc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,of(this,"complete"),of(this,"abort"),dd(this))},Vc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dd(this,!0)),ad.Z.M.call(this)},Vc.Fa=function(){this.s||(this.F||this.v||this.l?hd(this):this.cb())},Vc.cb=function(){hd(this)},Vc.ba=function(){try{return 2<vd(this)?this.g.status:-1}catch(Vh){return-1}},Vc.ga=function(){try{return this.g?this.g.responseText:""}catch(Vh){return""}},Vc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),id(t)}},Vc.Da=function(){return this.m},Vc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vc=kd.prototype).ma=8,Vc.G=1,Vc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Vc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new $f(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ml(n=vl(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Td(this,t,r),xh(i=mh(this.F),"RID",e),xh(i,"CVER",22),this.D&&xh(i,"X-HTTP-Session-Id",this.D),Sd(this,i),this.o&&n&&md(i,this.o,n),Gh(this.i,t),this.Ra&&xh(i,"TYPE","init"),this.ja?(xh(i,"$req",r),xh(i,"SID","null"),t.$=!0,eh(t,i,null)):eh(t,i,r),this.G=2}}else 3==this.G&&(e?Id(this,e):0==this.l.length||qh(this.i)||Id(this))},Vc.Ga=function(){if(this.u=null,Od(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Uf(Xc(this.bb,this),e)}},Vc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Mf(10),wd(this),Od(this))},Vc.ab=function(){null!=this.v&&(this.v=null,wd(this),Nd(this),Mf(19))},Vc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Mf(2)):(this.h.info("Failed to ping google.com"),Mf(1))},(Vc=jd.prototype).xa=function(){},Vc.wa=function(){},Vc.va=function(){},Vc.ua=function(){},Vc.Oa=function(){},Vd.prototype.g=function(e,t){return new Bd(e,t)},el(Bd,af),Bd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),vf(Xc(e.hb,e,t))),Mf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Fd(e,null,e.W),Ed(e)},Bd.prototype.close=function(){bd(this.g)},Bd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,_d(this.g,t)}else this.v?((t={}).__data__=sf(e),_d(this.g,t)):_d(this.g,e)},Bd.prototype.M=function(){this.g.j=null,delete this.j,bd(this.g),delete this.g,Bd.Z.M.call(this)},el(qd,Kf),el(zd,Hf),el(Wd,jd),Wd.prototype.xa=function(){of(this.g,"a")},Wd.prototype.wa=function(e){of(this.g,new qd(e))},Wd.prototype.va=function(e){of(this.g,new zd(e))},Wd.prototype.ua=function(){of(this.g,"b")},Vd.prototype.createWebChannel=Vd.prototype.g,Bd.prototype.send=Bd.prototype.u,Bd.prototype.open=Bd.prototype.m,Bd.prototype.close=Bd.prototype.close,jf.NO_ERROR=0,jf.TIMEOUT=8,jf.HTTP_ERROR=6,Vf.COMPLETE="complete",zf.EventType=Gf,Gf.OPEN="a",Gf.CLOSE="b",Gf.ERROR="c",Gf.MESSAGE="d",af.prototype.listen=af.prototype.N,ad.prototype.listenOnce=ad.prototype.O,ad.prototype.getLastError=ad.prototype.La,ad.prototype.getLastErrorCode=ad.prototype.Da,ad.prototype.getStatus=ad.prototype.ba,ad.prototype.getResponseJson=ad.prototype.Qa,ad.prototype.getResponseText=ad.prototype.ga,ad.prototype.send=ad.prototype.ea;var Gd=qc.createWebChannelTransport=function(){return new Vd},Kd=qc.getStatEventTarget=function(){return Pf()},Hd=qc.ErrorCode=jf,Qd=qc.EventType=Vf,$d=qc.Event=Af,Yd=qc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Jd=qc.FetchXmlHttpFactory=Xh,Xd=qc.WebChannel=zf,Zd=qc.XhrIo=ad,ep="@firebase/firestore",tp=function(){function e(t){_e(this,e),this.uid=t}return Ie(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();tp.UNAUTHENTICATED=new tp(null),tp.GOOGLE_CREDENTIALS=new tp("google-credentials-uid"),tp.FIRST_PARTY=new tp("first-party-uid"),tp.MOCK_USER=new tp("mock-user");var np="9.6.10",rp=new Ot("@firebase/firestore");function ip(){return rp.logLevel}function ap(e){if(rp.logLevel<=xt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sp);rp.debug.apply(rp,["Firestore (".concat(np,"): ").concat(e)].concat(mt(i)))}}function op(e){if(rp.logLevel<=xt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sp);rp.error.apply(rp,["Firestore (".concat(np,"): ").concat(e)].concat(mt(i)))}}function up(e){if(rp.logLevel<=xt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(sp);rp.warn.apply(rp,["Firestore (".concat(np,"): ").concat(e)].concat(mt(i)))}}function sp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function cp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(np,") INTERNAL ASSERTION FAILED: ")+e;throw op(t),new Error(t)}function lp(e,t){e||cp()}function fp(e,t){return e}var hp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dp=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ie(n)}(Je),pp=Ie((function e(){var t=this;_e(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vp=Ie((function e(t,n){_e(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),yp=function(){function e(){_e(this,e)}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mp=function(){function e(t){_e(this,e),this.token=t,this.changeListener=null}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),gp=function(){function e(t){_e(this,e),this.t=t,this.currentUser=tp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ie(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new pp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new pp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ap("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ap("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ap("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(lp("string"==typeof n.accessToken),new vp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return lp(null===e||"string"==typeof e),new tp(e)}}]),e}(),kp=Ie((function e(t,n,r){_e(this,e),this.type="FirstParty",this.user=tp.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),bp=function(){function e(t,n,r){_e(this,e),this.h=t,this.l=n,this.m=r}return Ie(e,[{key:"getToken",value:function(){return Promise.resolve(new kp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(tp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),wp=Ie((function e(t){_e(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),xp=function(){function e(t){_e(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Ie(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ap("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ap("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ap("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ap("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(lp("string"==typeof t.token),e.p=t.token,new wp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),_p=function(){function e(t,n){var r=this;_e(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Ie(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Ep(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}_p.A=-1;var Ip=function(){function e(){_e(this,e)}return Ie(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ep(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Sp(e,t){return e<t?-1:e>t?1:0}function Tp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Cp(e){return e+"\0"}var Np=function(){function e(t,n){if(_e(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new dp(hp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dp(hp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new dp(hp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dp(hp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ie(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Sp(this.nanoseconds,e.nanoseconds):Sp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ap=function(){function e(t){_e(this,e),this.timestamp=t}return Ie(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Np(0,0))}},{key:"max",value:function(){return new e(new Np(253402300799,999999999))}}]),e}();function Op(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Dp(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Rp=function(){function e(t,n,r){_e(this,e),void 0===n?n=0:n>t.length&&cp(),void 0===r?r=t.length-n:r>t.length-n&&cp(),this.segments=t,this.offset=n,this.len=r}return Ie(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Lp=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new dp(hp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,mt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Rp),Mp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fp=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Mp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new dp(hp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new dp(hp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new dp(hp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new dp(hp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Rp),Up=function(){function e(t){_e(this,e),this.fields=t,t.sort(Fp.comparator)}return Ie(e,[{key:"covers",value:function(e){var t,n=Se(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Tp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var jp=function(e){function t(e){_e(this,t),this.binaryString=e}return Ie(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Sp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();jp.EMPTY_BYTE_STRING=new jp("");var Vp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bp(e){if(lp(!!e),"string"==typeof e){var t=0,n=Vp.exec(e);if(lp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:qp(e.seconds),nanos:qp(e.nanos)}}function qp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zp(e){return"string"==typeof e?jp.fromBase64String(e):jp.fromUint8Array(e)}function Wp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gp(e){var t=e.mapValue.fields.__previous_value__;return Wp(t)?Gp(t):t}function Kp(e){var t=Bp(e.mapValue.fields.__local_write_time__.timestampValue);return new Np(t.seconds,t.nanos)}var Hp=Ie((function e(t,n,r,i,a,o,u,s){_e(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Qp=function(){function e(t,n){_e(this,e),this.projectId=t,this.database=n||"(default)"}return Ie(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function $p(e){return null==e}function Yp(e){return 0===e&&1/e==-1/0}function Jp(e){return"number"==typeof e&&Number.isInteger(e)&&!Yp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Xp=function(){function e(t){_e(this,e),this.path=t}return Ie(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Lp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Lp.fromString(t))}},{key:"fromName",value:function(t){return new e(Lp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Lp.emptyPath())}},{key:"comparator",value:function(e,t){return Lp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Lp(t.slice()))}}]),e}(),Zp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ev={nullValue:"NULL_VALUE"};function tv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Wp(e)?4:vv(e)?9:10:cp()}function nv(e,t){if(e===t)return!0;var n=tv(e);if(n!==tv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kp(e).isEqual(Kp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Bp(e.timestampValue),r=Bp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zp(e.bytesValue).isEqual(zp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qp(e.geoPointValue.latitude)===qp(t.geoPointValue.latitude)&&qp(e.geoPointValue.longitude)===qp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qp(e.integerValue)===qp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=qp(e.doubleValue),r=qp(t.doubleValue);return n===r?Yp(n)===Yp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Tp(e.arrayValue.values||[],t.arrayValue.values||[],nv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Op(n)!==Op(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!nv(n[i],r[i])))return!1;return!0}(e,t);default:return cp()}}function rv(e,t){return void 0!==(e.values||[]).find((function(e){return nv(e,t)}))}function iv(e,t){if(e===t)return 0;var n=tv(e),r=tv(t);if(n!==r)return Sp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=qp(e.integerValue||e.doubleValue),r=qp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return av(e.timestampValue,t.timestampValue);case 4:return av(Kp(e),Kp(t));case 5:return Sp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=zp(e),r=zp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Sp(n[i],r[i]);if(0!==a)return a}return Sp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Sp(qp(e.latitude),qp(t.latitude));return 0!==n?n:Sp(qp(e.longitude),qp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=iv(n[i],r[i]);if(a)return a}return Sp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Sp(r[o],a[o]);if(0!==u)return u;var s=iv(n[r[o]],i[a[o]]);if(0!==s)return s}return Sp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw cp()}}function av(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sp(e,t);var n=Bp(e),r=Bp(t),i=Sp(n.seconds,r.seconds);return 0!==i?i:Sp(n.nanos,r.nanos)}function ov(e){return uv(e)}function uv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Bp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Xp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Se(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=uv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Se(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(uv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):cp();var t,n}function sv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function cv(e){return!!e&&"integerValue"in e}function lv(e){return!!e&&"arrayValue"in e}function fv(e){return!!e&&"nullValue"in e}function hv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function dv(e){return!!e&&"mapValue"in e}function pv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Pp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=pv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=pv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function vv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function yv(e,t){return void 0===e?t:void 0===t||iv(e,t)>0?e:t}function mv(e,t){return void 0===e?t:void 0===t||iv(e,t)<0?e:t}var gv=function(){function e(t){_e(this,e),this.value=t}return Ie(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!dv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pv(t)}},{key:"setAll",value:function(e){var t=this,n=Fp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=pv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());dv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return nv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];dv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Pp(t,(function(t,n){return e[t]=n}));var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(pv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function kv(e){var t=[];return Pp(e.fields,(function(e,n){var r=new Fp([e]);if(dv(n)){var i=kv(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Se(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Up(t)}var bv=function(){function e(t,n,r,i,a,o){_e(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Ie(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=gv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=gv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ap.min(),Ap.min(),gv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ap.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ap.min(),gv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ap.min(),gv.empty(),2)}}]),e}(),wv=Ie((function e(t,n,r,i){_e(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function xv(e){return e.fields.find((function(e){return 2===e.kind}))}function _v(e){return e.fields.filter((function(e){return 2!==e.kind}))}wv.UNKNOWN_ID=-1;var Ev=Ie((function e(t,n){_e(this,e),this.fieldPath=t,this.kind=n})),Iv=function(){function e(t,n){_e(this,e),this.sequenceNumber=t,this.offset=n}return Ie(e,null,[{key:"empty",value:function(){return new e(0,Cv.min())}}]),e}();function Sv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ap.fromTimestamp(1e9===r?new Np(n+1,0):new Np(n,r));return new Cv(i,Xp.empty(),t)}function Tv(e){return new Cv(e.readTime,e.key,-1)}var Cv=function(){function e(t,n,r){_e(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ie(e,null,[{key:"min",value:function(){return new e(Ap.min(),Xp.empty(),-1)}},{key:"max",value:function(){return new e(Ap.max(),Xp.empty(),-1)}}]),e}();function Nv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Xp.comparator(e.documentKey,t.documentKey))?n:Sp(e.largestBatchId,t.largestBatchId)}var Av=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;_e(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function Ov(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Av(e,t,n,r,i,a,o)}function Pv(e){var t=fp(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ov(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),$p(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ov(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ov(e)})).join(",")),t.P=n}return t.P}function Dv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Hv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!nv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$v(e.startAt,t.startAt)&&$v(e.endAt,t.endAt)}function Rv(e){return Xp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Lv(e,t){return e.filters.filter((function(e){return e instanceof Mv&&e.field.isEqual(t)}))}var Mv=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(iv(t,this.value)):null!==t&&tv(this.value)===tv(t)&&this.v(iv(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cp()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Fv(e,t,r):"array-contains"===t?new Bv(e,r):"in"===t?new qv(e,r):"not-in"===t?new zv(e,r):"array-contains-any"===t?new Wv(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Uv(e,n):new jv(e,n)}}]),n}(function(){return Ie((function e(){_e(this,e)}))}()),Fv=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this,e,r,i)).key=Xp.fromName(i.referenceValue),a}return Ie(n,[{key:"matches",value:function(e){var t=Xp.comparator(e.key,this.key);return this.v(t)}}]),n}(Mv),Uv=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,"in",r)).keys=Vv("in",r),i}return Ie(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Mv),jv=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,"not-in",r)).keys=Vv("not-in",r),i}return Ie(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Mv);function Vv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Xp.fromName(e.referenceValue)}))}var Bv=function(e){Ne(n,e);var t=Re(n);function n(e,r){return _e(this,n),t.call(this,e,"array-contains",r)}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return lv(t)&&rv(t.arrayValue,this.value)}}]),n}(Mv),qv=function(e){Ne(n,e);var t=Re(n);function n(e,r){return _e(this,n),t.call(this,e,"in",r)}return Ie(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&rv(this.value.arrayValue,t)}}]),n}(Mv),zv=function(e){Ne(n,e);var t=Re(n);function n(e,r){return _e(this,n),t.call(this,e,"not-in",r)}return Ie(n,[{key:"matches",value:function(e){if(rv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!rv(this.value.arrayValue,t)}}]),n}(Mv),Wv=function(e){Ne(n,e);var t=Re(n);function n(e,r){return _e(this,n),t.call(this,e,"array-contains-any",r)}return Ie(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!lv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return rv(t.value.arrayValue,e)}))}}]),n}(Mv),Gv=Ie((function e(t,n){_e(this,e),this.position=t,this.inclusive=n})),Kv=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";_e(this,e),this.field=t,this.dir=n}));function Hv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Qv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Xp.comparator(Xp.fromName(o.referenceValue),n.key):iv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function $v(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!nv(e.position[n],t.position[n]))return!1;return!0}var Yv=Ie((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;_e(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Jv(e,t,n,r,i,a,o,u){return new Yv(e,t,n,r,i,a,o,u)}function Xv(e){return new Yv(e)}function Zv(e){return!$p(e.limit)&&"F"===e.limitType}function ey(e){return!$p(e.limit)&&"L"===e.limitType}function ty(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ny(e){var t,n=Se(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ry(e){return null!==e.collectionGroup}function iy(e){var t=fp(e);if(null===t.D){t.D=[];var n=ny(t),r=ty(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Kv(n)),t.D.push(new Kv(Fp.keyField(),"asc"));else{var i,a=!1,o=Se(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Kv(Fp.keyField(),s))}}}return t.D}function ay(e){var t=fp(e);if(!t.C)if("F"===t.limitType)t.C=Ov(t.path,t.collectionGroup,iy(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Se(iy(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Kv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Gv(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Gv(t.startAt.position,!t.startAt.inclusive):null;t.C=Ov(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function oy(e,t,n){return new Yv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function uy(e,t){return Dv(ay(e),ay(t))&&e.limitType===t.limitType}function sy(e){return"".concat(Pv(ay(e)),"|lt:").concat(e.limitType)}function cy(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ov(t.value));var t})).join(", "),"]")),$p(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ov(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ov(e)})).join(",")),"Target(".concat(t,")")}(ay(e)),"; limitType=").concat(e.limitType,")")}function ly(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Se(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Se(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Qv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,iy(e),t))&&!(e.endAt&&!function(e,t,n){var r=Qv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,iy(e),t))}(e,t)}function fy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hy(e){return function(t,n){var r,i=!1,a=Se(iy(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=dy(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function dy(e,t,n){var r=e.field.isKeyField()?Xp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?iv(r,i):cp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cp()}}function py(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yp(t)?"-0":t}}function vy(e){return{integerValue:""+e}}function yy(e,t){return Jp(t)?vy(t):py(e,t)}var my=Ie((function e(){_e(this,e),this._=void 0}));function gy(e,t,n){return e instanceof wy?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof xy?_y(e,t):e instanceof Ey?Iy(e,t):function(e,t){var n=by(e,t),r=Ty(n)+Ty(e.k);return cv(n)&&cv(e.k)?vy(r):py(e.M,r)}(e,t)}function ky(e,t,n){return e instanceof xy?_y(e,t):e instanceof Ey?Iy(e,t):n}function by(e,t){return e instanceof Sy?cv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var wy=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n)}(my),xy=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this)).elements=e,r}return Ie(n)}(my);function _y(e,t){var n,r=Cy(t),i=Se(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return nv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ey=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this)).elements=e,r}return Ie(n)}(my);function Iy(e,t){var n,r=Cy(t),i=Se(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!nv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sy=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this)).M=e,i.k=r,i}return Ie(n)}(my);function Ty(e){return qp(e.integerValue||e.doubleValue)}function Cy(e){return lv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ny=Ie((function e(t,n){_e(this,e),this.field=t,this.transform=n}));var Ay=Ie((function e(t,n){_e(this,e),this.version=t,this.transformResults=n})),Oy=function(){function e(t,n){_e(this,e),this.updateTime=t,this.exists=n}return Ie(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Py(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Dy=Ie((function e(){_e(this,e)}));function Ry(e,t,n){e instanceof jy?function(e,t,n){var r=e.value.clone(),i=qy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vy?function(e,t,n){if(Py(e.precondition,t)){var r=qy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(By(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ly(e,t,n){e instanceof jy?function(e,t,n){if(Py(e.precondition,t)){var r=e.value.clone(),i=zy(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Uy(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Vy?function(e,t,n){if(Py(e.precondition,t)){var r=zy(e.fieldTransforms,n,t),i=t.data;i.setAll(By(e)),i.setAll(r),t.convertToFoundDocument(Uy(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Py(e.precondition,t)&&t.convertToNoDocument(Ap.min())}(e,t)}function My(e,t){var n,r=null,i=Se(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=by(a.transform,o||null);null!=u&&(null==r&&(r=gv.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Fy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Tp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof xy&&t instanceof xy||e instanceof Ey&&t instanceof Ey?Tp(e.elements,t.elements,nv):e instanceof Sy&&t instanceof Sy?nv(e.k,t.k):e instanceof wy&&t instanceof wy}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Uy(e){return e.isFoundDocument()?e.version:Ap.min()}var jy=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return _e(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ie(n)}(Dy),Vy=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return _e(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ie(n)}(Dy);function By(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function qy(e,t,n){var r=new Map;lp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,ky(o,u,n[i]))}return r}function zy(e,t,n){var r,i=new Map,a=Se(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,gy(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Wy,Gy,Ky=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ie(n)}(Dy),Hy=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ie(n)}(Dy),Qy=Ie((function e(t){_e(this,e),this.count=t}));function $y(e){switch(e){default:return cp();case hp.CANCELLED:case hp.UNKNOWN:case hp.DEADLINE_EXCEEDED:case hp.RESOURCE_EXHAUSTED:case hp.INTERNAL:case hp.UNAVAILABLE:case hp.UNAUTHENTICATED:return!1;case hp.INVALID_ARGUMENT:case hp.NOT_FOUND:case hp.ALREADY_EXISTS:case hp.PERMISSION_DENIED:case hp.FAILED_PRECONDITION:case hp.ABORTED:case hp.OUT_OF_RANGE:case hp.UNIMPLEMENTED:case hp.DATA_LOSS:return!0}}function Yy(e){if(void 0===e)return op("GRPC error has no .code"),hp.UNKNOWN;switch(e){case Wy.OK:return hp.OK;case Wy.CANCELLED:return hp.CANCELLED;case Wy.UNKNOWN:return hp.UNKNOWN;case Wy.DEADLINE_EXCEEDED:return hp.DEADLINE_EXCEEDED;case Wy.RESOURCE_EXHAUSTED:return hp.RESOURCE_EXHAUSTED;case Wy.INTERNAL:return hp.INTERNAL;case Wy.UNAVAILABLE:return hp.UNAVAILABLE;case Wy.UNAUTHENTICATED:return hp.UNAUTHENTICATED;case Wy.INVALID_ARGUMENT:return hp.INVALID_ARGUMENT;case Wy.NOT_FOUND:return hp.NOT_FOUND;case Wy.ALREADY_EXISTS:return hp.ALREADY_EXISTS;case Wy.PERMISSION_DENIED:return hp.PERMISSION_DENIED;case Wy.FAILED_PRECONDITION:return hp.FAILED_PRECONDITION;case Wy.ABORTED:return hp.ABORTED;case Wy.OUT_OF_RANGE:return hp.OUT_OF_RANGE;case Wy.UNIMPLEMENTED:return hp.UNIMPLEMENTED;case Wy.DATA_LOSS:return hp.DATA_LOSS;default:return cp()}}(Gy=Wy||(Wy={}))[Gy.OK=0]="OK",Gy[Gy.CANCELLED=1]="CANCELLED",Gy[Gy.UNKNOWN=2]="UNKNOWN",Gy[Gy.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gy[Gy.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gy[Gy.NOT_FOUND=5]="NOT_FOUND",Gy[Gy.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gy[Gy.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gy[Gy.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gy[Gy.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gy[Gy.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gy[Gy.ABORTED=10]="ABORTED",Gy[Gy.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gy[Gy.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gy[Gy.INTERNAL=13]="INTERNAL",Gy[Gy.UNAVAILABLE=14]="UNAVAILABLE",Gy[Gy.DATA_LOSS=15]="DATA_LOSS";var Jy=function(){function e(t,n){_e(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ie(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=T(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Pp(this.inner,(function(t,n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=T(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Dp(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Xy=function(){function e(t,n){_e(this,e),this.comparator=t,this.root=n||em.EMPTY}return Ie(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,em.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,em.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Zy(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Zy(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Zy(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Zy(this.root,e,this.comparator,!0)}}]),e}(),Zy=function(){function e(t,n,r,i){_e(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ie(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),em=function(){function e(t,n,r,i,a){_e(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ie(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw cp();if(this.right.isRed())throw cp();var e=this.left.check();if(e!==this.right.check())throw cp();return e+(this.isRed()?0:1)}}]),e}();em.EMPTY=null,em.RED=!0,em.BLACK=!1,em.EMPTY=new(function(){function e(){_e(this,e),this.size=0}return Ie(e,[{key:"key",get:function(){throw cp()}},{key:"value",get:function(){throw cp()}},{key:"color",get:function(){throw cp()}},{key:"left",get:function(){throw cp()}},{key:"right",get:function(){throw cp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new em(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var tm=function(){function e(t){_e(this,e),this.comparator=t,this.data=new Xy(this.comparator)}return Ie(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new nm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new nm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),nm=function(){function e(t){_e(this,e),this.iter=t}return Ie(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function rm(e){return e.hasNext()?e.getNext():void 0}var im=new Xy(Xp.comparator);function am(){return im}var om=new Xy(Xp.comparator);function um(){return om}function sm(){return new Jy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var cm=new Xy(Xp.comparator),lm=new tm(Xp.comparator);function fm(){for(var e=lm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var hm=new tm(Sp);function dm(){return hm}var pm=function(){function e(t,n,r,i,a){_e(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ie(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,vm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ap.min(),r,dm(),am(),fm())}}]),e}(),vm=function(){function e(t,n,r,i,a){_e(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ie(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(jp.EMPTY_BYTE_STRING,n,fm(),fm(),fm())}}]),e}(),ym=Ie((function e(t,n,r,i){_e(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),mm=Ie((function e(t,n){_e(this,e),this.targetId=t,this.$=n})),gm=Ie((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_e(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),km=function(){function e(){_e(this,e),this.B=0,this.L=xm(),this.U=jp.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}return Ie(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"K",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.G}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}},{key:"H",value:function(){var e=fm(),t=fm(),n=fm();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cp()}})),new vm(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.G=!1,this.L=xm()}},{key:"Y",value:function(e,t){this.G=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.G=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.G=!0,this.q=!0}}]),e}(),bm=function(){function e(t){_e(this,e),this.nt=t,this.st=new Map,this.it=am(),this.rt=wm(),this.ot=new tm(Sp)}return Ie(e,[{key:"ut",value:function(e){var t,n=Se(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Se(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:cp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Rv(i))if(0===n){var a=new Xp(i.path);this.ct(t,a,bv.newNoDocument(a,Ap.min()))}else lp(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Rv(a.target)){var o=new Xp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,bv.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=fm();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new pm(e,n,this.ot,this.it,r);return this.it=am(),this.rt=wm(),this.ot=new tm(Sp),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new km,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new tm(Sp),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ap("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new km),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function wm(){return new Xy(Xp.comparator)}function xm(){return new Xy(Xp.comparator)}var _m={asc:"ASCENDING",desc:"DESCENDING"},Em={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Im=Ie((function e(t,n){_e(this,e),this.databaseId=t,this.N=n}));function Sm(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tm(e,t){return e.N?t.toBase64():t.toUint8Array()}function Cm(e,t){return Sm(e,t.toTimestamp())}function Nm(e){return lp(!!e),Ap.fromTimestamp(function(e){var t=Bp(e);return new Np(t.seconds,t.nanos)}(e))}function Am(e,t){return function(e){return new Lp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Om(e){var t=Lp.fromString(e);return lp(eg(t)),t}function Pm(e,t){return Am(e.databaseId,t.path)}function Dm(e,t){var n=Om(t);if(n.get(1)!==e.databaseId.projectId)throw new dp(hp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new dp(hp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xp(Fm(n))}function Rm(e,t){return Am(e.databaseId,t)}function Lm(e){var t=Om(e);return 4===t.length?Lp.emptyPath():Fm(t)}function Mm(e){return new Lp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fm(e){return lp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Um(e,t,n){return{name:Pm(e,t),fields:n.value.mapValue.fields}}function jm(e,t,n){var r=Dm(e,t.name),i=Nm(t.updateTime),a=new gv({mapValue:{fields:t.fields}}),o=bv.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Vm(e,t){return"found"in t?function(e,t){lp(!!t.found),t.found.name,t.found.updateTime;var n=Dm(e,t.found.name),r=Nm(t.found.updateTime),i=new gv({mapValue:{fields:t.found.fields}});return bv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){lp(!!t.missing),lp(!!t.readTime);var n=Dm(e,t.missing),r=Nm(t.readTime);return bv.newNoDocument(n,r)}(e,t):cp()}function Bm(e,t){var n;if(t instanceof jy)n={update:Um(e,t.key,t.value)};else if(t instanceof Ky)n={delete:Pm(e,t.key)};else if(t instanceof Vy)n={update:Um(e,t.key,t.data),updateMask:Zm(t.fieldMask)};else{if(!(t instanceof Hy))return cp();n={verify:Pm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof wy)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ey)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sy)return{fieldPath:t.field.canonicalString(),increment:n.k};throw cp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cp()}(e,t.precondition)),n}function qm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Oy.updateTime(Nm(e.updateTime)):void 0!==e.exists?Oy.exists(e.exists):Oy.none()}(t.currentDocument):Oy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)lp("REQUEST_TIME"===t.setToServerValue),n=new wy;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new xy(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ey(i)}else"increment"in t?n=new Sy(e,t.increment):cp();var a=Fp.fromServerFormat(t.fieldPath);return new Ny(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Dm(e,t.update.name),a=new gv({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Up(t.map((function(e){return Fp.fromServerFormat(e)})))}(t.updateMask);return new Vy(i,a,o,n,r)}return new jy(i,a,n,r)}if(t.delete){var u=Dm(e,t.delete);return new Ky(u,n)}if(t.verify){var s=Dm(e,t.verify);return new Hy(s,n)}return cp()}function zm(e,t){return{documents:[Rm(e,t.path)]}}function Wm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Rm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Rm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(hv(e.value))return{unaryFilter:{field:$m(e.field),op:"IS_NAN"}};if(fv(e.value))return{unaryFilter:{field:$m(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hv(e.value))return{unaryFilter:{field:$m(e.field),op:"IS_NOT_NAN"}};if(fv(e.value))return{unaryFilter:{field:$m(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$m(e.field),op:Qm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:$m(e.field),direction:Hm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||$p(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Gm(e){var t=Lm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){lp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Km(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Kv(Ym(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return $p(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Gv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Gv(n,t)}(n.endAt)),Jv(t,i,u,o,s,"F",c,l)}function Km(e){return e?void 0!==e.unaryFilter?[Xm(e)]:void 0!==e.fieldFilter?[Jm(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Km(e)})).reduce((function(e,t){return e.concat(t)})):cp():[]}function Hm(e){return _m[e]}function Qm(e){return Em[e]}function $m(e){return{fieldPath:e.canonicalString()}}function Ym(e){return Fp.fromServerFormat(e.fieldPath)}function Jm(e){return Mv.create(Ym(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cp()}}(e.fieldFilter.op),e.fieldFilter.value)}function Xm(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ym(e.unaryFilter.field);return Mv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ym(e.unaryFilter.field);return Mv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ym(e.unaryFilter.field);return Mv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ym(e.unaryFilter.field);return Mv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return cp()}}function Zm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function eg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function tg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=rg(t)),t=ng(e.get(n),t);return rg(t)}function ng(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function rg(e){return e+"\x01\x01"}function ig(e){var t=e.length;if(lp(t>=2),2===t)return lp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Lp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&cp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:cp()}a=o+2}return new Lp(r)}var ag=["userId","batchId"];function og(e,t){return[e,tg(t)]}function ug(e,t,n){return[e,tg(t),n]}var sg={},cg=["prefixPath","collectionGroup","readTime","documentId"],lg=["prefixPath","collectionGroup","documentId"],fg=["collectionGroup","readTime","prefixPath","documentId"],hg=["canonicalId","targetId"],dg=["targetId","path"],pg=["path","targetId"],vg=["collectionId","parent"],yg=["indexId","uid"],mg=["uid","sequenceNumber"],gg=["indexId","uid","arrayValue","directionalValue","documentKey"],kg=["indexId","uid","documentKey"],bg=["userId","collectionPath","documentId"],wg=["userId","collectionPath","largestBatchId"],xg=["userId","collectionGroup","largestBatchId"],_g=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Eg=[].concat(mt(_g),["documentOverlays"]),Ig=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sg=[].concat(Ig,["indexConfiguration","indexState","indexEntries"]),Tg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cg=function(){function e(){_e(this,e),this.onCommittedListeners=[]}return Ie(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Ng=function(){function e(t){var n=this;_e(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ie(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&cp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Se(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Ag=function(){function e(t,n){var r=this;_e(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new pp,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Dg(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Ug(e.target.error);r.At.reject(new Dg(t,n))}}return Ie(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(ap("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Lg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Dg(n,t)}}}]),e}(),Og=function(){function e(t,n,r){_e(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(We())&&op("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ie(e,[{key:"Nt",value:function(){var e=x(A().mark((function e(t){var n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ap("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Dg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new dp(hp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new dp(hp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Dg(t,n))},i.onupgradeneeded=function(e){ap("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){ap("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=x(A().mark((function e(t,n,r,i){var a,o,u,s,c=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(A().mark((function e(){var n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Ag.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Ng.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,ap("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ap("SimpleDb","Removing database:",e),Mg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Ye())return!1;if(e.St())return!0;var t=We(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Pg=function(){function e(t){_e(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return Ie(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Mg(this.Ft.delete())}}]),e}(),Dg=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,hp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ie(n)}(dp);function Rg(e){return"IndexedDbTransactionError"===e.name}var Lg=function(){function e(t){_e(this,e),this.store=t}return Ie(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ap("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ap("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Mg(n)}},{key:"add",value:function(e){return ap("SimpleDb","ADD",this.store.name,e,e),Mg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Mg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ap("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ap("SimpleDb","DELETE",this.store.name,e),Mg(this.store.delete(e))}},{key:"count",value:function(){return ap("SimpleDb","COUNT",this.store.name),Mg(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Gt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ng((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Kt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ng((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){ap("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Gt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Gt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Ng((function(n,r){t.onerror=function(e){var t=Ug(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Gt",value:function(e,t){var n=[];return new Ng((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Pg(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ng){var u=o.catch((function(e){return a.done(),Ng.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Ng.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Mg(e){return new Ng((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ug(e.target.error);n(t)}}))}var Fg=!1;function Ug(e){var t=Og.Vt(We());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new dp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Fg||(Fg=!0,setTimeout((function(){throw r}),0)),r}}return e}var jg=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return Ie(n)}(Cg);function Vg(e,t){var n=fp(e);return Og.xt(n.Ht,t)}var Bg=function(){function e(t,n,r,i){_e(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ie(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ry(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Se(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Ly(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Se(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Ly(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ap.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),fm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Tp(this.mutations,e.mutations,(function(e,t){return Fy(e,t)}))&&Tp(this.baseMutations,e.baseMutations,(function(e,t){return Fy(e,t)}))}}]),e}(),qg=function(){function e(t,n,r,i){_e(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ie(e,null,[{key:"from",value:function(t,n,r){lp(t.mutations.length===r.length);for(var i=cm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),zg=function(){function e(t,n){_e(this,e),this.largestBatchId=t,this.mutation=n}return Ie(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Wg=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ap.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ap.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:jp.EMPTY_BYTE_STRING;_e(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ie(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Gg=Ie((function e(t){_e(this,e),this.Jt=t}));function Kg(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Pm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sm(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Qg(t.version)};else{if(!t.isUnknownDocument())return cp();r.unknownDocument={path:n.path.toArray(),version:Qg(t.version)}}return r}function Hg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Qg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $g(e){var t=new Np(e.seconds,e.nanoseconds);return Ap.fromTimestamp(t)}function Yg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return qm(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return qm(e.Jt,t)})),u=Np.fromMillis(t.localWriteTimeMs);return new Bg(t.batchId,u,n,o)}function Jg(e){var t,n,r=$g(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?$g(e.lastLimboFreeSnapshotVersion):Ap.min();return void 0!==e.query.documents?(lp(1===(n=e.query).documents.length),t=ay(Xv(Lm(n.documents[0])))):t=function(e){return ay(Gm(e))}(e.query),new Wg(t,e.targetId,0,e.lastListenSequenceNumber,r,i,jp.fromBase64String(e.resumeToken))}function Xg(e,t){var n,r=Qg(t.snapshotVersion),i=Qg(t.lastLimboFreeSnapshotVersion);n=Rv(t.target)?zm(e.Jt,t.target):Wm(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Zg(e){var t=Gm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?oy(t,t.limit,"L"):t}function ek(e,t){return new zg(t.largestBatchId,qm(e.Jt,t.overlayMutation))}function tk(e,t){var n=t.path.lastSegment();return[e,tg(t.path.popLast()),n]}var nk=function(){function e(){_e(this,e)}return Ie(e,[{key:"getBundleMetadata",value:function(e,t){return rk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:$g(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return rk(e).put({bundleId:(n=t).id,createTime:Qg(Nm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ik(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Zg(t.bundledQuery),readTime:$g(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ik(e).put(function(e){return{name:e.name,readTime:Qg(Nm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function rk(e){return Vg(e,"bundles")}function ik(e){return Vg(e,"namedQueries")}var ak=function(){function e(t,n){_e(this,e),this.M=t,this.userId=n}return Ie(e,[{key:"getOverlay",value:function(e,t){var n=this;return ok(e).get(tk(this.userId,t)).next((function(e){return e?ek(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new zg(t,a);i.push(r.Xt(e,o))})),Ng.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(tg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ok(e).Qt("collectionPathOverlayIndex",i))})),Ng.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=sm(),a=tg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ok(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=Se(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ek(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=sm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ok(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ek(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return ok(e).put(function(e,t,n){var r=T(tk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Bm(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ok(e){return Vg(e,"documentOverlays")}var uk=function(){function e(){_e(this,e)}return Ie(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(qp(e.integerValue));else if("doubleValue"in e){var n=qp(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Yp(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(zp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?vv(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):cp()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Xp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function sk(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ck(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=sk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}uk.fe=new uk;var lk=function(){function e(){_e(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ie(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=Se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=Se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=ck(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=ck(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),fk=function(){function e(t){_e(this,e),this.De=t}return Ie(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),hk=function(){function e(t){_e(this,e),this.De=t}return Ie(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),dk=function(){function e(){_e(this,e),this.De=new lk,this.Ce=new fk(this.De),this.xe=new hk(this.De)}return Ie(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),pk=function(){function e(t,n,r,i){_e(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ie(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function vk(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=yk(e.arrayValue,t.arrayValue))?n:0!==(n=yk(e.directionalValue,t.directionalValue))?n:Xp.comparator(e.documentKey,t.documentKey)}function yk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var mk=function(){function e(t){_e(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=Se(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ie(e,[{key:"$e",value:function(e){var t=xv(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=_v(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=Se(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),gk=function(){function e(){_e(this,e),this.qe=new kk}return Ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Ng.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ng.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ng.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ng.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ng.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Ng.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Ng.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ng.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Ng.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ng.resolve()}}]),e}(),kk=function(){function e(){_e(this,e),this.index={}}return Ie(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tm(Lp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new tm(Lp.comparator)).toArray()}}]),e}(),bk=new Uint8Array(0),wk=function(){function e(t){_e(this,e),this.user=t,this.Ge=new kk,this.Ke=new Jy((function(e){return Pv(e)}),(function(e,t){return Dv(e,t)})),this.uid=t.uid||""}return Ie(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ge.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ge.add(t)}));var a={collectionId:r,parent:tg(i)};return xk(e).put(a)}return Ng.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Cp(t),""],!1,!0);return xk(e).qt(r).next((function(e){var r,i=Se(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(ig(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Ek(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Ek(e),r=Ik(e),i=_k(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=_k(e),i=!0,a=new Map;return Ng.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=fm();return Ng.forEach(a,(function(i,a){var o;ap("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Pv(t)));var u=function(e,t){var n=xv(t);if(void 0===n)return null;var r,i=Se(Lv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=Se(_v(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Se(Lv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=Se(_v(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=Se(Lv(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?ev:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?sv(Qp.empty(),Xp.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:cp();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=ev}yv(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.startAt.position[v];yv(c,y)===y&&(c=y,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new Gv(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=Se(_v(t));try{for(o.s();!(n=o.n()).done;){var u,s=n.value,c=void 0,l=!0,f=Se(Lv(e,s.fieldPath));try{for(f.s();!(u=f.n()).done;){var h=u.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?sv(Qp.empty(),Xp.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Zp:cp(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=Zp}mv(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(s.fieldPath)){var y=e.endAt.position[v];mv(c,y)===y&&(c=y,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new Gv(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,s),p=n.ze(i.indexId,u,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return Ng.forEach(p,(function(n){return r.Kt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new Xp(ig(t.documentKey)))}))}))}))})).next((function(){return e}))}return Ng.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):bk,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,mt(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new pk(e,Xp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new pk(e,Xp.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new pk(e,Xp.empty(),bk,bk)}},{key:"getFieldIndex",value:function(e,t){var n=new mk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new dk,i=Se(_v(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);uk.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new dk;return uk.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new dk);var i,a=0,o=Se(_v(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Se(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.tn(t,s.fieldPath)&&lv(c))r=this.en(r,s,c);else{var h=f.Ne(s.kind);uk.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=mt(e),a=[],o=Se(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Se(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new dk;f.seed(l.Se()),uk.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Mv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Ek(e),i=Ik(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Ng.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Iv(t.sequenceNumber,new Cv($g(t.readTime),new Xp(ig(t.documentKey)),t.largestBatchId)):Iv.empty(),r=e.fields.map((function(e){var t=T(e,2),n=t[0],r=t[1];return new Ev(Fp.fromServerFormat(n),r)}));return new wv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Sp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Ek(e),a=Ik(e);return this.sn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ng.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Qg(r.readTime),documentKey:tg(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ng.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ng.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ng.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?Ng.resolve():n.un(e,i,t,a)}))}))}))}))}},{key:"an",value:function(e,t,n){return _k(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:tg(t.key.path)})}},{key:"cn",value:function(e,t,n){return _k(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,tg(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=_k(e),i=new tm(vk);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,tg(t.path)])},(function(e,r){i=i.add(new pk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new tm(vk),r=this.Ze(t,e);if(null==r)return n;var i=xv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(lv(a)){var o,u=Se(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new pk(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new pk(t.indexId,e.key,bk,r));return n}},{key:"un",value:function(e,t,n,r){var i=this;ap("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=rm(a),s=rm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=rm(o)):l?(i(u),u=rm(a)):(u=rm(a),s=rm(o))}}(n,r,vk,(function(n){a.push(i.an(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),Ng.waitFor(a)}},{key:"sn",value:function(e){var t=1;return Ik(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return vk(e,t)})).filter((function(e,t,n){return!t||0!==vk(e,n[t-1])}));var r=[];r.push(e);var i,a=Se(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=vk(o,e),s=vk(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function xk(e){return Vg(e,"collectionParents")}function _k(e){return Vg(e,"indexEntries")}function Ek(e){return Vg(e,"indexConfiguration")}function Ik(e){return Vg(e,"indexState")}var Sk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tk=function(){function e(t,n,r){_e(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ie(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ck(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){lp(1===u)})));var c,l=[],f=Se(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ug(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Ng.waitFor(a).next((function(){return l}))}function Nk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw cp();t=e.noDocument}return JSON.stringify(t).length}Tk.DEFAULT_COLLECTION_PERCENTILE=10,Tk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tk.DEFAULT=new Tk(41943040,Tk.DEFAULT_COLLECTION_PERCENTILE,Tk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tk.DISABLED=new Tk(-1,0,0);var Ak=function(){function e(t,n,r,i){_e(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return Ie(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pk(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Dk(e),o=Pk(e);return o.add({}).next((function(u){lp("number"==typeof u);var s,c=new Bg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Bm(e.Jt,t)})),i=n.mutations.map((function(t){return Bm(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new tm((function(e,t){return Sp(e.canonicalString(),t.canonicalString())})),d=Se(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=ug(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,sg))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[u]=c.keys()})),Ng.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Pk(e).get(t).next((function(e){return e?(lp(e.userId===n.userId),Yg(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?Ng.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Pk(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(lp(t.batchId>=r),a=Yg(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pk(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pk(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Yg(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=og(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Dk(e).Wt({range:i},(function(r,i,o){var u=T(r,3),s=u[0],c=u[1],l=u[2],f=ig(c);if(s===n.userId&&t.path.isEqual(f))return Pk(e).get(l).next((function(e){if(!e)throw cp();lp(e.userId===n.userId),a.push(Yg(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tm(Sp),i=[];return t.forEach((function(t){var a=og(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Dk(e).Wt({range:o},(function(e,i,a){var o=T(e,3),u=o[0],s=o[1],c=o[2],l=ig(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Ng.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=og(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new tm(Sp);return Dk(e).Wt({range:o},(function(e,t,a){var o=T(e,3),s=o[0],c=o[1],l=o[2],f=ig(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.fn(e,u)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Pk(e).get(t).next((function(e){if(null===e)throw cp();lp(e.userId===n.userId),r.push(Yg(n.M,e))})))})),Ng.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ck(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),Ng.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ng.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Dk(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=ig(e[1]);i.push(a)}else r.done()})).next((function(){lp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Ok(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return Rk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return lp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Ok(e,t,n){var r=og(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Dk(e).Wt({range:a,jt:!0},(function(e,n,r){var a=T(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Pk(e){return Vg(e,"mutations")}function Dk(e){return Vg(e,"documentMutations")}function Rk(e){return Vg(e,"mutationQueues")}var Lk=function(){function e(t){_e(this,e),this.wn=t}return Ie(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),Mk=function(){function e(t,n){_e(this,e),this.referenceDelegate=t,this.M=n}return Ie(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new Lk(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return Ap.fromTimestamp(new Np(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Fk(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return lp(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Fk(e).Wt((function(o,u){var s=Jg(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ng.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Fk(e).Wt((function(e,n){var r=Jg(n);t(r)}))}},{key:"yn",value:function(e){return Uk(e).get("targetGlobalKey").next((function(e){return lp(null!==e),e}))}},{key:"pn",value:function(e,t){return Uk(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return Fk(e).put(Xg(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Pv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Fk(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Jg(n);Dv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=jk(e);return t.forEach((function(t){var o=tg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ng.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=jk(e);return Ng.forEach(t,(function(t){var a=tg(t.path);return Ng.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=jk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=jk(e),i=fm();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=ig(e[1]),a=new Xp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=tg(t.path),r=IDBKeyRange.bound([n],[Cp(n)],!1,!0),i=0;return jk(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=T(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Fk(e).get(t).next((function(e){return e?Jg(e):null}))}}]),e}();function Fk(e){return Vg(e,"targets")}function Uk(e){return Vg(e,"targetGlobal")}function jk(e){return Vg(e,"targetDocuments")}function Vk(e){return Bk.apply(this,arguments)}function Bk(){return Bk=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===hp.FAILED_PRECONDITION&&t.message===Tg){e.next=2;break}throw t;case 2:ap("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Bk.apply(this,arguments)}function qk(e,t){var n=T(e,2),r=n[0],i=n[1],a=T(t,2),o=a[0],u=a[1],s=Sp(r,o);return 0===s?Sp(i,u):s}var zk=function(){function e(t){_e(this,e),this.En=t,this.buffer=new tm(qk),this.An=0}return Ie(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();qk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Wk=function(){function e(t,n){_e(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return Ie(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;ap("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Rg(n.t0)){n.next=12;break}ap("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Vk(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Gk=function(){function e(t,n){_e(this,e),this.Sn=t,this.params=n}return Ie(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ng.resolve(_p.A);var r=new zk(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ap("LruGarbageCollector","Garbage collection skipped; disabled"),Ng.resolve(Sk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ap("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Sk):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ap("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ip()<=xt.DEBUG&&ap("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ng.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Kk=function(){function e(t,n){_e(this,e),this.db=t,this.garbageCollector=function(e,t){return new Gk(e,t)}(this,n)}return Ie(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Hk(e,n)}},{key:"removeReference",value:function(e,t,n){return Hk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Hk(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return Rk(e).zt((function(r){return Ok(e,r,t).next((function(e){return e&&(n=!0),Ng.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,u){if(u<=t){var s=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ap.min()),jk(e).delete([0,tg(o.path)])}))}));i.push(s)}})).next((function(){return Ng.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Hk(e,t)}},{key:"kn",value:function(e,t){var n,r=jk(e),i=_p.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=T(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==_p.A&&t(new Xp(ig(n)),i),i=s,n=u):i=_p.A})).next((function(){i!==_p.A&&t(new Xp(ig(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Hk(e,t){return jk(e).put(function(e,t){return{targetId:0,path:tg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Qk=function(){function e(){_e(this,e),this.changes=new Jy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ie(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,bv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ng.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),$k=function(){function e(t){_e(this,e),this.M=t}return Ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Xk(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Xk(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Hg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=bv.newInvalidDocument(t);return Xk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Zk(t))},(function(e,i){r=n.Fn(t,i)})).next((function(){return r}))}},{key:"$n",value:function(e,t){var n=this,r={size:0,document:bv.newInvalidDocument(t)};return Xk(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Zk(t))},(function(e,i){r={document:n.Fn(t,i),size:Nk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=am();return this.Bn(e,t,(function(e,t){var i=n.Fn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=am(),i=new Xy(Xp.comparator);return this.Bn(e,t,(function(e,t){var a=n.Fn(e,t);r=r.insert(e,a),i=i.insert(e,Nk(t))})).next((function(){return{documents:r,Un:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return Ng.resolve();var r=new tm(tb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Zk(r.first()),Zk(r.last())),a=r.getIterator(),o=a.getNext();return Xk(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Xp.fromSegments([].concat(mt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&tb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Zk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Hg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xk(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=am(),i=Se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Fn(Xp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=am(),o=eb(t,n),u=eb(t,Cv.max());return Xk(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Fn(Xp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Yk(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Jk(e).get("remoteDocumentGlobalKey").next((function(e){return lp(!!e),e}))}},{key:"On",value:function(e,t){return Jk(e).put("remoteDocumentGlobalKey",t)}},{key:"Fn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=jm(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Xp.fromSegments(t.noDocument.path),i=$g(t.noDocument.readTime);n=bv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return cp();var a=Xp.fromSegments(t.unknownDocument.path),o=$g(t.unknownDocument.version);n=bv.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Np(e[0],e[1]);return Ap.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Ap.min()))return n}return bv.newInvalidDocument(e)}}]),e}(),Yk=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this)).qn=e,i.trackRemovals=r,i.Gn=new Jy((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new tm((function(e,t){return Sp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.qn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Kg(t.qn.M,o);i=i.add(a.path.popLast());var c=Nk(s);r+=c-u.size,n.push(t.qn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Kg(t.qn.M,o.convertToNoDocument(Ap.min()));n.push(t.qn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.qn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.qn.updateMetadata(e,r)),Ng.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.qn.$n(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.qn.Ln(e,t).next((function(e){var t=e.documents;return e.Un.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Qk);function Jk(e){return Vg(e,"remoteDocumentGlobal")}function Xk(e){return Vg(e,"remoteDocumentsV14")}function Zk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function eb(e,t){var n=t.documentKey.path.toArray();return[e,Hg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tb(e,t){var n=e.path.length-t.path.length;return 0!==n?n:Xp.comparator(e,t)}var nb=function(){function e(t){_e(this,e),this.M=t}return Ie(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Ag("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ag,{unique:!0}),e.createObjectStore("documentMutations")}(e),rb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ng.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),rb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ap.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ag,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ng.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Kn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:bg});t.createIndex("collectionPathOverlayIndex",wg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",xg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:cg});t.createIndex("documentKeyIndex",lg),t.createIndex("collectionGroupIndex",fg)}(e)})).next((function(){return i.Hn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:yg}).createIndex("sequenceNumberIndex",mg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gg}).createIndex("documentKeyIndex",kg,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Nk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Kn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Ng.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Ng.forEach(r,(function(r){lp(r.userId===n.userId);var i=Yg(t.M,r);return Ck(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Lp(n),o=function(e){return[0,tg(e)]}(a);r.push(t.get(o).next((function(n){return n?Ng.resolve():function(n){return t.put({targetId:0,path:tg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ng.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:vg});var n=t.store("collectionParents"),r=new kk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:tg(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Lp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=T(e,3),r=(n[0],n[1]),a=(n[2],ig(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Jg(r),a=Xg(t.M,i);return n.put(a)}))}},{key:"Hn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Xp(Lp.fromString(i.document.name).popFirst(5)):i.noDocument?Xp.fromSegments(i.noDocument.path):i.unknownDocument?Xp.fromSegments(i.unknownDocument.path):cp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ng.waitFor(r)}))}}]),e}();function rb(e){e.createObjectStore("targetDocuments",{keyPath:dg}).createIndex("documentTargetsIndex",pg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hg,{unique:!0}),e.createObjectStore("targetGlobal")}var ib="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ab=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(_e(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Jn=a,this.window=o,this.document=u,this.Yn=c,this.Xn=l,this.Zn=f,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=function(e){return Promise.resolve()},!e.vt())throw new dp(hp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kk(this,i),this.cs=n+"main",this.M=new Gg(s),this.hs=new Og(this.cs,this.Zn,new nb(this.M)),this.ls=new Mk(this.referenceDelegate,this.M),this.fs=function(e){return new $k(e)}(this.M),this.ds=new nk,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===l&&op("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ie(e,[{key:"start",value:function(){var e=this;return this.ws().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new dp(hp.FAILED_PRECONDITION,ib);return e.gs(),e.ys(),e.ps(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ls.getHighestSequenceNumber(t)}))})).then((function(t){e.ts=new _p(t,e.Yn)})).then((function(){e.es=!0})).catch((function(t){return e.hs&&e.hs.close(),Promise.reject(t)}))}},{key:"Is",value:function(e){var t=this;return this.us=function(){var n=x(A().mark((function n(r){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.hs.Ot(function(){var t=x(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ws();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ws",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return ub(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ts(t).next((function(t){t||(e.isPrimary=!1,e.Jn.enqueueRetryable((function(){return e.us(!1)})))}))})).next((function(){return e.Es(t)})).next((function(n){return e.isPrimary&&!n?e.As(t).next((function(){return!1})):!!n&&e.Rs(t).next((function(){return!0}))}))})).catch((function(t){if(Rg(t))return ap("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ap("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Jn.enqueueRetryable((function(){return e.us(t)})),e.isPrimary=t}))}},{key:"Ts",value:function(e){var t=this;return ob(e).get("owner").next((function(e){return Ng.resolve(t.bs(e))}))}},{key:"Ps",value:function(e){return ub(e).delete(this.clientId)}},{key:"Vs",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vs(this.os,18e5)){e.next=6;break}return this.os=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Vg(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ss(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ng.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._s){n=Se(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._s.removeItem(this.Ds(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ps",value:function(){var e=this;this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ws().then((function(){return e.Vs()})).then((function(){return e.ps()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Es",value:function(e){var t=this;return this.Xn?Ng.resolve(!0):ob(e).get("owner").next((function(n){if(null!==n&&t.vs(n.leaseTimestampMs,5e3)&&!t.Cs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new dp(hp.FAILED_PRECONDITION,ib);return!1}}return!(!t.networkEnabled||!t.inForeground)||ub(e).qt().next((function(e){return void 0===t.Ss(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ap("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=x(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.es=!1,this.xs(),this.rs&&(this.rs.cancel(),this.rs=null),this.Ns(),this.ks(),e.next=7,this.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new jg(e,_p.A);return t.As(n).next((function(){return t.Ps(n)}))}));case 7:this.hs.close(),this.Ms();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ss",value:function(e,t){var n=this;return e.filter((function(e){return n.vs(e.updateTimeMs,t)&&!n.Cs(e.clientId)}))}},{key:"Os",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return ub(t).qt().next((function(t){return e.Ss(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.es}},{key:"getMutationQueue",value:function(e,t){return Ak.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getIndexManager",value:function(e){return new wk(e)}},{key:"getDocumentOverlayCache",value:function(e){return ak.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ap("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.Zn)?Sg:13===i?Ig:12===i?Eg:11===i?_g:void cp();return this.hs.runTransaction(e,o,u,(function(i){return a=new jg(i,r.ts?r.ts.next():_p.A),"readwrite-primary"===t?r.Ts(a).next((function(e){return!!e||r.Es(a)})).next((function(t){if(!t)throw op("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Jn.enqueueRetryable((function(){return r.us(!1)})),new dp(hp.FAILED_PRECONDITION,Tg);return n(a)})).next((function(e){return r.Rs(a).next((function(){return e}))})):r.Fs(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Fs",value:function(e){var t=this;return ob(e).get("owner").next((function(e){if(null!==e&&t.vs(e.leaseTimestampMs,5e3)&&!t.Cs(e.ownerId)&&!t.bs(e)&&!(t.Xn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new dp(hp.FAILED_PRECONDITION,ib)}))}},{key:"Rs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ob(e).put("owner",t)}},{key:"As",value:function(e){var t=this,n=ob(e);return n.get("owner").next((function(e){return t.bs(e)?(ap("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ng.resolve()}))}},{key:"vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(op("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gs",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=function(){e.Jn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ws()}))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ns",value:function(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}},{key:"ys",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=function(){t.xs(),!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Jn.enterRestrictedMode(!0),t.Jn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ns))}},{key:"ks",value:function(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}},{key:"Cs",value:function(e){var t;try{var n=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return ap("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return op("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xs",value:function(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(el){op("Failed to set zombie client id.",el)}}},{key:"Ms",value:function(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(el){}}},{key:"Ds",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Og.vt()}}]),e}();function ob(e){return Vg(e,"owner")}function ub(e){return Vg(e,"clientMetadata")}function sb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var cb=function(){function e(t,n,r){_e(this,e),this.fs=t,this.$s=n,this.indexManager=r}return Ie(e,[{key:"Bs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.fs.getEntry(e,t).next((function(e){var t,r=Se(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Us",value:function(e,t){e.forEach((function(e,n){var r,i=Se(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"qs",value:function(e,t){var n=this;return this.fs.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Us(t,e)}))}},{key:"Ks",value:function(e,t,n){return function(e){return Xp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):ry(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new Xp(t)).next((function(e){var t=um();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=um();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ng.forEach(o,(function(o){var u=function(e,t){return new Yv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.fs.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.$s.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=Se(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=Se(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=bv.newInvalidDocument(s),r=r.insert(s,c)),Ly(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){ly(t,n)||(r=r.remove(e))})),r}))}}]),e}(),lb=function(){function e(t,n,r,i){_e(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return Ie(e,null,[{key:"Js",value:function(t,n){var r,i=fm(),a=fm(),o=Se(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fb=function(){function e(){_e(this,e)}return Ie(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Ks",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Ap.min())?this.Zs(e,t):this.Xs.qs(e,r).next((function(a){var o=i.ti(t,a);return(Zv(t)||ey(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(ip()<=xt.DEBUG&&ap("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),cy(t)),i.Xs.Ks(e,t,Sv(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new tm(hy(e));return t.forEach((function(t,r){ly(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return ip()<=xt.DEBUG&&ap("QueryEngine","Using full collection scan to execute query:",cy(t)),this.Xs.Ks(e,t,Cv.min())}}]),e}(),hb=function(){function e(t,n,r,i){_e(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new Xy(Sp),this.ii=new Jy((function(e){return Pv(e)}),Dv),this.ri=new Map,this.oi=t.getRemoteDocumentCache(),this.ls=t.getTargetCache(),this.ds=t.getBundleCache(),this.ui(r)}return Ie(e,[{key:"ui",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new cb(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function db(e,t,n,r){return new hb(e,t,n,r)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return vb=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.$s.getAllMutationBatches(e).next((function(i){return t=i,r.ui(n),r.$s.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=fm(),s=Se(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Se(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Se(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Se(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ai.qs(e,u).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function yb(e,t){var n=fp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ng.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);lp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.$s.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}function mb(e){var t=fp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ls.getLastRemoteSnapshotVersion(e)}))}function gb(e,t){var n=fp(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.ls.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.ls.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(jp.EMPTY_BYTE_STRING,Ap.min()).withLastLimboFreeSnapshotVersion(Ap.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.ls.updateTargetData(e,c))}}));var u=am();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(kb(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Ap.min())){var s=n.ls.getLastRemoteSnapshotVersion(e).next((function(t){return n.ls.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Ng.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ai.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.si=i,e}))}function kb(e,t,n){var r=fm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=am();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Ap.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ap("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function bb(e,t){var n=fp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t)}))}function wb(e,t){var n=fp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ls.getTargetData(e,t).next((function(i){return i?(r=i,Ng.resolve(r)):n.ls.allocateTargetId(e).next((function(i){return r=new Wg(t,i,0,e.currentSequenceNumber),n.ls.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function xb(e,t,n){return _b.apply(this,arguments)}function _b(){return _b=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fp(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Rg(e.t1)){e.next=12;break}throw e.t1;case 12:ap("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),_b.apply(this,arguments)}function Eb(e,t,n){var r=fp(e),i=Ap.min(),a=fm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=fp(e),i=r.ii.get(n);return void 0!==i?Ng.resolve(r.si.get(i)):r.ls.getTargetData(t,n)}(r,e,ay(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Ks(e,t,n?i:Ap.min(),n?a:fm())})).next((function(e){return Tb(r,fy(t),e),{documents:e,hi:a}}))}))}function Ib(e,t){var n=fp(e),r=fp(n.ls),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Sb(e,t){var n=fp(e),r=n.ri.get(t)||Ap.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.oi.getAllFromCollectionGroup(e,t,Sv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Tb(n,t,e),e}))}function Tb(e,t,n){var r=Ap.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ri.set(t,r)}function Cb(e,t,n,r){return Nb.apply(this,arguments)}function Nb(){return Nb=x(A().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=fp(t),o=fm(),u=am(),s=Se(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.li(l.metadata.name),l.document&&(o=o.add(f)),(h=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,wb(a,function(e){return ay(Xv(Lp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return kb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.ls.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.ls.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ai.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Nb.apply(this,arguments)}function Ab(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=x(A().mark((function e(t,n){var r,i,a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:fm(),e.next=3,wb(t,ay(Zg(n.bundledQuery)));case 3:return i=e.sent,a=fp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Nm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.ds.saveNamedQuery(e,n);var o=i.withResumeToken(jp.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.ls.updateTargetData(e,o).next((function(){return a.ls.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ls.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}var Pb=function(){function e(t){_e(this,e),this.M=t,this._i=new Map,this.wi=new Map}return Ie(e,[{key:"getBundleMetadata",value:function(e,t){return Ng.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:Nm(n.createTime)}),Ng.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ng.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:Zg(e.bundledQuery),readTime:Nm(e.readTime)}}(t)),Ng.resolve()}}]),e}(),Db=function(){function e(){_e(this,e),this.overlays=new Xy(Xp.comparator),this.mi=new Map}return Ie(e,[{key:"getOverlay",value:function(e,t){return Ng.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Ng.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),Ng.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=sm(),i=t.length+1,a=new Xp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ng.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Xy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=sm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=sm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ng.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new zg(t,n));var a=this.mi.get(t);void 0===a&&(a=fm(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),Rb=function(){function e(){_e(this,e),this.gi=new tm(Lb.yi),this.pi=new tm(Lb.Ii)}return Ie(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Lb(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new Lb(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new Xp(new Lp([])),r=new Lb(n,e),i=new Lb(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new Xp(new Lp([])),n=new Lb(t,e),r=new Lb(t,e+1),i=fm();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Lb(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Lb=function(){function e(t,n){_e(this,e),this.key=t,this.Vi=n}return Ie(e,null,[{key:"yi",value:function(e,t){return Xp.comparator(e.key,t.key)||Sp(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return Sp(e.Vi,t.Vi)||Xp.comparator(e.key,t.key)}}]),e}(),Mb=function(){function e(t,n){_e(this,e),this.indexManager=t,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new tm(Lb.yi)}return Ie(e,[{key:"checkEmpty",value:function(e){return Ng.resolve(0===this.$s.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];var a=new Bg(i,t,n,r);this.$s.push(a);var o,u=Se(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Si=this.Si.add(new Lb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ng.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ng.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return Ng.resolve(this.$s.length>i?this.$s[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ng.resolve(0===this.$s.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return Ng.resolve(this.$s.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Lb(t,0),i=new Lb(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),Ng.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new tm(Sp);return t.forEach((function(e){var t=new Lb(e,0),i=new Lb(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),Ng.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Xp.isDocumentKey(i)||(i=i.child(""));var a=new Lb(new Xp(i),0),o=new tm(Sp);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),Ng.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;lp(0===this.Ni(t.batchId,"removed")),this.$s.shift();var r=this.Si;return Ng.forEach(t.mutations,(function(i){var a=new Lb(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Lb(t,0),r=this.Si.firstAfterOrEqual(n);return Ng.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.$s.length,Ng.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.$s.length?0:e-this.$s[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}]),e}(),Fb=function(){function e(t){_e(this,e),this.ki=t,this.docs=new Xy(Xp.comparator),this.size=0}return Ie(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ng.resolve(n?n.document.mutableCopy():bv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=am();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():bv.newInvalidDocument(e))})),Ng.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=am(),i=new Xp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Nv(Tv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Ng.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){cp()}},{key:"Mi",value:function(e,t){return Ng.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ub(this)}},{key:"getSize",value:function(e){return Ng.resolve(this.size)}}]),e}(),Ub=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this)).qn=e,r}return Ie(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.qn.addEntry(e,i)):t.qn.removeEntry(r)})),Ng.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.qn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.qn.getEntries(e,t)}}]),n}(Qk),jb=function(){function e(t){_e(this,e),this.persistence=t,this.Oi=new Jy((function(e){return Pv(e)}),Dv),this.lastRemoteSnapshotVersion=Ap.min(),this.highestTargetId=0,this.Fi=0,this.$i=new Rb,this.targetCount=0,this.Bi=Lk.mn()}return Ie(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),Ng.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ng.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ng.resolve(this.Fi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),Ng.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),Ng.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new Lk(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,Ng.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),Ng.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,Ng.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ng.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ng.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return Ng.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.$i.Ti(t,n),Ng.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.$i.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ng.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.$i.Ri(t),Ng.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.$i.Pi(t);return Ng.resolve(n)}},{key:"containsKey",value:function(e,t){return Ng.resolve(this.$i.containsKey(t))}}]),e}(),Vb=function(){function e(t,n){var r=this;_e(this,e),this.Li={},this.overlays={},this.ts=new _p(0),this.es=!1,this.es=!0,this.referenceDelegate=t(this),this.ls=new jb(this),this.indexManager=new gk,this.fs=new Fb((function(e){return r.referenceDelegate.Ui(e)})),this.M=new Gg(n),this.ds=new Pb(this.M)}return Ie(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.es=!1,Promise.resolve()}},{key:"started",get:function(){return this.es}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Db,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new Mb(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.ls}},{key:"getRemoteDocumentCache",value:function(){return this.fs}},{key:"getBundleCache",value:function(){return this.ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ap("MemoryPersistence","Starting transaction:",e);var i=new Bb(this.ts.next());return this.referenceDelegate.qi(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ki",value:function(e,t){return Ng.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Bb=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ie(n)}(Cg),qb=function(){function e(t){_e(this,e),this.persistence=t,this.Qi=new Rb,this.ji=null}return Ie(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw cp()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),Ng.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),Ng.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),Ng.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qi",value:function(){this.ji=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ng.forEach(this.zi,(function(r){var i=Xp.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,Ap.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"Ui",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return Ng.or([function(){return Ng.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ki(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function zb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Wb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Gb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Kb=function(){function e(t,n,r,i){_e(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new dp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(op("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Hb=function(){function e(t,n,r){_e(this,e),this.targetId=t,this.state=n,this.error=r}return Ie(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new dp(i.error.code,i.error.message))),a?new e(t,i.state,r):(op("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Qb=function(){function e(t,n){_e(this,e),this.clientId=t,this.activeTargetIds=n}return Ie(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=dm(),o=0;i&&o<r.activeTargetIds.length;++o)i=Jp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(op("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),$b=function(){function e(t,n){_e(this,e),this.clientId=t,this.onlineState=n}return Ie(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(op("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Yb=function(){function e(){_e(this,e),this.activeTargetIds=dm()}return Ie(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jb=function(){function e(t,n,r,i,a){_e(this,e),this.window=t,this.Jn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Xy(Sp),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=zb(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new Yb),this.ar=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return Ie(e,[{key:"start",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Os();case 2:t=e.sent,n=Se(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(zb(this.persistenceKey,i)))&&(o=Qb.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=Se(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Gb(this.persistenceKey,e));if(n){var r=Hb.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Gb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ap("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ap("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ap("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ap("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void op("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable(x(A().mark((function e(){var r,i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.ar.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=_p.A;if(null!=e)try{var n=JSON.parse(e);lp("number"==typeof n),t=n}catch(e){op("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==_p.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new Kb(this.currentUser,e,t,n),i=Wb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=Wb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=Gb(this.persistenceKey,e),i=new Hb(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.ar.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return Qb.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Kb.Ji(new tp(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return Hb.Ji(r,t)}},{key:"wr",value:function(e){return $b.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"vr",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:ap("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=dm();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Xb=function(){function e(){_e(this,e),this.Fr=new Yb,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ie(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new Yb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Zb=function(){function e(){_e(this,e)}return Ie(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ew=function(){function e(){var t=this;_e(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Gr()},this.Kr=[],this.Qr()}return Ie(e,[{key:"Br",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){ap("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Se(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){ap("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Se(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),tw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},nw=function(){function e(t){_e(this,e),this.jr=t.jr,this.Wr=t.Wr}return Ie(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),rw=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ie(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Zd;o.listenOnce(Qd.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Hd.NO_ERROR:var t=o.getResponseJson();ap("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Hd.TIMEOUT:ap("Connection",'RPC "'+e+'" timed out'),a(new dp(hp.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:var n=o.getStatus();if(ap("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(hp).indexOf(t)>=0?t:hp.UNKNOWN}(r.status);a(new dp(u,r.message))}else a(new dp(hp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new dp(hp.UNAVAILABLE,"Connection failed."));break;default:cp()}}finally{ap("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Gd(),a=Kd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Jd({})),this.uo(o.initMessageHeaders,t,n),Ge()||Qe()||We().indexOf("Electron/")>=0||$e()||We().indexOf("MSAppHost/")>=0||He()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ap("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new nw({jr:function(e){l?ap("Connection","Not sending because WebChannel is closed:",e):(c||(ap("Connection","Opening WebChannel transport."),s.open(),c=!0),ap("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Xd.EventType.OPEN,(function(){l||ap("Connection","WebChannel transport opened.")})),h(s,Xd.EventType.CLOSE,(function(){l||(l=!0,ap("Connection","WebChannel transport closed"),f.eo())})),h(s,Xd.EventType.ERROR,(function(e){l||(l=!0,up("Connection","WebChannel transport errored:",e),f.eo(new dp(hp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Xd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];lp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ap("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Wy[e];if(void 0!==t)return Yy(t)}(a),u=i.message;void 0===o&&(o=hp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new dp(o,u)),s.close()}else ap("Connection","WebChannel received:",n),f.no(n)}})),h(a,$d.STAT_EVENT,(function(e){e.stat===Yd.PROXY?ap("Connection","Detected buffering proxy"):e.stat===Yd.NOPROXY&&ap("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){_e(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ie(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);ap("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.ao(e,a,o,n).then((function(e){return ap("RestConnection","Received: ",e),e}),(function(t){throw up("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"co",value:function(e,t,n,r,i){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+np,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=tw[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function iw(){return"undefined"!=typeof window?window:null}function aw(){return"undefined"!=typeof document?document:null}function ow(e){return new Im(e,!0)}var uw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;_e(this,e),this.Jn=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return Ie(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&ap("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),sw=function(){function e(t,n,r,i,a,o,u,s){_e(this,e),this.Jn=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new uw(t,n)}return Ie(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"close",value:function(){var e=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===hp.RESOURCE_EXHAUSTED?(op(n.toString()),op("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===hp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=T(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new dp(hp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.vo=n.Jn.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return ap("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.Jn.enqueueAndForget((function(){return t.Po===e?n():(ap("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),cw=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return _e(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return Ie(n,[{key:"Go",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(lp(void 0===t||"string"==typeof t),jp.fromBase64String(t||"")):(lp(void 0===t||t instanceof Uint8Array),jp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?hp.UNKNOWN:Yy(e.code);return new dp(t,e.message||"")}(o);n=new gm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Dm(e,s.document.name),l=Nm(s.document.updateTime),f=new gv({mapValue:{fields:s.document.fields}}),h=bv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new ym(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Dm(e,v.document),m=v.readTime?Nm(v.readTime):Ap.min(),g=bv.newNoDocument(y,m),k=v.removedTargetIds||[];n=new ym([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Dm(e,b.document),x=b.removedTargetIds||[];n=new ym([],x,w,null)}else{if(!("filter"in t))return cp();t.filter;var _=t.filter;_.targetId;var E=_.count||0,I=new Qy(E),S=_.targetId;n=new mm(S,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Ap.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ap.min():t.readTime?Nm(t.readTime):Ap.min()}(e);return this.listener.Ko(t,n)}},{key:"Qo",value:function(e){var t={};t.database=Mm(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Rv(r)?{documents:zm(e,r)}:{query:Wm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Tm(e,t.resumeToken):t.snapshotVersion.compareTo(Ap.min())>0&&(n.readTime=Sm(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=Mm(this.M),t.removeTarget=e,this.Oo(t)}}]),n}(sw),lw=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return _e(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Wo=!1,s}return Ie(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Cn(Ae(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Go",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(lp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(lp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Nm(e.updateTime):Nm(t);return n.isEqual(Ap.min())&&(n=Nm(t)),new Ay(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Nm(e.commitTime);return this.listener.Jo(n,t)}return lp(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=Mm(this.M),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Bm(t.M,e)}))};this.Oo(n)}}]),n}(sw),fw=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a){var o;return _e(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.Zo=!1,o}return Ie(n,[{key:"tu",value:function(){if(this.Zo)throw new dp(hp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=T(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dp(hp.UNKNOWN,e.toString())}))}},{key:"co",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=T(i,2),o=a[0],u=a[1];return r.bo.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new dp(hp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return Ie((function e(){_e(this,e)}))}()),hw=function(){function e(t,n){_e(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return Ie(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(op(t),this.su=!1):ap("OnlineStateTracker",t)}},{key:"au",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),dw=Ie((function e(t,n,r,i,a){var o=this;_e(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ew(o),!e.t0){e.next=5;break}return ap("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fp(t)).lu.add(4),e.next=4,yw(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,pw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new hw(r,i)}));function pw(e){return vw.apply(this,arguments)}function vw(){return vw=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ew(t)){e.next=18;break}n=Se(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),vw.apply(this,arguments)}function yw(e){return mw.apply(this,arguments)}function mw(){return mw=x(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Se(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),mw.apply(this,arguments)}function gw(e,t){var n=fp(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),_w(n)?xw(n):Zw(n).Co()&&bw(n,t))}function kw(e,t){var n=fp(e),r=Zw(n);n.hu.delete(t),r.Co()&&ww(n,t),0===n.hu.size&&(r.Co()?r.ko():Ew(n)&&n._u.set("Unknown"))}function bw(e,t){e.wu.Z(t.targetId),Zw(e).Qo(t)}function ww(e,t){e.wu.Z(t),Zw(e).jo(t)}function xw(e){e.wu=new bm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.hu.get(t)||null}}),Zw(e).start(),e._u.iu()}function _w(e){return Ew(e)&&!Zw(e).Do()&&e.hu.size>0}function Ew(e){return 0===fp(e).lu.size}function Iw(e){e.wu=void 0}function Sw(e){return Tw.apply(this,arguments)}function Tw(){return Tw=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){bw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Cw(e,t){return Nw.apply(this,arguments)}function Nw(){return Nw=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Iw(t),_w(t)?(t._u.uu(n),xw(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Aw(e,t,n){return Ow.apply(this,arguments)}function Ow(){return Ow=x(A().mark((function e(t,n,r){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof gm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Se(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ap("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Pw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof ym?t.wu.ut(n):n instanceof mm?t.wu._t(n):t.wu.ht(n),r.isEqual(Ap.min())){e.next=29;break}return e.prev=14,e.next=17,mb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(jp.EMPTY_BYTE_STRING,n.snapshotVersion)),ww(e,t);var r=new Wg(n.target,t,1,n.sequenceNumber);bw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ap("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Pw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ow.apply(this,arguments)}function Pw(e,t,n){return Dw.apply(this,arguments)}function Dw(){return Dw=x(A().mark((function e(t,n,r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rg(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,yw(t);case 5:t._u.set("Offline"),r||(r=function(){return mb(t.localStore)}),t.asyncQueue.enqueueRetryable(x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ap("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,pw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}function Rw(e,t){return t().catch((function(n){return Pw(e,n,t)}))}function Lw(e){return Mw.apply(this,arguments)}function Mw(){return Mw=x(A().mark((function e(t){var n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fp(t),r=ex(n),i=n.cu.length>0?n.cu[n.cu.length-1].batchId:-1;case 2:if(!Fw(n)){e.next=19;break}return e.prev=3,e.next=6,bb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.cu.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Uw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Pw(n,e.t0);case 17:e.next=2;break;case 19:jw(n)&&Vw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Mw.apply(this,arguments)}function Fw(e){return Ew(e)&&e.cu.length<10}function Uw(e,t){e.cu.push(t);var n=ex(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function jw(e){return Ew(e)&&!ex(e).Do()&&e.cu.length>0}function Vw(e){ex(e).start()}function Bw(e){return qw.apply(this,arguments)}function qw(){return qw=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ex(t).Xo();case 1:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function zw(e){return Ww.apply(this,arguments)}function Ww(){return Ww=x(A().mark((function e(t){var n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ex(t),r=Se(t.cu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Gw(e,t,n){return Kw.apply(this,arguments)}function Kw(){return Kw=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.cu.shift(),a=qg.from(i,n,r),e.next=3,Rw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Lw(t);case 5:case"end":return e.stop()}}),e)}))),Kw.apply(this,arguments)}function Hw(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=x(A().mark((function e(t,n){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ex(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$y(i=n.code)||i===hp.ABORTED){e.next=7;break}return r=t.cu.shift(),ex(t).No(),e.next=5,Rw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Lw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:jw(t)&&Vw(t);case 5:case"end":return e.stop()}}),e)}))),Qw.apply(this,arguments)}function $w(e,t){return Yw.apply(this,arguments)}function Yw(){return Yw=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=fp(t)).asyncQueue.verifyOperationInProgress(),ap("RemoteStore","RemoteStore received new credentials"),i=Ew(r),r.lu.add(3),e.next=6,yw(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,pw(r);case 12:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}function Jw(e,t){return Xw.apply(this,arguments)}function Xw(){return Xw=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,pw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,yw(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Xw.apply(this,arguments)}function Zw(e){return e.mu||(e.mu=function(e,t,n){var r=fp(e);return r.tu(),new cw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Sw.bind(null,e),Jr:Cw.bind(null,e),Ko:Aw.bind(null,e)}),e.fu.push(function(){var t=x(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),_w(e)?xw(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Iw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function ex(e){return e.gu||(e.gu=function(e,t,n){var r=fp(e);return r.tu(),new lw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{zr:Bw.bind(null,e),Jr:Hw.bind(null,e),Yo:zw.bind(null,e),Jo:Gw.bind(null,e)}),e.fu.push(function(){var t=x(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,Lw(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.cu.length>0&&(ap("RemoteStore","Stopping write stream with ".concat(e.cu.length," pending writes")),e.cu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var tx=function(){function e(t,n,r,i,a){_e(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new pp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ie(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dp(hp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function nx(e,t){if(op("AsyncQueue","".concat(t,": ").concat(e)),Rg(e))return new dp(hp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var rx=function(){function e(t){_e(this,e),this.comparator=t?function(e,n){return t(e,n)||Xp.comparator(e.key,n.key)}:function(e,t){return Xp.comparator(e.key,t.key)},this.keyedMap=um(),this.sortedSet=new Xy(this.comparator)}return Ie(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ix=function(){function e(){_e(this,e),this.yu=new Xy(Xp.comparator)}return Ie(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):cp():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ax=function(){function e(t,n,r,i,a,o,u,s){_e(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ie(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,rx.emptySet(n),a,r,i,!0,!1)}}]),e}(),ox=Ie((function e(){_e(this,e),this.Iu=void 0,this.listeners=[]})),ux=Ie((function e(){_e(this,e),this.queries=new Jy((function(e){return sy(e)}),uy),this.onlineState="Unknown",this.Tu=new Set}));function sx(e,t){return cx.apply(this,arguments)}function cx(){return cx=x(A().mark((function e(t,n){var r,i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ox),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=nx(e.t0,"Initialization of query '".concat(cy(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&px(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),cx.apply(this,arguments)}function lx(e,t){return fx.apply(this,arguments)}function fx(){return fx=x(A().mark((function e(t,n){var r,i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){var n,r=fp(e),i=!1,a=Se(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Se(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&px(r)}function dx(e,t,n){var r=fp(e),i=r.queries.get(t);if(i){var a,o=Se(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function px(e){e.Tu.forEach((function(e){e.next()}))}var vx=function(){function e(t,n,r){_e(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return Ie(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Se(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ax(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),a=!0):this.vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=ax.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),yx=function(){function e(t,n){_e(this,e),this.payload=t,this.byteLength=n}return Ie(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),mx=function(){function e(t){_e(this,e),this.M=t}return Ie(e,[{key:"li",value:function(e){return Dm(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?jm(this.M,e.document,!1):bv.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return Nm(e)}}]),e}(),gx=function(){function e(t,n,r){_e(this,e),this.xu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kx(t)}return Ie(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Lp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new mx(this.M),i=Se(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.li(a.metadata.name),s=Se(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||fm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=x(A().mark((function e(){var t,n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cb(this.localStore,new mx(this.M),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=Se(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ab(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function kx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var bx=Ie((function e(t){_e(this,e),this.key=t})),wx=Ie((function e(t){_e(this,e),this.key=t})),xx=function(){function e(t,n){_e(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=fm(),this.mutatedKeys=fm(),this.Lu=hy(t),this.Uu=new rx(this.Lu)}return Ie(e,[{key:"qu",get:function(){return this.Fu}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Ku:new ix,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Zv(this.query)&&i.size===this.query.limit?i.last():null,c=ey(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=ly(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Zv(this.query)||ey(this.query))for(;o.size>this.query.limit;){var l=Zv(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Ku:r,ei:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Ku.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cp()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new ax(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new ix,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=fm(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new wx(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new bx(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.hi,this.Bu=fm();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return ax.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),_x=Ie((function e(t,n,r){_e(this,e),this.query=t,this.targetId=n,this.view=r})),Ex=Ie((function e(t){_e(this,e),this.key=t,this.Xu=!1})),Ix=function(){function e(t,n,r,i,a,o){_e(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.ta=new Jy((function(e){return sy(e)}),uy),this.ea=new Map,this.na=new Set,this.sa=new Xy(Xp.comparator),this.ia=new Map,this.ra=new Rb,this.oa={},this.ua=new Map,this.aa=Lk.gn(),this.onlineState="Unknown",this.ca=void 0}return Ie(e,[{key:"isPrimaryClient",get:function(){return!0===this.ca}}]),e}();function Sx(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=x(A().mark((function e(t,n){var r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=k_(t),!(o=r.ta.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,wb(r.localStore,ay(n));case 8:return u=e.sent,r.isPrimaryClient&&gw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Cx(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Cx(e,t,n,r){return Nx.apply(this,arguments)}function Nx(){return Nx=x(A().mark((function e(t,n,r,i){var a,o,u,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.ha=function(e,n,r){return function(){var e=x(A().mark((function e(t,n,r,i){var a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,Eb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",($x(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Eb(t.localStore,n,!0);case 3:return a=e.sent,o=new xx(n,a.hi),u=o.Gu(a.documents),s=vm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),$x(t,r,c.zu),l=new _x(n,r,o),e.abrupt("return",(t.ta.set(n,l),t.ea.has(r)?t.ea.get(r).push(n):t.ea.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Ax(e,t){return Ox.apply(this,arguments)}function Ox(){return Ox=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fp(t),i=r.ta.get(n),!((a=r.ea.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ea.set(i.targetId,a.filter((function(e){return!uy(e,n)}))),void r.ta.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,xb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),kw(r.remoteStore,i.targetId),Hx(r,i.targetId)})).catch(Vk);case 9:e.next=14;break;case 11:return Hx(r,i.targetId),e.next=14,xb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Px(e,t,n){return Dx.apply(this,arguments)}function Dx(){return Dx=x(A().mark((function e(t,n,r){var i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=b_(t),e.prev=1,e.next=4,function(e,t){var n,r=fp(e),i=Np.now(),a=t.reduce((function(e,t){return e.add(t.key)}),fm());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ai.qs(e,a).next((function(a){n=a;var o,u=[],s=Se(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=My(c,n.get(c.key));null!=l&&u.push(new Vy(c.key,l,kv(l.value.mapValue),Oy.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.$s.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oa[e.currentUser.toKey()];r||(r=new Xy(Sp)),r=r.insert(t,n),e.oa[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Xx(i,a.changes);case 9:return e.next=11,Lw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=nx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Dx.apply(this,arguments)}function Rx(e,t){return Lx.apply(this,arguments)}function Lx(){return Lx=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.prev=1,e.next=4,gb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ia.get(t);n&&(lp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?lp(n.Xu):e.removedDocuments.size>0&&(lp(n.Xu),n.Xu=!1))})),e.next=8,Xx(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Vk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Lx.apply(this,arguments)}function Mx(e,t,n){var r=fp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ta.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=fp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Se(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&px(n)}(r.eventManager,t),i.length&&r.Zu.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Fx(e,t,n){return Ux.apply(this,arguments)}function Ux(){return Ux=x(A().mark((function e(t,n,r){var i,a,o,u,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=fp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ia.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Xy(Xp.comparator)).insert(o,bv.newNoDocument(o,Ap.min())),s=fm().add(o),c=new pm(Ap.min(),new Map,new tm(Sp),u,s),e.next=9,Rx(i,c);case 9:i.sa=i.sa.remove(o),i.ia.delete(n),Jx(i),e.next=16;break;case 14:return e.next=16,xb(i.localStore,n,!1).then((function(){return Hx(i,n,r)})).catch(Vk);case 16:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function jx(e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),i=n.batch.batchId,e.prev=1,e.next=4,yb(r.localStore,n);case 4:return a=e.sent,Kx(r,i,null),Gx(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Xx(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Vx.apply(this,arguments)}function Bx(e,t,n){return qx.apply(this,arguments)}function qx(){return qx=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fp(t),e.prev=1,e.next=4,function(e,t){var n=fp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.$s.lookupMutationBatch(e,t).next((function(t){return lp(null!==t),r=t.keys(),n.$s.removeMutationBatch(e,t)})).next((function(){return n.$s.performConsistencyCheck(e)})).next((function(){return n.ai.qs(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Kx(i,n,r),Gx(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Xx(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qx.apply(this,arguments)}function zx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=x(A().mark((function e(t,n){var r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ew((r=fp(t)).remoteStore)||ap("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=fp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.$s.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.ua.get(i)||[]).push(n),r.ua.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=nx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Wx.apply(this,arguments)}function Gx(e,t){(e.ua.get(t)||[]).forEach((function(e){e.resolve()})),e.ua.delete(t)}function Kx(e,t,n){var r=fp(e),i=r.oa[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oa[r.currentUser.toKey()]=i}}function Hx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Se(e.ea.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ta.delete(a),n&&e.Zu.la(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((function(t){e.ra.containsKey(t)||Qx(e,t)}))}function Qx(e,t){e.na.delete(t.path.canonicalString());var n=e.sa.get(t);null!==n&&(kw(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Jx(e))}function $x(e,t,n){var r,i=Se(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof bx?(e.ra.addReference(a.key,t),Yx(e,a)):a instanceof wx?(ap("SyncEngine","Document no longer in limbo: "+a.key),e.ra.removeReference(a.key,t),e.ra.containsKey(a.key)||Qx(e,a.key)):cp()}}catch(o){i.e(o)}finally{i.f()}}function Yx(e,t){var n=t.key,r=n.path.canonicalString();e.sa.get(n)||e.na.has(r)||(ap("SyncEngine","New document in limbo: "+n),e.na.add(r),Jx(e))}function Jx(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){var t=e.na.values().next().value;e.na.delete(t);var n=new Xp(Lp.fromString(t)),r=e.aa.next();e.ia.set(r,new Ex(n)),e.sa=e.sa.insert(n,r),gw(e.remoteStore,new Wg(ay(Xv(n.path)),r,2,_p.A))}}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=x(A().mark((function e(t,n,r){var i,a,o,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fp(t),a=[],o=[],u=[],e.t0=i.ta.isEmpty(),e.t0){e.next=9;break}return i.ta.forEach((function(e,t){u.push(i.ha(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=lb.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Ko(a),e.next=9,function(){var e=x(A().mark((function e(t,n){var r,i,a,o,u,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ng.forEach(n,(function(t){return Ng.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ng.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Rg(e.t0)){e.next=10;break}throw e.t0;case 10:ap("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Se(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.si.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=fp(t)).currentUser.isEqual(n)){e.next=11;break}return ap("SyncEngine","User change. New user:",n.toKey()),e.next=5,pb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.ua.forEach((function(e){e.forEach((function(e){e.reject(new dp(hp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Xx(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),t_.apply(this,arguments)}function n_(e,t){var n=fp(e),r=n.ia.get(t);if(r&&r.Xu)return fm().add(r.key);var i=fm(),a=n.ea.get(t);if(!a)return i;var o,u=Se(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ta.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function r_(e,t){return i_.apply(this,arguments)}function i_(){return i_=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.next=3,Eb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&$x(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=x(A().mark((function e(t,n){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),e.abrupt("return",Sb(r.localStore,n).then((function(e){return Xx(r,e)})));case 2:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(e,t,n,r){return s_.apply(this,arguments)}function s_(){return s_=x(A().mark((function e(t,n,r,i){var a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fp(t),e.next=3,function(e,t){var n=fp(e),r=fp(n.$s);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ai.qs(e,t):Ng.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Lw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Kx(a,n,i||null),Gx(a,n),function(e,t){fp(fp(e).$s).dn(t)}(a.localStore,n)):cp();case 11:return e.next=13,Xx(a,o);case 13:e.next=16;break;case 15:ap("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),s_.apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=x(A().mark((function e(t,n){var r,i,a,o,u,s,c,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k_(r=fp(t)),b_(r),!0!==n||!0===r.ca){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,f_(r,i.toArray());case 5:return a=e.sent,r.ca=!0,e.next=9,Jw(r.remoteStore,!0);case 9:o=Se(a);try{for(o.s();!(u=o.n()).done;)s=u.value,gw(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ca){e.next=25;break}return c=[],l=Promise.resolve(),r.ea.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Hx(r,t),xb(r.localStore,t,!0)})),kw(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,f_(r,c);case 21:return function(e){var t=fp(e);t.ia.forEach((function(e,n){kw(t.remoteStore,n)})),t.ra.bi(),t.ia=new Map,t.sa=new Xy(Xp.comparator)}(r),r.ca=!1,e.next=25,Jw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}function f_(e,t,n){return h_.apply(this,arguments)}function h_(){return h_=x(A().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=fp(t),a=[],o=[],u=Se(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ea.get(c))||0===f.length){e.next=34;break}return e.next=11,wb(i.localStore,ay(f[0]));case 11:l=e.sent,h=Se(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ta.get(p),e.next=20,r_(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Ib(i.localStore,c);case 36:return m=e.sent,e.next=39,wb(i.localStore,m);case 39:return l=e.sent,e.next=42,Cx(i,d_(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),h_.apply(this,arguments)}function d_(e){return Jv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function p_(e){var t=fp(e);return fp(fp(t.localStore).persistence).Os()}function v_(e,t,n,r){return y_.apply(this,arguments)}function y_(){return y_=x(A().mark((function e(t,n,r,i){var a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=fp(t)).ca){e.next=3;break}return e.abrupt("return",void ap("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ea.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Sb(a.localStore,fy(o[0]));case 10:return u=e.sent,s=pm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Xx(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,xb(a.localStore,n,!0);case 17:return Hx(a,n,i),e.abrupt("break",20);case 19:cp();case 20:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}function m_(e,t,n){return g_.apply(this,arguments)}function g_(){return g_=x(A().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=k_(t)).ca){e.next=45;break}a=Se(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ea.has(u)){e.next=10;break}return ap("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Ib(i.localStore,u);case 12:return s=e.sent,e.next=15,wb(i.localStore,s);case 15:return c=e.sent,e.next=18,Cx(i,d_(s),c.targetId,!1);case 18:gw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Se(r),e.prev=30,h=A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ea.has(t),!e.t0){e.next=5;break}return e.next=5,xb(i.localStore,t,!1).then((function(){kw(i.remoteStore,t),Hx(i,t)})).catch(Vk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),g_.apply(this,arguments)}function k_(e){var t=fp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=n_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Fx.bind(null,t),t.Zu.Ko=hx.bind(null,t.eventManager),t.Zu.la=dx.bind(null,t.eventManager),t}function b_(e){var t=fp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Bx.bind(null,t),t}function w_(e,t,n){var r=fp(e);(function(){var e=x(A().mark((function e(t,n,r){var i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=fp(e),r=Nm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(kx(i)),a=new gx(i,t.localStore,n.M),e.next=15,n.fa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Xx(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=fp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(up("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var x_=function(){function e(){_e(this,e),this.synchronizeTabs=!1}return Ie(e,[{key:"initialize",value:function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=ow(t.databaseInfo.databaseId),this.sharedClientState=this.da(t),this.persistence=this._a(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.wa(t),this.localStore=this.ma(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wa",value:function(e){return null}},{key:"ma",value:function(e){return db(this.persistence,new fb,e.initialUser,this.M)}},{key:"_a",value:function(e){return new Vb(qb.Wi,this.M)}},{key:"da",value:function(e){return new Xb}},{key:"terminate",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),__=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this)).ga=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ie(n,[{key:"initialize",value:function(){var e=x(A().mark((function e(t){var r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(Ae(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ga.initialize(this,t);case 4:return e.next=6,b_(this.ga.syncEngine);case 6:return e.next=8,Lw(this.ga.remoteStore);case 8:return e.next=10,this.persistence.Is((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return db(this.persistence,new fb,e.initialUser,this.M)}},{key:"wa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Wk(t,e.asyncQueue)}},{key:"_a",value:function(e){var t=sb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Tk.withCacheSize(this.cacheSizeBytes):Tk.DEFAULT;return new ab(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,iw(),aw(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"da",value:function(e){return new Xb}}]),n}(x_),E_=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r,!1)).ga=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ie(n,[{key:"initialize",value:function(){var e=x(A().mark((function e(t){var r,i=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(Ae(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ga.syncEngine,e.t0=this.sharedClientState instanceof Jb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:u_.bind(null,r),Mr:v_.bind(null,r),Or:m_.bind(null,r),Os:p_.bind(null,r),Nr:a_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Is(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c_(i.ga.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"da",value:function(e){var t=iw();if(!Jb.vt(t))throw new dp(hp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(__),I_=function(){function e(){_e(this,e)}return Ie(e,[{key:"initialize",value:function(){var e=x(A().mark((function e(t,n){var r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Mx(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=e_.bind(null,this.syncEngine),e.next=12,Jw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ux}},{key:"createDatastore",value:function(e){var t,n=ow(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new rw(t));return function(e,t,n,r){return new fw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Mx(o.syncEngine,e,0)},a=ew.vt()?new ew:new Zb,new dw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Ix(e,t,n,r,i,a);return o&&(u.ca=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fp(t),ap("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,yw(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function S_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return x(A().mark((function r(){var i;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var T_=function(){function e(t){_e(this,e),this.observer=t,this.muted=!1}return Ie(e,[{key:"next",value:function(e){this.observer.next&&this.ya(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"pa",value:function(){this.muted=!0}},{key:"ya",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),C_=function(){function e(t,n){var r=this;_e(this,e),this.Ia=t,this.M=n,this.metadata=new pp,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ie(e,[{key:"close",value:function(){return this.Ia.cancel()}},{key:"getMetadata",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fa",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ea",value:function(){var e=x(A().mark((function e(){var t,n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Aa();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ta.decode(t),r=Number(n),isNaN(r)&&this.Ra("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new yx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Aa",value:function(){var e=x(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Pa()<0)){e.next=7;break}return e.next=3,this.Va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Pa())<0&&this.Ra("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Ra("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ra",value:function(e){throw this.Ia.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Va",value:function(){var e=x(A().mark((function e(){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ia.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),N_=function(){function e(t){_e(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ie(e,[{key:"lookup",value:function(){var e=x(A().mark((function e(t){var n,r=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new dp(hp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=x(A().mark((function e(t,n){var r,i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),i=Mm(r.M)+"/documents",a={documents:n.map((function(e){return Pm(r.M,e)}))},e.next=5,r.co("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Vm(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());lp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ky(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=x(A().mark((function e(){var t,n=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Xp.fromPath(t);n.mutations.push(new Hy(r,n.precondition(r)))})),e.next=7,function(){var e=x(A().mark((function e(t,n){var r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fp(t),i=Mm(r.M)+"/documents",a={writes:n.map((function(e){return Bm(r.M,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw cp();t=Ap.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new dp(hp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Oy.updateTime(t):Oy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ap.min()))throw new dp(hp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Oy.updateTime(t)}return Oy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),A_=function(){function e(t,n,r,i){_e(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new uw(this.asyncQueue,"transaction_retry")}return Ie(e,[{key:"run",value:function(){this.va-=1,this.Sa()}},{key:"Sa",value:function(){var e=this;this.So.Io(x(A().mark((function t(){var n,r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new N_(e.datastore),(r=e.Da(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ca(t)}))}))})).catch((function(t){e.Ca(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Da",value:function(e){try{var t=this.updateFunction(e);return!$p(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ca",value:function(e){var t=this;this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sa(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!$y(t)}return!1}}]),e}(),O_=function(){function e(t,n,r,i){var a=this;_e(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tp.UNAUTHENTICATED,this.clientId=Ip.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ap("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ap("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ie(e,[{key:"getConfiguration",value:function(){var e=x(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new dp(hp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new pp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(x(A().mark((function n(){var r;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=nx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function P_(e,t){return D_.apply(this,arguments)}function D_(){return D_=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ap("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,pb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function R_(e,t){return L_.apply(this,arguments)}function L_(){return L_=x(A().mark((function e(t,n){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,M_(t);case 3:return r=e.sent,ap("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return $w(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return $w(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),L_.apply(this,arguments)}function M_(e){return F_.apply(this,arguments)}function F_(){return F_=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ap("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,P_(t,new x_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e){return j_.apply(this,arguments)}function j_(){return j_=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ap("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,R_(t,new I_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function V_(e){return M_(e).then((function(e){return e.persistence}))}function B_(e){return M_(e).then((function(e){return e.localStore}))}function q_(e){return U_(e).then((function(e){return e.remoteStore}))}function z_(e){return U_(e).then((function(e){return e.syncEngine}))}function W_(e){return G_.apply(this,arguments)}function G_(){return G_=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U_(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Sx.bind(null,n.syncEngine),r.onUnlisten=Ax.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}function K_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pp;return e.asyncQueue.enqueueAndForget(x(A().mark((function i(){return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new T_({next:function(a){t.enqueueAndForget((function(){return lx(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new dp(hp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new dp(hp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new vx(Xv(n.path),a,{includeMetadataChanges:!0,Du:!0});return sx(e,o)},i.next=3,W_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function H_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new pp;return e.asyncQueue.enqueueAndForget(x(A().mark((function i(){return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new T_({next:function(n){t.enqueueAndForget((function(){return lx(e,o)})),n.fromCache&&"server"===r.source?i.reject(new dp(hp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new vx(n,a,{includeMetadataChanges:!0,Du:!0});return sx(e,o)},i.next=3,W_(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Q_=new Map;function $_(e,t,n){if(!n)throw new dp(hp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Y_(e,t,n,r){if(!0===t&&!0===r)throw new dp(hp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function J_(e){if(!Xp.isDocumentKey(e))throw new dp(hp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function X_(e){if(Xp.isDocumentKey(e))throw new dp(hp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Z_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":cp()}function eE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new dp(hp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Z_(e);throw new dp(hp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function tE(e,t){if(t<=0)throw new dp(hp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var nE=function(){function e(t){var n;if(_e(this,e),void 0===t.host){if(void 0!==t.ssl)throw new dp(hp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dp(hp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Y_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ie(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),rE=function(){function e(t,n,r){_e(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nE({}),this._settingsFrozen=!1,t instanceof Qp?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new dp(hp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qp(e.options.projectId)}(t))}return Ie(e,[{key:"app",get:function(){if(!this._app)throw new dp(hp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new dp(hp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yp;switch(e.type){case"gapi":var t=e.client;return lp(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new bp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new dp(hp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Q_.get(e);t&&(ap("ComponentProvider","Removing Datastore"),Q_.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function iE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=eE(e,rE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&up("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=tp.MOCK_USER;else{o=ze(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new dp(hp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tp(s)}e._authCredentials=new mp(new vp(o,u))}}var aE=function(){function e(t,n,r){_e(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ie(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new uE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),oE=function(){function e(t,n,r){_e(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ie(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),uE=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this,e,r,Xv(i)))._path=i,a.type="collection",a}return Ie(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new aE(this.firestore,null,new Xp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(oE);function sE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=lt(e),$_("collection","path",t),e instanceof rE){var a=Lp.fromString.apply(Lp,[t].concat(r));return X_(a),new uE(e,null,a)}if(!(e instanceof aE||e instanceof uE))throw new dp(hp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lp.fromString.apply(Lp,[t].concat(r)));return X_(o),new uE(e.firestore,null,o)}function cE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=lt(e),1===arguments.length&&(t=Ip.R()),$_("doc","path",t),e instanceof rE){var a=Lp.fromString.apply(Lp,[t].concat(r));return J_(a),new aE(e,null,new Xp(a))}if(!(e instanceof aE||e instanceof uE))throw new dp(hp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lp.fromString.apply(Lp,[t].concat(r)));return J_(o),new aE(e.firestore,e instanceof uE?e.converter:null,new Xp(o))}function lE(e,t){return e=lt(e),t=lt(t),(e instanceof aE||e instanceof uE)&&(t instanceof aE||t instanceof uE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function fE(e,t){return e=lt(e),t=lt(t),e instanceof oE&&t instanceof oE&&e.firestore===t.firestore&&uy(e._query,t._query)&&e.converter===t.converter}var hE=function(){function e(){var t=this;_e(this,e),this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new uw(this,"async_queue_retry"),this.Ua=function(){var e=aw();e&&ap("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=aw();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ua)}return Ie(e,[{key:"isShuttingDown",get:function(){return this.Ma}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.qa(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;var t=aw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}},{key:"enqueue",value:function(e){var t=this;if(this.qa(),this.Ma)return new Promise((function(){}));var n=new pp;return this.Ga((function(){return t.Ma&&t.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.ka.push(e),t.Ka()}))}},{key:"Ka",value:function(){var e=x(A().mark((function e(){var t=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.ka.length){e.next=14;break}return e.prev=1,e.next=4,this.ka[0]();case 4:this.ka.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Rg(e.t0)){e.next=12;break}throw e.t0;case 12:ap("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.ka.length>0&&this.So.Io((function(){return t.Ka()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.Na.then((function(){return t.$a=!0,e().catch((function(e){t.Fa=e,t.$a=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw op("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.$a=!1,e}))}));return this.Na=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.qa(),this.La.indexOf(e)>-1&&(t=0);var i=tx.createAndSchedule(this,e,t,n,(function(e){return r.Qa(e)}));return this.Oa.push(i),i}},{key:"qa",value:function(){this.Fa&&cp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ja",value:function(){var e=x(A().mark((function e(){var t;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Na,e.next=3,t;case 3:if(t!==this.Na){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t,n=Se(this.Oa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"za",value:function(e){var t=this;return this.ja().then((function(){t.Oa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Se(t.Oa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ja()}))}},{key:"Ha",value:function(e){this.La.push(e)}},{key:"Qa",value:function(e){var t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}]),e}();function dE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Se(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var pE=function(){function e(){_e(this,e),this._progressObserver={},this._taskCompletionResolver=new pp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ie(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),vE=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new hE,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ie(n,[{key:"_terminate",value:function(){return this._firestoreClient||mE(this),this._firestoreClient.terminate()}}]),n}(rE);function yE(e){return e._firestoreClient||mE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function mE(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Hp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new O_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function gE(e,t,n){var r=new pp;return e.asyncQueue.enqueue(x(A().mark((function i(){return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,P_(e,n);case 3:return i.next=5,R_(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===hp.FAILED_PRECONDITION||e.code===hp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function kE(e){return function(e){return e.asyncQueue.enqueue(x(A().mark((function t(){var n,r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V_(e);case 2:return n=t.sent,t.next=5,q_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=fp(e);return t.lu.delete(0),pw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(yE(e=eE(e,vE)))}function bE(e){return function(e){return e.asyncQueue.enqueue(x(A().mark((function t(){var n,r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V_(e);case 2:return n=t.sent,t.next=5,q_(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fp(t)).lu.add(0),e.next=4,yw(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(yE(e=eE(e,vE)))}function wE(e,t){var n=yE(e=eE(e,vE)),r=new pE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new C_(e,t)}(function(e,t){if(e instanceof Uint8Array)return S_(e,t);if(e instanceof ArrayBuffer)return S_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,ow(t));e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w_,t.next=3,z_(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function xE(e,t){return function(e,t){return e.asyncQueue.enqueue(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=fp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.ds.getNamedQuery(e,t)}))},n.next=3,B_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(yE(e=eE(e,vE)),t).then((function(t){return t?new oE(e,null,t.query):null}))}function _E(e){if(e._initialized||e._terminated)throw new dp(hp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var EE=function(){function e(){_e(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new dp(hp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fp(n)}return Ie(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var IE=function(){function e(t){_e(this,e),this._byteString=t}return Ie(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(jp.fromBase64String(t))}catch(t){throw new dp(hp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(jp.fromUint8Array(t))}}]),e}(),SE=Ie((function e(t){_e(this,e),this._methodName=t})),TE=function(){function e(t,n){if(_e(this,e),!isFinite(t)||t<-90||t>90)throw new dp(hp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new dp(hp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ie(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Sp(this._lat,e._lat)||Sp(this._long,e._long)}}]),e}(),CE=/^__.*__$/,NE=function(){function e(t,n,r){_e(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ie(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Vy(e,this.data,this.fieldMask,t,this.fieldTransforms):new jy(e,this.data,t,this.fieldTransforms)}}]),e}(),AE=function(){function e(t,n,r){_e(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ie(e,[{key:"toMutation",value:function(e,t){return new Vy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function OE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cp()}}var PE=function(){function e(t,n,r,i,a,o){_e(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ie(e,[{key:"path",get:function(){return this.settings.path}},{key:"Ya",get:function(){return this.settings.Ya}},{key:"Xa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Za",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.ec(e),r}},{key:"nc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Xa({path:n,tc:!1});return r.Ja(),r}},{key:"sc",value:function(e){return this.Xa({path:void 0,tc:!0})}},{key:"ic",value:function(e){return XE(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ja",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ec(this.path.get(e))}},{key:"ec",value:function(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(OE(this.Ya)&&CE.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}]),e}(),DE=function(){function e(t,n,r){_e(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||ow(t)}return Ie(e,[{key:"uc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new PE({Ya:e,methodName:t,oc:n,path:Fp.emptyPath(),tc:!1,rc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function RE(e){var t=e._freezeSettings(),n=ow(e._databaseId);return new DE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function LE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.uc(a.merge||a.mergeFields?2:0,t,n,i);QE("Data must be an object, but it was:",o,r);var u,s,c=KE(r,o);if(a.merge)u=new Up(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Se(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=$E(t,d,n);if(!o.contains(p))throw new dp(hp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));ZE(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Up(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new NE(new gv(c),u,s)}var ME=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Ya)throw 1===e.Ya?e.ic("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ic("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(SE);function FE(e,t,n){return new PE({Ya:3,oc:t.settings.oc,methodName:e._methodName,tc:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var UE=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"_toFieldTransform",value:function(e){return new Ny(e.path,new wy)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(SE),jE=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e)).ac=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=FE(this,e,!0),n=this.ac.map((function(e){return GE(e,t)})),r=new xy(n);return new Ny(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(SE),VE=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e)).ac=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=FE(this,e,!0),n=this.ac.map((function(e){return GE(e,t)})),r=new Ey(n);return new Ny(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(SE),BE=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e)).cc=r,i}return Ie(n,[{key:"_toFieldTransform",value:function(e){var t=new Sy(e.M,yy(e.M,this.cc));return new Ny(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(SE);function qE(e,t,n,r){var i=e.uc(1,t,n);QE("Data must be an object, but it was:",i,r);var a=[],o=gv.empty();Pp(r,(function(e,r){var u=JE(t,e,n);r=lt(r);var s=i.nc(u);if(r instanceof ME)a.push(u);else{var c=GE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Up(a);return new AE(o,u,i.fieldTransforms)}function zE(e,t,n,r,i,a){var o=e.uc(1,t,n),u=[$E(t,r,n)],s=[i];if(a.length%2!=0)throw new dp(hp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push($E(t,a[c])),s.push(a[c+1]);for(var l=[],f=gv.empty(),h=u.length-1;h>=0;--h)if(!ZE(l,u[h])){var d=u[h],p=s[h];p=lt(p);var v=o.nc(d);if(p instanceof ME)l.push(d);else{var y=GE(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Up(l);return new AE(f,m,o.fieldTransforms)}function WE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return GE(n,e.uc(r?4:3,t))}function GE(e,t){if(HE(e=lt(e)))return QE("Unsupported field value:",t,e),KE(e,t);if(e instanceof SE)return function(e,t){if(!OE(t.Ya))throw t.ic("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ic("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Se(e);try{for(a.s();!(n=a.n()).done;){var o=GE(n.value,t.sc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=lt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yy(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Np.fromDate(e);return{timestampValue:Sm(t.M,n)}}if(e instanceof Np){var r=new Np(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sm(t.M,r)}}if(e instanceof TE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof IE)return{bytesValue:Tm(t.M,e._byteString)};if(e instanceof aE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ic("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Am(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic("Unsupported field value: ".concat(Z_(e)))}(e,t)}function KE(e,t){var n={};return Dp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pp(e,(function(e,r){var i=GE(r,t.Za(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function HE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Np||e instanceof TE||e instanceof IE||e instanceof aE||e instanceof SE)}function QE(e,t,n){if(!HE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Z_(n);throw"an object"===r?t.ic(e+" a custom object"):t.ic(e+" "+r)}}function $E(e,t,n){if((t=lt(t))instanceof EE)return t._internalPath;if("string"==typeof t)return JE(e,t);throw XE("Field path arguments must be of type string or ",e,!1,void 0,n)}var YE=new RegExp("[~\\*/\\[\\]]");function JE(e,t,n){if(t.search(YE)>=0)throw XE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Le(EE,mt(t.split(".")))._internalPath}catch(r){throw XE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function XE(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new dp(hp.INVALID_ARGUMENT,u+e+s)}function ZE(e,t){return e.some((function(e){return e.isEqual(t)}))}var eI=function(){function e(t,n,r,i,a){_e(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ie(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new aE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(nI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),tI=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(){return Cn(Ae(n.prototype),"data",this).call(this)}}]),n}(eI);function nI(e,t){return"string"==typeof t?JE(e,t):t instanceof EE?t._internalPath:t._delegate._internalPath}var rI=function(){function e(t,n){_e(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ie(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),iI=function(e){Ne(n,e);var t=Re(n);function n(e,r,i,a,o,u){var s;return _e(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ie(n,[{key:"exists",value:function(){return Cn(Ae(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new aI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(nI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(eI),aI=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Cn(Ae(n.prototype),"data",this).call(this,e)}}]),n}(iI),oI=function(){function e(t,n,r,i){_e(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new rI(i.hasPendingWrites,i.fromCache),this.query=r}return Ie(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new aI(n._firestore,n._userDataWriter,r.key,r,new rI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dp(hp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new aI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new aI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new rI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:uI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function uI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cp()}}function sI(e,t){return e instanceof iI&&t instanceof iI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof oI&&t instanceof oI&&e._firestore===t._firestore&&fE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function cI(e){if(ey(e)&&0===e.explicitOrderBy.length)throw new dp(hp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lI=Ie((function e(){_e(this,e)}));function fI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var hI=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this)).hc=e,a.lc=r,a.fc=i,a.type="where",a}return Ie(n,[{key:"_apply",value:function(e){var t=RE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new dp(hp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){_I(o,a);var s,c=[],l=Se(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(xI(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=xI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||_I(o,a),u=WE(n,"where",o,"in"===a||"not-in"===a);var h=Mv.create(i,a,u);return function(e,t){if(t.S()){var n=ny(e);if(null!==n&&!n.isEqual(t.field))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=ty(e);null!==r&&EI(e,t.field,r)}var i=function(e,t){var n,r=Se(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new dp(hp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new dp(hp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new oE(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Yv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(lI);var dI=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this)).hc=e,i.dc=r,i.type="orderBy",i}return Ie(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Kv(t,n);return function(e,t){if(null===ty(e)){var n=ny(e);null!==n&&EI(e,n,t.field)}}(e,r),r}(e._query,this.hc,this.dc);return new oE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Yv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(lI);var pI=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this)).type=e,a._c=r,a.wc=i,a}return Ie(n,[{key:"_apply",value:function(e){return new oE(e.firestore,e.converter,oy(e._query,this._c,this.wc))}}]),n}(lI);var vI=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return Ie(n,[{key:"_apply",value:function(e){var t=wI(e,this.type,this.mc,this.gc);return new oE(e.firestore,e.converter,function(e,t){return new Yv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(lI);function yI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vI("startAt",t,!0)}function mI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vI("startAfter",t,!1)}var gI=function(e){Ne(n,e);var t=Re(n);function n(e,r,i){var a;return _e(this,n),(a=t.call(this)).type=e,a.mc=r,a.gc=i,a}return Ie(n,[{key:"_apply",value:function(e){var t=wI(e,this.type,this.mc,this.gc);return new oE(e.firestore,e.converter,function(e,t){return new Yv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(lI);function kI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gI("endBefore",t,!1)}function bI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gI("endAt",t,!0)}function wI(e,t,n,r){if(n[0]=lt(n[0]),n[0]instanceof eI)return function(e,t,n,r,i){if(!r)throw new dp(hp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Se(iy(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(sv(t,r.key));else{var c=r.data.field(s.field);if(Wp(c))throw new dp(hp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Gv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=RE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new dp(hp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ry(e)&&-1!==c.indexOf("/"))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Lp.fromString(c));if(!Xp.isDocumentKey(l))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Xp(l);u.push(sv(t,f))}else{var h=WE(n,r,c);u.push(h)}}return new Gv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function xI(e,t,n){if("string"==typeof(n=lt(n))){if(""===n)throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ry(t)&&-1!==n.indexOf("/"))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Lp.fromString(n));if(!Xp.isDocumentKey(r))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sv(e,new Xp(r))}if(n instanceof aE)return sv(e,n._key);throw new dp(hp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Z_(n),"."))}function _I(e,t){if(!Array.isArray(e)||0===e.length)throw new dp(hp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new dp(hp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function EI(e,t,n){if(!n.isEqual(t))throw new dp(hp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var II=function(){function e(){_e(this,e)}return Ie(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(tv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Pp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new TE(qp(e.latitude),qp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Gp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Kp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Bp(e);return new Np(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Lp.fromString(e);lp(eg(n));var r=new Qp(n.get(1),n.get(3)),i=new Xp(n.popFirst(5));return r.isEqual(t)||op("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function SI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var TI=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new IE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new aE(this.firestore,null,t)}}]),n}(II),CI=function(){function e(t,n){_e(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=RE(t)}return Ie(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=NI(e,this._firestore),i=SI(r.converter,t,n),a=LE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Oy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=NI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=lt(t))||t instanceof EE?zE(this._dataReader,"WriteBatch.update",i._key,t,n,o):qE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Oy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=NI(e,this._firestore);return this._mutations=this._mutations.concat(new Ky(t._key,Oy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new dp(hp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function NI(e,t){if((e=lt(e)).firestore!==t)throw new dp(hp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var AI=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new IE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new aE(this.firestore,null,t)}}]),n}(II);function OI(e){e=eE(e,aE);var t=eE(e.firestore,vE),n=yE(t),r=new AI(t);return function(e,t){var n=new pp;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=x(A().mark((function e(t,n,r){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=fp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ai.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new dp(hp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=nx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,B_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new iI(t,r,e._key,n,new rI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function PI(e){e=eE(e,oE);var t=eE(e.firestore,vE),n=yE(t),r=new AI(t);return function(e,t){var n=new pp;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=x(A().mark((function e(t,n,r){var i,a,o,u,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Eb(t,n,!0);case 3:i=e.sent,a=new xx(n,i.hi),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=nx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,B_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new oI(t,r,e,n)}))}function DI(e,t,n){e=eE(e,aE);var r=eE(e.firestore,vE),i=SI(e.converter,t,n);return FI(r,[LE(RE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Oy.none())])}function RI(e,t,n){e=eE(e,aE);for(var r=eE(e.firestore,vE),i=RE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return FI(r,[("string"==typeof(t=lt(t))||t instanceof EE?zE(i,"updateDoc",e._key,t,n,o):qE(i,"updateDoc",e._key,t)).toMutation(e._key,Oy.exists(!0))])}function LI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=lt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||dE(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(dE(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof aE)l=eE(e.firestore,vE),f=Xv(e._key.path),c={next:function(t){n[s]&&n[s](UI(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=eE(e,oE);l=eE(p.firestore,vE),f=p._query;var v=new AI(l);c={next:function(e){n[s]&&n[s](new oI(l,v,p,e))},error:n[s+1],complete:n[s+2]},cI(e._query)}return function(e,t,n,r){var i=new T_(r),a=new vx(t,i,n);return e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sx,t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.pa(),e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lx,t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(yE(l),f,h,c)}function MI(e,t){return function(e,t){var n=new T_(t);return e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fp(e).Tu.add(t),t.next()},t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.pa(),e.asyncQueue.enqueueAndForget(x(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fp(e).Tu.delete(t)},t.next=3,W_(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(yE(e=eE(e,vE)),dE(t)?t:{next:t})}function FI(e,t){return function(e,t){var n=new pp;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Px,r.next=3,z_(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(yE(e),t)}function UI(e,t,n){var r=n.docs.get(t._key),i=new AI(e);return new iI(e,i,t._key,r,new rI(n.hasPendingWrites,n.fromCache),t.converter)}var jI=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ie(n,[{key:"get",value:function(e){var t=this,r=NI(e,this._firestore),i=new AI(this._firestore);return Cn(Ae(n.prototype),"get",this).call(this,e).then((function(e){return new iI(t._firestore,i,r._key,e._document,new rI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){_e(this,e),this._firestore=t,this._transaction=n,this._dataReader=RE(t)}return Ie(e,[{key:"get",value:function(e){var t=this,n=NI(e,this._firestore),r=new TI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return cp();var i=e[0];if(i.isFoundDocument())return new eI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new eI(t._firestore,r,n._key,null,n.converter);throw cp()}))}},{key:"set",value:function(e,t,n){var r=NI(e,this._firestore),i=SI(r.converter,t,n),a=LE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=NI(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=lt(t))||t instanceof EE?zE(this._dataReader,"Transaction.update",i._key,t,n,o):qE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=NI(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function VI(e,t){return function(e,t){var n=new pp;return e.asyncQueue.enqueueAndForget(x(A().mark((function r(){var i;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return U_(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new A_(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(yE(e=eE(e,vE)),(function(n){return t(new jI(e,n))}))}function BI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jE("arrayUnion",t)}function qI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new VE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){np=e}($t),qt(new gt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new vE(i,new gp(e.getProvider("auth-internal")),new xp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),tn(ep,"3.4.7",e),tn(ep,"3.4.7","esm2017")}();function zI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new dp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function WI(){if("undefined"===typeof Uint8Array)throw new dp("unimplemented","Uint8Arrays are not available in this environment.")}function GI(){if("undefined"==typeof atob)throw new dp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var KI=function(){function e(t){_e(this,e),this._delegate=t}return Ie(e,[{key:"toBase64",value:function(){return GI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return WI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return GI(),new e(IE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return WI(),new e(IE.fromUint8Array(t))}}]),e}();function HI(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Se(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var QI=function(){function e(){_e(this,e)}return Ie(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){_E(e=eE(e,vE));var n=yE(e),r=e._freezeSettings(),i=new I_;return gE(n,i,new __(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){_E(e=eE(e,vE));var t=yE(e),n=e._freezeSettings(),r=new I_;return gE(t,r,new E_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new dp(hp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new pp;return e._queue.enqueueAndForgetEvenWhileRestricted(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=x(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Og.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Og.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(sb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),$I=function(){function e(t,n,r){var i=this;_e(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Qp||(this._appCompat=t)}return Ie(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||up("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};iE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return kE(this._delegate)}},{key:"disableNetwork",value:function(){return bE(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Y_("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new pp;return e.asyncQueue.enqueueAndForget(x(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=zx,n.next=3,z_(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(yE(e=eE(e,vE)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return MI(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new dp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new cS(this,sE(this._delegate,e))}catch(t){throw tS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new eS(this,cE(this._delegate,e))}catch(t){throw tS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new oS(this,function(e,t){if(e=eE(e,rE),$_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new dp(hp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new oE(e,null,function(e){return new Yv(Lp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw tS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return VI(this._delegate,(function(n){return e(new JI(t,n))}))}},{key:"batch",value:function(){var e=this;return yE(this._delegate),new XI(new CI(this._delegate,(function(t){return FI(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return wE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return xE(this._delegate,e).then((function(e){return e?new oS(t,e):null}))}}]),e}(),YI=function(e){Ne(n,e);var t=Re(n);function n(e){var r;return _e(this,n),(r=t.call(this)).firestore=e,r}return Ie(n,[{key:"convertBytes",value:function(e){return new KI(new IE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return eS.forKey(t,this.firestore,null)}}]),n}(II);var JI=function(){function e(t,n){_e(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new YI(t)}return Ie(e,[{key:"get",value:function(e){var t=this,n=lS(e);return this._delegate.get(n).then((function(e){return new iS(t._firestore,new iI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=lS(e);return n?(zI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=lS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lS(e);return this._delegate.delete(t),this}}]),e}(),XI=function(){function e(t){_e(this,e),this._delegate=t}return Ie(e,[{key:"set",value:function(e,t,n){var r=lS(e);return n?(zI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=lS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lS(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ZI=function(){function e(t,n,r){_e(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ie(e,[{key:"fromFirestore",value:function(e,t){var n=new aI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new aS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new YI(t),n),i.set(n,a)),a}}]),e}();ZI.INSTANCES=new WeakMap;var eS=function(){function e(t,n){_e(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new YI(t)}return Ie(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new cS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new cS(this.firestore,sE(this._delegate,e))}catch(t){throw tS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=lt(e))instanceof aE&&lE(this._delegate,e)}},{key:"set",value:function(e,t){t=zI("DocumentReference.set",t);try{return t?DI(this._delegate,e,t):DI(this._delegate,e)}catch(n){throw tS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?RI(this._delegate,e):RI.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw tS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return FI(eE(e.firestore,vE),[new Ky(e._key,Oy.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=nS(n),a=rS(n,(function(t){return new iS(e.firestore,new iI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return LI(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?OI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=eE(e,aE);var t=eE(e.firestore,vE);return K_(yE(t),e._key,{source:"server"}).then((function(n){return UI(t,e,n)}))}(this._delegate):function(e){e=eE(e,aE);var t=eE(e.firestore,vE);return K_(yE(t),e._key).then((function(n){return UI(t,e,n)}))}(this._delegate),t.then((function(e){return new iS(n.firestore,new iI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ZI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new dp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new aE(n._delegate,r,new Xp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new aE(n._delegate,r,t))}}]),e}();function tS(e,t,n){return e.message=e.message.replace(t,n),e}function nS(e){var t,n=Se(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!HI(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function rS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=HI(e[0])?e[0]:HI(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var iS=function(){function e(t,n){_e(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"ref",get:function(){return new eS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return sI(this._delegate,e._delegate)}}]),e}(),aS=function(e){Ne(n,e);var t=Re(n);function n(){return _e(this,n),t.apply(this,arguments)}return Ie(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||cp()}(void 0!==t),t}}]),n}(iS),oS=function(){function e(t,n){_e(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new YI(t)}return Ie(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,fI(this._delegate,function(e,t,n){var r=t,i=nI("where",e);return new hI(i,r,n)}(t,n,r)))}catch(i){throw tS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,fI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=nI("orderBy",e);return new dI(n,t)}(t,n)))}catch(r){throw tS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,fI(this._delegate,function(e){return tE("limit",e),new pI("limit",e,"F")}(t)))}catch(n){throw tS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,fI(this._delegate,function(e){return tE("limitToLast",e),new pI("limitToLast",e,"L")}(t)))}catch(n){throw tS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,fI(this._delegate,yI.apply(void 0,arguments)))}catch(t){throw tS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,fI(this._delegate,mI.apply(void 0,arguments)))}catch(t){throw tS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,fI(this._delegate,kI.apply(void 0,arguments)))}catch(t){throw tS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,fI(this._delegate,bI.apply(void 0,arguments)))}catch(t){throw tS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return fE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?PI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=eE(e,oE);var t=eE(e.firestore,vE),n=yE(t),r=new AI(t);return H_(n,e._query,{source:"server"}).then((function(n){return new oI(t,r,e,n)}))}(this._delegate):function(e){e=eE(e,oE);var t=eE(e.firestore,vE),n=yE(t),r=new AI(t);return cI(e._query),H_(n,e._query).then((function(n){return new oI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new sS(n.firestore,new oI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=nS(n),a=rS(n,(function(t){return new sS(e.firestore,new oI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return LI(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ZI.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),uS=function(){function e(t,n){_e(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new aS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),sS=function(){function e(t,n){_e(this,e),this._firestore=t,this._delegate=n}return Ie(e,[{key:"query",get:function(){return new oS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new aS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new uS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new aS(n._firestore,r))}))}},{key:"isEqual",value:function(e){return sI(this._delegate,e._delegate)}}]),e}(),cS=function(e){Ne(n,e);var t=Re(n);function n(e,r){var i;return _e(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ie(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new eS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new eS(this.firestore,void 0===e?cE(this._delegate):cE(this._delegate,e))}catch(t){throw tS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=eE(e.firestore,vE),r=cE(e),i=SI(e.converter,t);return FI(n,[LE(RE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Oy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new eS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return lE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ZI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(oS);function lS(e){return eE(e,aE)}var fS=function(){function e(){_e(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Le(EE,n)}return Ie(e,[{key:"isEqual",value:function(e){return(e=lt(e))instanceof EE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Fp.keyField().canonicalString())}}]),e}(),hS=function(){function e(t){_e(this,e),this._delegate=t}return Ie(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new UE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new ME("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=BI.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=qI.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new BE("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),dS={Firestore:$I,GeoPoint:TE,Timestamp:Np,Blob:KI,Transaction:JI,WriteBatch:XI,DocumentReference:eS,DocumentSnapshot:iS,Query:oS,QueryDocumentSnapshot:aS,QuerySnapshot:sS,CollectionReference:cS,FieldPath:fS,FieldValue:hS,setLogLevel:function(e){!function(e){rp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new gt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},dS)))}(e,(function(e,t){return new $I(e,t,new QI)})),e.registerVersion("@firebase/firestore-compat","0.1.16")}(Sn);Sn.initializeApp({apiKey:"AIzaSyAdGsj0MTNrezlbccOzjeOrgMlqeDd6aL4",authDomain:"crud-react-5efe1.firebaseapp.com",projectId:"crud-react-5efe1",storageBucket:"crud-react-5efe1.appspot.com",messagingSenderId:"461508619638",appId:"1:461508619638:web:28b9ec66b903f276bf9e57"});var pS=Sn.firestore(),vS=new Sn.auth.GoogleAuthProvider,yS="[Auth] login",mS="[Auth] logout",gS="[Nomina] add",kS="[Nomina] delete",bS="[Nomina] read",wS="[Nomina] clean",xS=function(e,t){return{type:yS,payload:{uid:e,displayName:t}}},_S=n(184),ES=function(){var e=y(),n=T((0,t.useState)({email:"",password:""}),2),r=n[0],i=n[1],a=function(e){var t=e.target.value;i(we(we({},r),{},ke({},e.target.name,t)))},o=r.email,u=r.password,s=function(){console.log("login google"),e((function(e){Sn.auth().signInWithPopup(vS).then((function(t){var n=t.user;e(xS(n.uid,n.displayName))}))}))};return(0,_S.jsxs)("div",{className:"container",children:[(0,_S.jsx)("h3",{children:"Login"}),(0,_S.jsx)("hr",{}),(0,_S.jsx)("div",{className:"row container",children:(0,_S.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(n){Sn.auth().signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;n(xS(t.uid,t.displayName))}))}}(o,u))},className:"col s12",children:[(0,_S.jsxs)("div",{className:"row",children:[(0,_S.jsxs)("div",{className:"input-field col s12",children:[(0,_S.jsx)("i",{className:"material-icons prefix",children:"email"}),(0,_S.jsx)("input",{onChange:a,value:o,name:"email",id:"icon_prefix2",className:"materialize-textarea",type:"email"}),(0,_S.jsx)("label",{htmlFor:"icon_prefix2",children:"Email"})]}),(0,_S.jsxs)("div",{className:"input-field col s12",children:[(0,_S.jsx)("i",{className:"material-icons prefix",children:"vpn_key"}),(0,_S.jsx)("input",{onChange:a,value:u,name:"password",id:"icon_prefix",className:"materialize-textarea",type:"password"}),(0,_S.jsx)("label",{htmlFor:"icon_prefix",children:"Password"})]})]}),(0,_S.jsx)("button",{className:"btn",type:"submit",children:"Login"}),(0,_S.jsx)("hr",{}),(0,_S.jsx)(xe.ZP,{onClick:function(){s()}}),(0,_S.jsx)(ge,{to:"/register",children:"Register in the platform"})]})})]})},IS=function(){var e=y(),n=T((0,t.useState)({email:"",username:"",password:"",password2:""}),2),r=n[0],i=n[1],a=function(e){var t=e.target.value;i(we(we({},r),{},ke({},e.target.name,t)))},o=r.email,u=r.username,s=r.password,c=r.password2;return(0,_S.jsxs)("div",{className:"container",children:[(0,_S.jsx)("h3",{children:"Register"}),(0,_S.jsx)("hr",{}),(0,_S.jsx)("div",{className:"row container",children:(0,_S.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t,n){return function(r){Sn.auth().createUserWithEmailAndPassword(e,n).then(function(){var e=x(A().mark((function e(n){var i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.user,e.next=3,i.updateProfile({displayName:t});case 3:r(xS(i.uid,i.displayName));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}(o,s,u))},className:"col s12",children:[(0,_S.jsxs)("div",{className:"row",children:[(0,_S.jsxs)("div",{className:"input-field col s12",children:[(0,_S.jsx)("i",{className:"material-icons prefix",children:"assignment_ind"}),(0,_S.jsx)("input",{onChange:a,value:u,name:"username",id:"icon_prefix1",className:"materialize-textarea",type:"text"}),(0,_S.jsx)("label",{htmlFor:"icon_prefix1",children:"Username"})]}),(0,_S.jsxs)("div",{className:"input-field col s12",children:[(0,_S.jsx)("i",{className:"material-icons prefix",children:"email"}),(0,_S.jsx)("input",{onChange:a,value:o,name:"email",id:"icon_prefix2",className:"materialize-textarea",type:"email"}),(0,_S.jsx)("label",{htmlFor:"icon_prefix2",children:"Email"})]}),(0,_S.jsxs)("div",{className:"input-field col s12",children:[(0,_S.jsx)("i",{className:"material-icons prefix",children:"vpn_key"}),(0,_S.jsx)("input",{onChange:a,value:s,name:"password",id:"icon_prefix3",className:"materialize-textarea",type:"password"}),(0,_S.jsx)("label",{htmlFor:"icon_prefix3",children:"Password"})]}),(0,_S.jsxs)("div",{className:"input-field col s12",children:[(0,_S.jsx)("i",{className:"material-icons prefix",children:"vpn_key"}),(0,_S.jsx)("input",{onChange:a,value:c,name:"password2",id:"icon_prefix4",className:"materialize-textarea",type:"password"}),(0,_S.jsx)("label",{htmlFor:"icon_prefix4",children:"Confirm Password"})]})]}),(0,_S.jsx)("button",{className:"btn",type:"submit",children:"Register"}),(0,_S.jsx)("hr",{}),(0,_S.jsx)(ge,{to:"/login",children:"Login into Account"})]})})]})},SS=function(e){return{type:gS,payload:e}},TS=function(e){return{type:kS,payload:e}},CS=function(e){var t,n=e.data,r=y(),i=n.fecha,a=n.pago,o=n.id;i.seconds?t=i.toDate().toLocaleString():t=i;return(0,_S.jsxs)(_S.Fragment,{children:[(0,_S.jsx)("td",{children:t}),(0,_S.jsxs)("td",{children:["$",a]}),(0,_S.jsx)("td",{children:(0,_S.jsx)("button",{onClick:function(){r(function(e){return function(){var t=x(A().mark((function t(n,r){var i;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r().auth.uid,t.next=3,pS.doc("".concat(i,"/nominas/nomina/").concat(e)).delete();case 3:n(TS(e));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(o))},className:"btn red",children:(0,_S.jsx)("i",{class:"material-icons",children:"delete_forever"})})})]})},NS=function(){var e=T((0,t.useState)(!1),2),n=e[0],r=e[1],i=T((0,t.useState)({precioHora:"",horas:""}),2),a=i[0],o=i[1],u=a.precioHora,s=a.horas,c=y(),l=function(e){o(we(we({},a),{},ke({},e.target.name,e.target.value)))};return(0,_S.jsxs)(_S.Fragment,{children:[(0,_S.jsx)("button",{onClick:function(){r(!n)},className:"btn green",children:n?"Cerrar":"Agregar"}),n&&(0,_S.jsxs)(_S.Fragment,{children:[(0,_S.jsx)("input",{type:"text",placeholder:"Ingrese Cantidad a Pago por Hora",value:u,onChange:l,name:"precioHora"}),(0,_S.jsx)("input",{type:"text",placeholder:"Ingrese Cantidad de Horas",value:s,onChange:l,name:"horas"}),(0,_S.jsx)("button",{onClick:function(){var e;c((e=s*u,function(){var t=x(A().mark((function t(n,r){var i,a,o,u,s;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r().auth.uid,a={fecha:(new Date).toLocaleDateString(),pago:e},t.next=4,pS.collection("".concat(i,"/nominas/nomina")).add(a);case 4:o=t.sent,u=o.id,s=we(we({},a),{},{id:u}),n(SS(s));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())),o({precioHora:"",horas:""})},className:"btn purple",children:"Calcular y Guardar"})]})]})},AS=function(){var e=y();return(0,_S.jsx)("nav",{className:"green",children:(0,_S.jsxs)("div",{className:"nav-wrapper",children:[(0,_S.jsx)("span",{className:"brand-logo",children:"Calculadora Nominal"}),(0,_S.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:(0,_S.jsx)("li",{children:(0,_S.jsx)("button",{onClick:function(){e({type:wS}),e(function(){var e=x(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn.auth().signOut();case 2:t({type:mS});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"btn red waves-effect waves-light btn",children:"Logout"})})})]})})},OS=function(){var e=b((function(e){return e.auth.displayName})),t=b((function(e){return e.nomina.data}));return(0,_S.jsxs)(_S.Fragment,{children:[(0,_S.jsx)(AS,{}),(0,_S.jsxs)("div",{className:"container",children:[(0,_S.jsxs)("h1",{className:"center",children:["Hola ",e]}),(0,_S.jsx)("hr",{}),(0,_S.jsx)(NS,{}),(0,_S.jsxs)("table",{children:[(0,_S.jsx)("thead",{children:(0,_S.jsxs)("tr",{children:[(0,_S.jsx)("th",{children:"Fecha"}),(0,_S.jsx)("th",{children:"Cantidad"}),(0,_S.jsx)("th",{children:"Borrar"})]})}),(0,_S.jsx)("tbody",{children:t.map((function(e){return(0,_S.jsx)("tr",{children:(0,_S.jsx)(CS,{data:e})},e.id)}))})]})]})]})},PS=function(){return(0,_S.jsx)(_S.Fragment,{children:(0,_S.jsx)(OS,{})})},DS=function(e){return e.log?(0,_S.jsx)(W,{}):(0,_S.jsx)(z,{to:"/login"})},RS=function(e){return e.log?(0,_S.jsx)(z,{to:"/app"}):(0,_S.jsx)(W,{})},LS=function(){var e=x(A().mark((function e(t){var n,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pS.collection("".concat(t,"/nominas/nomina")).get();case 2:return n=e.sent,r=[],n.forEach((function(e){var t=e.data();r.push(we({id:e.id},t))})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),MS=function(){var e=y(),n=T((0,t.useState)(!1),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){Sn.auth().onAuthStateChanged(function(){var t=x(A().mark((function t(n){var r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}return e(xS(n.uid,n.displayName)),i(!0),t.next=5,LS(n.uid);case 5:r=t.sent,e({type:bS,payload:r}),t.next=10;break;case 9:i(!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[e]),(0,_S.jsx)("div",{children:(0,_S.jsx)(me,{children:(0,_S.jsxs)(H,{children:[(0,_S.jsx)(G,{element:(0,_S.jsx)(DS,{log:r}),children:(0,_S.jsx)(G,{path:"/app",element:(0,_S.jsx)(PS,{})})}),(0,_S.jsxs)(G,{element:(0,_S.jsx)(RS,{log:r}),children:[(0,_S.jsx)(G,{path:"/login",element:(0,_S.jsx)(ES,{})}),(0,_S.jsx)(G,{path:"/register",element:(0,_S.jsx)(IS,{})})]})]})})})};function FS(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var US="function"===typeof Symbol&&Symbol.observable||"@@observable",jS=function(){return Math.random().toString(36).substring(7).split("").join(".")},VS={INIT:"@@redux/INIT"+jS(),REPLACE:"@@redux/REPLACE"+jS(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jS()}};function BS(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function qS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function zS(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var WS=zS();WS.withExtraArgument=zS;var GS=WS,KS={data:[]},HS=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:VS.INIT}))throw new Error(FS(12));if("undefined"===typeof n(void 0,{type:VS.PROBE_UNKNOWN_ACTION()}))throw new Error(FS(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(FS(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yS:return t.payload;case mS:return{};default:return e}},nomina:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:KS,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gS:return we(we({},e),{},{data:[].concat(mt(e.data),[t.payload])});case bS:return we(we({},e),{},{data:t.payload});case kS:return we(we({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload}))});case wS:return we(we({},e),{},{data:[]});default:return e}}}),QS=function e(t,n,r){var i;if("function"===typeof n&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(FS(0));if("function"===typeof n&&"undefined"===typeof r&&(r=n,n=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(FS(1));return r(e)(t,n)}if("function"!==typeof t)throw new Error(FS(2));var a=t,o=n,u=[],s=u,c=!1;function l(){s===u&&(s=u.slice())}function f(){if(c)throw new Error(FS(3));return o}function h(e){if("function"!==typeof e)throw new Error(FS(4));if(c)throw new Error(FS(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(FS(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),u=null}}}function d(e){if(!BS(e))throw new Error(FS(7));if("undefined"===typeof e.type)throw new Error(FS(8));if(c)throw new Error(FS(9));try{c=!0,o=a(o,e)}finally{c=!1}for(var t=u=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!==typeof e)throw new Error(FS(10));a=e,d({type:VS.REPLACE})}function v(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(FS(11));function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[US]=function(){return this},e}return d({type:VS.INIT}),(i={dispatch:d,subscribe:h,getState:f,replaceReducer:p})[US]=v,i}(HS,("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||qS)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(FS(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=qS.apply(void 0,a)(n.dispatch),we(we({},n),{},{dispatch:r})}}}(GS))),$S=function(){return(0,_S.jsx)(l,{store:QS,children:(0,_S.jsx)(MS,{})})},YS=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function JS(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var XS=function(e){e&&e instanceof Function&&n.e(377).then(n.bind(n,377)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,_S.jsx)(t.StrictMode,{children:(0,_S.jsx)($S,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");YS?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):JS(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):JS(t,e)}))}}(),XS()}()}();
//# sourceMappingURL=main.6b536b8d.js.map